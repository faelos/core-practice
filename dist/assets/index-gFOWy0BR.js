function ed(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Aa(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ki={exports:{}},ih=Ki.exports,ts;function rh(){return ts||(ts=1,function(o,t){(function(i,e){var r={};i.PubSub?(r=i.PubSub,console.warn("PubSub already loaded, using existing version")):(i.PubSub=r,e(r)),o!==void 0&&o.exports&&(t=o.exports=r),t.PubSub=r,o.exports=t=r})(typeof window=="object"&&window||ih||Re,function(i){var e={},r=-1,n="*";function a(d){var m;for(m in d)if(Object.prototype.hasOwnProperty.call(d,m))return!0;return!1}function s(d){return function(){throw d}}function h(d,m,C){try{d(m,C)}catch(f){setTimeout(s(f),0)}}function l(d,m,C){d(m,C)}function c(d,m,C,f){var u=e[m],b=f?l:h,S;if(Object.prototype.hasOwnProperty.call(e,m))for(S in u)Object.prototype.hasOwnProperty.call(u,S)&&b(u[S],d,C)}function p(d,m,C){return function(){var u=String(d),b=u.lastIndexOf(".");for(c(d,d,m,C);b!==-1;)u=u.substr(0,b),b=u.lastIndexOf("."),c(d,u,m,C);c(d,n,m,C)}}function y(d){var m=String(d),C=!!(Object.prototype.hasOwnProperty.call(e,m)&&a(e[m]));return C}function _(d){for(var m=String(d),C=y(m)||y(n),f=m.lastIndexOf(".");!C&&f!==-1;)m=m.substr(0,f),f=m.lastIndexOf("."),C=y(m);return C}function g(d,m,C,f){d=typeof d=="symbol"?d.toString():d;var u=p(d,m,f),b=_(d);return b?(C===!0?u():setTimeout(u,0),!0):!1}i.publish=function(d,m){return g(d,m,!1,i.immediateExceptions)},i.publishSync=function(d,m){return g(d,m,!0,i.immediateExceptions)},i.subscribe=function(d,m){if(typeof m!="function")return!1;d=typeof d=="symbol"?d.toString():d,Object.prototype.hasOwnProperty.call(e,d)||(e[d]={});var C="uid_"+String(++r);return e[d][C]=m,C},i.subscribeAll=function(d){return i.subscribe(n,d)},i.subscribeOnce=function(d,m){var C=i.subscribe(d,function(){i.unsubscribe(C),m.apply(this,arguments)});return i},i.clearAllSubscriptions=function(){e={}},i.clearSubscriptions=function(m){var C;for(C in e)Object.prototype.hasOwnProperty.call(e,C)&&C.indexOf(m)===0&&delete e[C]},i.countSubscriptions=function(m){var C,f,u=0;for(C in e)if(Object.prototype.hasOwnProperty.call(e,C)&&C.indexOf(m)===0){for(f in e[C])u++;break}return u},i.getSubscriptions=function(m){var C,f=[];for(C in e)Object.prototype.hasOwnProperty.call(e,C)&&C.indexOf(m)===0&&f.push(C);return f},i.unsubscribe=function(d){var m=function(P){var w;for(w in e)if(Object.prototype.hasOwnProperty.call(e,w)&&w.indexOf(P)===0)return!0;return!1},C=typeof d=="string"&&(Object.prototype.hasOwnProperty.call(e,d)||m(d)),f=!C&&typeof d=="string",u=typeof d=="function",b=!1,S,T,k;if(C){i.clearSubscriptions(d);return}for(S in e)if(Object.prototype.hasOwnProperty.call(e,S)){if(T=e[S],f&&T[d]){delete T[d],b=d;break}if(u)for(k in T)Object.prototype.hasOwnProperty.call(T,k)&&T[k]===d&&(delete T[k],b=!0)}return b}})}(Ki,Ki.exports)),Ki.exports}rh();function nh(o,t=2){if(!+o)return"0 Bytes";const i=1e3,e=t<0?0:t,r=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(o)/Math.log(i));return"".concat(parseFloat((o/Math.pow(i,n)).toFixed(e))," ").concat(r[n])}const it={IMAGE_UPLOAD_NEW_IMAGE:"image-upload-new-image",TOOLBAR_ANNOTATIONS_TOGGLED:"toolbar-annotations-toggled",TOOLBAR_FONT_SIZE_CHANGED:"toolbar-font-size-changed",TOOLBAR_ZOOM_CHANGED:"toolbar-zoom-changed",TOOLBAR_STROKE_WIDTH_SELECTED:"toolbar-stroke-width-selected",TOOLBAR_STROKE_COLOR_CHANGED:"toolbar-stroke-color-changed",TOOLBAR_FONT_COLOR_CHANGED:"toolbar-font-color-changed",TOOLBAR_STROKE_CLICKED:"toolbar-stroke-clicked",TOOLBAR_FONT_CLICKED:"toolbar-font-clicked",TOOLBAR_ERASER_CLICKED:"toolbar-eraser-clicked"},ce=document.querySelector(".c-image-upload__dropzone"),ke=document.querySelector(".c-image-upload__file"),tn=document.querySelector(".c-image-upload__error"),sh=ce.textContent,ah=["image/jpeg","image/png","image/web","image/gif"];function Ea(o){if(!ah.includes(o.type))throw new Error("Invalid file type. Accepted types: JPEG, PNG, WEBP or GIF.")}function Ra(o){tn.textContent=o,tn.classList.remove("d-none")}function ka(){tn.classList.add("d-none")}ce.addEventListener("click",()=>ke.click());ce.addEventListener("dragover",o=>{o.preventDefault(),ce.classList.add("is-dragging")});ce.addEventListener("dragleave",()=>{ce.classList.remove("is-dragging")});ce.addEventListener("drop",o=>{o.preventDefault(),ce.classList.remove("is-dragging"),ka();try{const t=o.dataTransfer.files[0];Ea(t),ke.files=o.dataTransfer.files,Ma()}catch(t){Ra(t.message)}});ke.addEventListener("change",()=>{ka();try{ke.files.length>0&&(Ea(ke.files[0]),Ma())}catch(o){Ra(o.message),ke.value=""}});function Ma(){var i;const o=(i=ke.files)==null?void 0:i[0],t=o?o.name:sh;ce.textContent="".concat(t," (").concat(nh(o.size),")"),PubSub.publish(it.IMAGE_UPLOAD_NEW_IMAGE,o)}function he(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Fa(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Gt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Je={duration:.5,overwrite:!1,delay:0},Tn,bt,ot,qt=1e8,at=1/qt,en=Math.PI*2,oh=en/4,hh=0,La=Math.sqrt,lh=Math.cos,ch=Math.sin,yt=function(t){return typeof t=="string"},dt=function(t){return typeof t=="function"},de=function(t){return typeof t=="number"},Pn=function(t){return typeof t>"u"},re=function(t){return typeof t=="object"},Et=function(t){return t!==!1},On=function(){return typeof window<"u"},fr=function(t){return dt(t)||yt(t)},Da=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},wt=Array.isArray,rn=/(?:-?\.?\d|\.)+/gi,Na=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ke=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Nr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ga=/[+-]=-?[.\d]+/,Ia=/[^,'"\[\]\s]+/gi,dh=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ht,Qt,nn,An,It={},yr={},Ba,Ua=function(t){return(yr=ti(t,It))&&Ft},En=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},er=function(t,i){return!i&&console.warn(t)},Va=function(t,i){return t&&(It[t]=i)&&yr&&(yr[t]=i)||It},ir=function(){return 0},uh={suppressEvents:!0,isStart:!0,kill:!1},gr={suppressEvents:!0,kill:!1},fh={suppressEvents:!0},Rn={},be=[],sn={},za,Lt={},Gr={},es=30,_r=[],kn="",Mn=function(t){var i=t[0],e,r;if(re(i)||dt(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(r=_r.length;r--&&!_r[r].targetTest(i););e=_r[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new fo(t[r],e)))||t.splice(r,1);return t},Fe=function(t){return t._gsap||Mn(Ht(t))[0]._gsap},qa=function(t,i,e){return(e=t[i])&&dt(e)?t[i]():Pn(e)&&t.getAttribute&&t.getAttribute(i)||e},Rt=function(t,i){return(t=t.split(",")).forEach(i)||t},gt=function(t){return Math.round(t*1e5)/1e5||0},mt=function(t){return Math.round(t*1e7)/1e7||0},$e=function(t,i){var e=i.charAt(0),r=parseFloat(i.substr(2));return t=parseFloat(t),e==="+"?t+r:e==="-"?t-r:e==="*"?t*r:t/r},gh=function(t,i){for(var e=i.length,r=0;t.indexOf(i[r])<0&&++r<e;);return r<e},vr=function(){var t=be.length,i=be.slice(0),e,r;for(sn={},be.length=0,e=0;e<t;e++)r=i[e],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Fn=function(t){return!!(t._initted||t._startAt||t.add)},Ha=function(t,i,e,r){be.length&&!bt&&vr(),t.render(i,e,!!(bt&&i<0&&Fn(t))),be.length&&!bt&&vr()},Wa=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match(Ia).length<2?i:yt(t)?t.trim():t},Ya=function(t){return t},Bt=function(t,i){for(var e in i)e in t||(t[e]=i[e]);return t},_h=function(t){return function(i,e){for(var r in e)r in i||r==="duration"&&t||r==="ease"||(i[r]=e[r])}},ti=function(t,i){for(var e in i)t[e]=i[e];return t},is=function o(t,i){for(var e in i)e!=="__proto__"&&e!=="constructor"&&e!=="prototype"&&(t[e]=re(i[e])?o(t[e]||(t[e]={}),i[e]):i[e]);return t},br=function(t,i){var e={},r;for(r in t)r in i||(e[r]=t[r]);return e},Zi=function(t){var i=t.parent||ht,e=t.keyframes?_h(wt(t.keyframes)):Bt;if(Et(t.inherit))for(;i;)e(t,i.vars.defaults),i=i.parent||i._dp;return t},ph=function(t,i){for(var e=t.length,r=e===i.length;r&&e--&&t[e]===i[e];);return e<0},Xa=function(t,i,e,r,n){var a=t[r],s;if(n)for(s=i[n];a&&a[n]>s;)a=a._prev;return a?(i._next=a._next,a._next=i):(i._next=t[e],t[e]=i),i._next?i._next._prev=i:t[r]=i,i._prev=a,i.parent=i._dp=t,i},Pr=function(t,i,e,r){e===void 0&&(e="_first"),r===void 0&&(r="_last");var n=i._prev,a=i._next;n?n._next=a:t[e]===i&&(t[e]=a),a?a._prev=n:t[r]===i&&(t[r]=n),i._next=i._prev=i.parent=null},Ce=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Le=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var e=t;e;)e._dirty=1,e=e.parent;return t},mh=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},an=function(t,i,e,r){return t._startAt&&(bt?t._startAt.revert(gr):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,r))},yh=function o(t){return!t||t._ts&&o(t.parent)},rs=function(t){return t._repeat?ei(t._tTime,t=t.duration()+t._rDelay)*t:0},ei=function(t,i){var e=Math.floor(t=mt(t/i));return t&&e===t?e-1:e},Sr=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},Or=function(t){return t._end=mt(t._start+(t._tDur/Math.abs(t._ts||t._rts||at)||0))},Ar=function(t,i){var e=t._dp;return e&&e.smoothChildTiming&&t._ts&&(t._start=mt(e._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),Or(t),e._dirty||Le(e,t)),t},Ka=function(t,i){var e;if((i._time||!i._dur&&i._initted||i._start<t._time&&(i._dur||!i.add))&&(e=Sr(t.rawTime(),i),(!i._dur||hr(0,i.totalDuration(),e)-i._tTime>at)&&i.render(e,!0)),Le(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(e=t;e._dp;)e.rawTime()>=0&&e.totalTime(e._tTime),e=e._dp;t._zTime=-at}},Jt=function(t,i,e,r){return i.parent&&Ce(i),i._start=mt((de(e)?e:e||t!==ht?zt(t,e,i):t._time)+i._delay),i._end=mt(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),Xa(t,i,"_first","_last",t._sort?"_start":0),on(i)||(t._recent=i),r||Ka(t,i),t._ts<0&&Ar(t,t._tTime),t},ja=function(t,i){return(It.ScrollTrigger||En("scrollTrigger",i))&&It.ScrollTrigger.create(i,t)},$a=function(t,i,e,r,n){if(Dn(t,i,n),!t._initted)return 1;if(!e&&t._pt&&!bt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&za!==Dt.frame)return be.push(t),t._lazy=[n,r],1},vh=function o(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||o(i))},on=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},bh=function(t,i,e,r){var n=t.ratio,a=i<0||!i&&(!t._start&&vh(t)&&!(!t._initted&&on(t))||(t._ts<0||t._dp._ts<0)&&!on(t))?0:1,s=t._rDelay,h=0,l,c,p;if(s&&t._repeat&&(h=hr(0,t._tDur,i),c=ei(h,s),t._yoyo&&c&1&&(a=1-a),c!==ei(t._tTime,s)&&(n=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==n||bt||r||t._zTime===at||!i&&t._zTime){if(!t._initted&&$a(t,i,r,e,h))return;for(p=t._zTime,t._zTime=i||(e?at:0),e||(e=i&&!p),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=h,l=t._pt;l;)l.r(a,l.d),l=l._next;i<0&&an(t,i,e,!0),t._onUpdate&&!e&&Nt(t,"onUpdate"),h&&t._repeat&&!e&&t.parent&&Nt(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===a&&(a&&Ce(t,1),!e&&!bt&&(Nt(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},Sh=function(t,i,e){var r;if(e>i)for(r=t._first;r&&r._start<=e;){if(r.data==="isPause"&&r._start>i)return r;r=r._next}else for(r=t._last;r&&r._start>=e;){if(r.data==="isPause"&&r._start<i)return r;r=r._prev}},ii=function(t,i,e,r){var n=t._repeat,a=mt(i)||0,s=t._tTime/t._tDur;return s&&!r&&(t._time*=a/t._dur),t._dur=a,t._tDur=n?n<0?1e10:mt(a*(n+1)+t._rDelay*n):a,s>0&&!r&&Ar(t,t._tTime=t._tDur*s),t.parent&&Or(t),e||Le(t.parent,t),t},ns=function(t){return t instanceof Tt?Le(t):ii(t,t._dur)},Ch={_start:0,endTime:ir,totalDuration:ir},zt=function o(t,i,e){var r=t.labels,n=t._recent||Ch,a=t.duration()>=qt?n.endTime(!1):t._dur,s,h,l;return yt(i)&&(isNaN(i)||i in r)?(h=i.charAt(0),l=i.substr(-1)==="%",s=i.indexOf("="),h==="<"||h===">"?(s>=0&&(i=i.replace(/=/,"")),(h==="<"?n._start:n.endTime(n._repeat>=0))+(parseFloat(i.substr(1))||0)*(l?(s<0?n:e).totalDuration()/100:1)):s<0?(i in r||(r[i]=a),r[i]):(h=parseFloat(i.charAt(s-1)+i.substr(s+1)),l&&e&&(h=h/100*(wt(e)?e[0]:e).totalDuration()),s>1?o(t,i.substr(0,s-1),e)+h:a+h)):i==null?a:+i},Qi=function(t,i,e){var r=de(i[1]),n=(r?2:1)+(t<2?0:1),a=i[n],s,h;if(r&&(a.duration=i[1]),a.parent=e,t){for(s=a,h=e;h&&!("immediateRender"in s);)s=h.vars.defaults||{},h=Et(h.vars.inherit)&&h.parent;a.immediateRender=Et(s.immediateRender),t<2?a.runBackwards=1:a.startAt=i[n-1]}return new pt(i[0],a,i[n+1])},we=function(t,i){return t||t===0?i(t):i},hr=function(t,i,e){return e<t?t:e>i?i:e},xt=function(t,i){return!yt(t)||!(i=dh.exec(t))?"":i[1]},xh=function(t,i,e){return we(e,function(r){return hr(t,i,r)})},hn=[].slice,Za=function(t,i){return t&&re(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&re(t[0]))&&!t.nodeType&&t!==Qt},wh=function(t,i,e){return e===void 0&&(e=[]),t.forEach(function(r){var n;return yt(r)&&!i||Za(r,1)?(n=e).push.apply(n,Ht(r)):e.push(r)})||e},Ht=function(t,i,e){return ot&&!i&&ot.selector?ot.selector(t):yt(t)&&!e&&(nn||!ri())?hn.call((i||An).querySelectorAll(t),0):wt(t)?wh(t,e):Za(t)?hn.call(t,0):t?[t]:[]},ln=function(t){return t=Ht(t)[0]||er("Invalid scope")||{},function(i){var e=t.current||t.nativeElement||t;return Ht(i,e.querySelectorAll?e:e===t?er("Invalid scope")||An.createElement("div"):t)}},Qa=function(t){return t.sort(function(){return .5-Math.random()})},Ja=function(t){if(dt(t))return t;var i=re(t)?t:{each:t},e=De(i.ease),r=i.from||0,n=parseFloat(i.base)||0,a={},s=r>0&&r<1,h=isNaN(r)||s,l=i.axis,c=r,p=r;return yt(r)?c=p={center:.5,edges:.5,end:1}[r]||0:!s&&h&&(c=r[0],p=r[1]),function(y,_,g){var d=(g||i).length,m=a[d],C,f,u,b,S,T,k,P,w;if(!m){if(w=i.grid==="auto"?0:(i.grid||[1,qt])[1],!w){for(k=-qt;k<(k=g[w++].getBoundingClientRect().left)&&w<d;);w<d&&w--}for(m=a[d]=[],C=h?Math.min(w,d)*c-.5:r%w,f=w===qt?0:h?d*p/w-.5:r/w|0,k=0,P=qt,T=0;T<d;T++)u=T%w-C,b=f-(T/w|0),m[T]=S=l?Math.abs(l==="y"?b:u):La(u*u+b*b),S>k&&(k=S),S<P&&(P=S);r==="random"&&Qa(m),m.max=k-P,m.min=P,m.v=d=(parseFloat(i.amount)||parseFloat(i.each)*(w>d?d-1:l?l==="y"?d/w:w:Math.max(w,d/w))||0)*(r==="edges"?-1:1),m.b=d<0?n-d:n,m.u=xt(i.amount||i.each)||0,e=e&&d<0?lo(e):e}return d=(m[y]-m.min)/m.max||0,mt(m.b+(e?e(d):d)*m.v)+m.u}},cn=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(e){var r=mt(Math.round(parseFloat(e)/t)*t*i);return(r-r%1)/i+(de(e)?0:xt(e))}},to=function(t,i){var e=wt(t),r,n;return!e&&re(t)&&(r=e=t.radius||qt,t.values?(t=Ht(t.values),(n=!de(t[0]))&&(r*=r)):t=cn(t.increment)),we(i,e?dt(t)?function(a){return n=t(a),Math.abs(n-a)<=r?n:a}:function(a){for(var s=parseFloat(n?a.x:a),h=parseFloat(n?a.y:0),l=qt,c=0,p=t.length,y,_;p--;)n?(y=t[p].x-s,_=t[p].y-h,y=y*y+_*_):y=Math.abs(t[p]-s),y<l&&(l=y,c=p);return c=!r||l<=r?t[c]:a,n||c===a||de(a)?c:c+xt(a)}:cn(t))},eo=function(t,i,e,r){return we(wt(t)?!i:e===!0?!!(e=0):!r,function(){return wt(t)?t[~~(Math.random()*t.length)]:(e=e||1e-5)&&(r=e<1?Math.pow(10,(e+"").length-2):1)&&Math.floor(Math.round((t-e/2+Math.random()*(i-t+e*.99))/e)*e*r)/r})},Th=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return function(r){return i.reduce(function(n,a){return a(n)},r)}},Ph=function(t,i){return function(e){return t(parseFloat(e))+(i||xt(e))}},Oh=function(t,i,e){return ro(t,i,0,1,e)},io=function(t,i,e){return we(e,function(r){return t[~~i(r)]})},Ah=function o(t,i,e){var r=i-t;return wt(t)?io(t,o(0,t.length),i):we(e,function(n){return(r+(n-t)%r)%r+t})},Eh=function o(t,i,e){var r=i-t,n=r*2;return wt(t)?io(t,o(0,t.length-1),i):we(e,function(a){return a=(n+(a-t)%n)%n||0,t+(a>r?n-a:a)})},rr=function(t){for(var i=0,e="",r,n,a,s;~(r=t.indexOf("random(",i));)a=t.indexOf(")",r),s=t.charAt(r+7)==="[",n=t.substr(r+7,a-r-7).match(s?Ia:rn),e+=t.substr(i,r-i)+eo(s?n:+n[0],s?0:+n[1],+n[2]||1e-5),i=a+1;return e+t.substr(i,t.length-i)},ro=function(t,i,e,r,n){var a=i-t,s=r-e;return we(n,function(h){return e+((h-t)/a*s||0)})},Rh=function o(t,i,e,r){var n=isNaN(t+i)?0:function(_){return(1-_)*t+_*i};if(!n){var a=yt(t),s={},h,l,c,p,y;if(e===!0&&(r=1)&&(e=null),a)t={p:t},i={p:i};else if(wt(t)&&!wt(i)){for(c=[],p=t.length,y=p-2,l=1;l<p;l++)c.push(o(t[l-1],t[l]));p--,n=function(g){g*=p;var d=Math.min(y,~~g);return c[d](g-d)},e=i}else r||(t=ti(wt(t)?[]:{},t));if(!c){for(h in i)Ln.call(s,t,h,"get",i[h]);n=function(g){return In(g,s)||(a?t.p:t)}}}return we(e,n)},ss=function(t,i,e){var r=t.labels,n=qt,a,s,h;for(a in r)s=r[a]-i,s<0==!!e&&s&&n>(s=Math.abs(s))&&(h=a,n=s);return h},Nt=function(t,i,e){var r=t.vars,n=r[i],a=ot,s=t._ctx,h,l,c;if(n)return h=r[i+"Params"],l=r.callbackScope||t,e&&be.length&&vr(),s&&(ot=s),c=h?n.apply(l,h):n.call(l),ot=a,c},ji=function(t){return Ce(t),t.scrollTrigger&&t.scrollTrigger.kill(!!bt),t.progress()<1&&Nt(t,"onInterrupt"),t},je,no=[],so=function(t){if(t)if(t=!t.name&&t.default||t,On()||t.headless){var i=t.name,e=dt(t),r=i&&!e&&t.init?function(){this._props=[]}:t,n={init:ir,render:In,add:Ln,kill:Yh,modifier:Wh,rawVars:0},a={targetTest:0,get:0,getSetter:Gn,aliases:{},register:0};if(ri(),t!==r){if(Lt[i])return;Bt(r,Bt(br(t,n),a)),ti(r.prototype,ti(n,br(t,a))),Lt[r.prop=i]=r,t.targetTest&&(_r.push(r),Rn[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}Va(i,r),t.register&&t.register(Ft,r,kt)}else no.push(t)},st=255,$i={aqua:[0,st,st],lime:[0,st,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,st],navy:[0,0,128],white:[st,st,st],olive:[128,128,0],yellow:[st,st,0],orange:[st,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[st,0,0],pink:[st,192,203],cyan:[0,st,st],transparent:[st,st,st,0]},Ir=function(t,i,e){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(e-i)*t*6:t<.5?e:t*3<2?i+(e-i)*(2/3-t)*6:i)*st+.5|0},ao=function(t,i,e){var r=t?de(t)?[t>>16,t>>8&st,t&st]:0:$i.black,n,a,s,h,l,c,p,y,_,g;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),$i[t])r=$i[t];else if(t.charAt(0)==="#"){if(t.length<6&&(n=t.charAt(1),a=t.charAt(2),s=t.charAt(3),t="#"+n+n+a+a+s+s+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&st,r&st,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&st,t&st]}else if(t.substr(0,3)==="hsl"){if(r=g=t.match(rn),!i)h=+r[0]%360/360,l=+r[1]/100,c=+r[2]/100,a=c<=.5?c*(l+1):c+l-c*l,n=c*2-a,r.length>3&&(r[3]*=1),r[0]=Ir(h+1/3,n,a),r[1]=Ir(h,n,a),r[2]=Ir(h-1/3,n,a);else if(~t.indexOf("="))return r=t.match(Na),e&&r.length<4&&(r[3]=1),r}else r=t.match(rn)||$i.transparent;r=r.map(Number)}return i&&!g&&(n=r[0]/st,a=r[1]/st,s=r[2]/st,p=Math.max(n,a,s),y=Math.min(n,a,s),c=(p+y)/2,p===y?h=l=0:(_=p-y,l=c>.5?_/(2-p-y):_/(p+y),h=p===n?(a-s)/_+(a<s?6:0):p===a?(s-n)/_+2:(n-a)/_+4,h*=60),r[0]=~~(h+.5),r[1]=~~(l*100+.5),r[2]=~~(c*100+.5)),e&&r.length<4&&(r[3]=1),r},oo=function(t){var i=[],e=[],r=-1;return t.split(Se).forEach(function(n){var a=n.match(Ke)||[];i.push.apply(i,a),e.push(r+=a.length+1)}),i.c=e,i},as=function(t,i,e){var r="",n=(t+r).match(Se),a=i?"hsla(":"rgba(",s=0,h,l,c,p;if(!n)return t;if(n=n.map(function(y){return(y=ao(y,i,1))&&a+(i?y[0]+","+y[1]+"%,"+y[2]+"%,"+y[3]:y.join(","))+")"}),e&&(c=oo(t),h=e.c,h.join(r)!==c.c.join(r)))for(l=t.replace(Se,"1").split(Ke),p=l.length-1;s<p;s++)r+=l[s]+(~h.indexOf(s)?n.shift()||a+"0,0,0,0)":(c.length?c:n.length?n:e).shift());if(!l)for(l=t.split(Se),p=l.length-1;s<p;s++)r+=l[s]+n[s];return r+l[p]},Se=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in $i)o+="|"+t+"\\b";return new RegExp(o+")","gi")}(),kh=/hsl[a]?\(/,ho=function(t){var i=t.join(" "),e;if(Se.lastIndex=0,Se.test(i))return e=kh.test(i),t[1]=as(t[1],e),t[0]=as(t[0],e,oo(t[1])),!0},nr,Dt=function(){var o=Date.now,t=500,i=33,e=o(),r=e,n=1e3/240,a=n,s=[],h,l,c,p,y,_,g=function d(m){var C=o()-r,f=m===!0,u,b,S,T;if((C>t||C<0)&&(e+=C-i),r+=C,S=r-e,u=S-a,(u>0||f)&&(T=++p.frame,y=S-p.time*1e3,p.time=S=S/1e3,a+=u+(u>=n?4:n-u),b=1),f||(h=l(d)),b)for(_=0;_<s.length;_++)s[_](S,y,T,m)};return p={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(m){return y/(1e3/(m||60))},wake:function(){Ba&&(!nn&&On()&&(Qt=nn=window,An=Qt.document||{},It.gsap=Ft,(Qt.gsapVersions||(Qt.gsapVersions=[])).push(Ft.version),Ua(yr||Qt.GreenSockGlobals||!Qt.gsap&&Qt||{}),no.forEach(so)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&p.sleep(),l=c||function(m){return setTimeout(m,a-p.time*1e3+1|0)},nr=1,g(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(h),nr=0,l=ir},lagSmoothing:function(m,C){t=m||1/0,i=Math.min(C||33,t)},fps:function(m){n=1e3/(m||240),a=p.time*1e3+n},add:function(m,C,f){var u=C?function(b,S,T,k){m(b,S,T,k),p.remove(u)}:m;return p.remove(m),s[f?"unshift":"push"](u),ri(),u},remove:function(m,C){~(C=s.indexOf(m))&&s.splice(C,1)&&_>=C&&_--},_listeners:s},p}(),ri=function(){return!nr&&Dt.wake()},tt={},Mh=/^[\d.\-M][\d.\-,\s]/,Fh=/["']/g,Lh=function(t){for(var i={},e=t.substr(1,t.length-3).split(":"),r=e[0],n=1,a=e.length,s,h,l;n<a;n++)h=e[n],s=n!==a-1?h.lastIndexOf(","):h.length,l=h.substr(0,s),i[r]=isNaN(l)?l.replace(Fh,"").trim():+l,r=h.substr(s+1).trim();return i},Dh=function(t){var i=t.indexOf("(")+1,e=t.indexOf(")"),r=t.indexOf("(",i);return t.substring(i,~r&&r<e?t.indexOf(")",e+1):e)},Nh=function(t){var i=(t+"").split("("),e=tt[i[0]];return e&&i.length>1&&e.config?e.config.apply(null,~t.indexOf("{")?[Lh(i[1])]:Dh(t).split(",").map(Wa)):tt._CE&&Mh.test(t)?tt._CE("",t):e},lo=function(t){return function(i){return 1-t(1-i)}},co=function o(t,i){for(var e=t._first,r;e;)e instanceof Tt?o(e,i):e.vars.yoyoEase&&(!e._yoyo||!e._repeat)&&e._yoyo!==i&&(e.timeline?o(e.timeline,i):(r=e._ease,e._ease=e._yEase,e._yEase=r,e._yoyo=i)),e=e._next},De=function(t,i){return t&&(dt(t)?t:tt[t]||Nh(t))||i},ze=function(t,i,e,r){e===void 0&&(e=function(h){return 1-i(1-h)}),r===void 0&&(r=function(h){return h<.5?i(h*2)/2:1-i((1-h)*2)/2});var n={easeIn:i,easeOut:e,easeInOut:r},a;return Rt(t,function(s){tt[s]=It[s]=n,tt[a=s.toLowerCase()]=e;for(var h in n)tt[a+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=tt[s+"."+h]=n[h]}),n},uo=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},Br=function o(t,i,e){var r=i>=1?i:1,n=(e||(t?.3:.45))/(i<1?i:1),a=n/en*(Math.asin(1/r)||0),s=function(c){return c===1?1:r*Math.pow(2,-10*c)*ch((c-a)*n)+1},h=t==="out"?s:t==="in"?function(l){return 1-s(1-l)}:uo(s);return n=en/n,h.config=function(l,c){return o(t,l,c)},h},Ur=function o(t,i){i===void 0&&(i=1.70158);var e=function(a){return a?--a*a*((i+1)*a+i)+1:0},r=t==="out"?e:t==="in"?function(n){return 1-e(1-n)}:uo(e);return r.config=function(n){return o(t,n)},r};Rt("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,t){var i=t<5?t+1:t;ze(o+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},function(e){return 1-Math.pow(1-e,i)},function(e){return e<.5?Math.pow(e*2,i)/2:1-Math.pow((1-e)*2,i)/2})});tt.Linear.easeNone=tt.none=tt.Linear.easeIn;ze("Elastic",Br("in"),Br("out"),Br());(function(o,t){var i=1/t,e=2*i,r=2.5*i,n=function(s){return s<i?o*s*s:s<e?o*Math.pow(s-1.5/t,2)+.75:s<r?o*(s-=2.25/t)*s+.9375:o*Math.pow(s-2.625/t,2)+.984375};ze("Bounce",function(a){return 1-n(1-a)},n)})(7.5625,2.75);ze("Expo",function(o){return Math.pow(2,10*(o-1))*o+o*o*o*o*o*o*(1-o)});ze("Circ",function(o){return-(La(1-o*o)-1)});ze("Sine",function(o){return o===1?1:-lh(o*oh)+1});ze("Back",Ur("in"),Ur("out"),Ur());tt.SteppedEase=tt.steps=It.SteppedEase={config:function(t,i){t===void 0&&(t=1);var e=1/t,r=t+(i?0:1),n=i?1:0,a=1-at;return function(s){return((r*hr(0,a,s)|0)+n)*e}}};Je.ease=tt["quad.out"];Rt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return kn+=o+","+o+"Params,"});var fo=function(t,i){this.id=hh++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:qa,this.set=i?i.getSetter:Gn},sr=function(){function o(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,ii(this,+i.duration,1,1),this.data=i.data,ot&&(this._ctx=ot,ot.data.push(this)),nr||Dt.wake()}var t=o.prototype;return t.delay=function(e){return e||e===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,ii(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,r){if(ri(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ar(this,e),!n._dp||n.parent||Ka(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Jt(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===at||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Ha(this,e,r)),this},t.time=function(e,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+rs(this))%(this._dur+this._rDelay)||(e?this._dur:0),r):this._time},t.totalProgress=function(e,r){return arguments.length?this.totalTime(this.totalDuration()*e,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-e:e)+rs(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,r){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,r):this._repeat?ei(this._tTime,n)+1:1},t.timeScale=function(e,r){if(!arguments.length)return this._rts===-at?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?Sr(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||e===-at?0:this._rts,this.totalTime(hr(-Math.abs(this._delay),this.totalDuration(),n),r!==!1),Or(this),mh(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ri(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==at&&(this._tTime-=at)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Jt(r,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Et(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var r=this.parent||this._dp;return r?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Sr(r.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){e===void 0&&(e=fh);var r=bt;return bt=e,Fn(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),this.data!=="nested"&&e.kill!==!1&&this.kill(),bt=r,this},t.globalTime=function(e){for(var r=this,n=arguments.length?e:r.rawTime();r;)n=r._start+n/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ns(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var r=this._time;return this._rDelay=e,ns(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,r){return this.totalTime(zt(this,e),Et(r))},t.restart=function(e,r){return this.play().totalTime(e?-this._delay:0,Et(r)),this._dur||(this._zTime=-at),this},t.play=function(e,r){return e!=null&&this.seek(e,r),this.reversed(!1).paused(!1)},t.reverse=function(e,r){return e!=null&&this.seek(e||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(e,r){return e!=null&&this.seek(e,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-at:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-at,this},t.isActive=function(){var e=this.parent||this._dp,r=this._start,n;return!!(!e||this._ts&&this._initted&&e.isActive()&&(n=e.rawTime(!0))>=r&&n<this.endTime(!0)-at)},t.eventCallback=function(e,r,n){var a=this.vars;return arguments.length>1?(r?(a[e]=r,n&&(a[e+"Params"]=n),e==="onUpdate"&&(this._onUpdate=r)):delete a[e],this):a[e]},t.then=function(e){var r=this;return new Promise(function(n){var a=dt(e)?e:Ya,s=function(){var l=r.then;r.then=null,dt(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=l),n(a),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?s():r._prom=s})},t.kill=function(){ji(this)},o}();Bt(sr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-at,_prom:0,_ps:!1,_rts:1});var Tt=function(o){Fa(t,o);function t(e,r){var n;return e===void 0&&(e={}),n=o.call(this,e)||this,n.labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=Et(e.sortChildren),ht&&Jt(e.parent||ht,he(n),r),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&ja(he(n),e.scrollTrigger),n}var i=t.prototype;return i.to=function(r,n,a){return Qi(0,arguments,this),this},i.from=function(r,n,a){return Qi(1,arguments,this),this},i.fromTo=function(r,n,a,s){return Qi(2,arguments,this),this},i.set=function(r,n,a){return n.duration=0,n.parent=this,Zi(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new pt(r,n,zt(this,a),1),this},i.call=function(r,n,a){return Jt(this,pt.delayedCall(0,r,n),a)},i.staggerTo=function(r,n,a,s,h,l,c){return a.duration=n,a.stagger=a.stagger||s,a.onComplete=l,a.onCompleteParams=c,a.parent=this,new pt(r,a,zt(this,h)),this},i.staggerFrom=function(r,n,a,s,h,l,c){return a.runBackwards=1,Zi(a).immediateRender=Et(a.immediateRender),this.staggerTo(r,n,a,s,h,l,c)},i.staggerFromTo=function(r,n,a,s,h,l,c,p){return s.startAt=a,Zi(s).immediateRender=Et(s.immediateRender),this.staggerTo(r,n,s,h,l,c,p)},i.render=function(r,n,a){var s=this._time,h=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=r<=0?0:mt(r),p=this._zTime<0!=r<0&&(this._initted||!l),y,_,g,d,m,C,f,u,b,S,T,k;if(this!==ht&&c>h&&r>=0&&(c=h),c!==this._tTime||a||p){if(s!==this._time&&l&&(c+=this._time-s,r+=this._time-s),y=c,b=this._start,u=this._ts,C=!u,p&&(l||(s=this._zTime),(r||!n)&&(this._zTime=r)),this._repeat){if(T=this._yoyo,m=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(m*100+r,n,a);if(y=mt(c%m),c===h?(d=this._repeat,y=l):(S=mt(c/m),d=~~S,d&&d===S&&(y=l,d--),y>l&&(y=l)),S=ei(this._tTime,m),!s&&this._tTime&&S!==d&&this._tTime-S*m-this._dur<=0&&(S=d),T&&d&1&&(y=l-y,k=1),d!==S&&!this._lock){var P=T&&S&1,w=P===(T&&d&1);if(d<S&&(P=!P),s=P?0:c%l?l:c,this._lock=1,this.render(s||(k?0:mt(d*m)),n,!l)._lock=0,this._tTime=c,!n&&this.parent&&Nt(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1),s&&s!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,h=this._tDur,w&&(this._lock=2,s=P?l:-1e-4,this.render(s,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;co(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(f=Sh(this,mt(s),mt(y)),f&&(c-=y-(y=f._start))),this._tTime=c,this._time=y,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,s=0),!s&&c&&!n&&!S&&(Nt(this,"onStart"),this._tTime!==c))return this;if(y>=s&&r>=0)for(_=this._first;_;){if(g=_._next,(_._act||y>=_._start)&&_._ts&&f!==_){if(_.parent!==this)return this.render(r,n,a);if(_.render(_._ts>0?(y-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(y-_._start)*_._ts,n,a),y!==this._time||!this._ts&&!C){f=0,g&&(c+=this._zTime=-at);break}}_=g}else{_=this._last;for(var O=r<0?r:y;_;){if(g=_._prev,(_._act||O<=_._end)&&_._ts&&f!==_){if(_.parent!==this)return this.render(r,n,a);if(_.render(_._ts>0?(O-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(O-_._start)*_._ts,n,a||bt&&Fn(_)),y!==this._time||!this._ts&&!C){f=0,g&&(c+=this._zTime=O?-at:at);break}}_=g}}if(f&&!n&&(this.pause(),f.render(y>=s?0:-at)._zTime=y>=s?1:-1,this._ts))return this._start=b,Or(this),this.render(r,n,a);this._onUpdate&&!n&&Nt(this,"onUpdate",!0),(c===h&&this._tTime>=this.totalDuration()||!c&&s)&&(b===this._start||Math.abs(u)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(c===h&&this._ts>0||!c&&this._ts<0)&&Ce(this,1),!n&&!(r<0&&!s)&&(c||s||!h)&&(Nt(this,c===h&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<h&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(r,n){var a=this;if(de(n)||(n=zt(this,n,r)),!(r instanceof sr)){if(wt(r))return r.forEach(function(s){return a.add(s,n)}),this;if(yt(r))return this.addLabel(r,n);if(dt(r))r=pt.delayedCall(0,r);else return this}return this!==r?Jt(this,r,n):this},i.getChildren=function(r,n,a,s){r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),s===void 0&&(s=-qt);for(var h=[],l=this._first;l;)l._start>=s&&(l instanceof pt?n&&h.push(l):(a&&h.push(l),r&&h.push.apply(h,l.getChildren(!0,n,a)))),l=l._next;return h},i.getById=function(r){for(var n=this.getChildren(1,1,1),a=n.length;a--;)if(n[a].vars.id===r)return n[a]},i.remove=function(r){return yt(r)?this.removeLabel(r):dt(r)?this.killTweensOf(r):(r.parent===this&&Pr(this,r),r===this._recent&&(this._recent=this._last),Le(this))},i.totalTime=function(r,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=mt(Dt.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),o.prototype.totalTime.call(this,r,n),this._forcing=0,this):this._tTime},i.addLabel=function(r,n){return this.labels[r]=zt(this,n),this},i.removeLabel=function(r){return delete this.labels[r],this},i.addPause=function(r,n,a){var s=pt.delayedCall(0,n||ir,a);return s.data="isPause",this._hasPause=1,Jt(this,s,zt(this,r))},i.removePause=function(r){var n=this._first;for(r=zt(this,r);n;)n._start===r&&n.data==="isPause"&&Ce(n),n=n._next},i.killTweensOf=function(r,n,a){for(var s=this.getTweensOf(r,a),h=s.length;h--;)me!==s[h]&&s[h].kill(r,n);return this},i.getTweensOf=function(r,n){for(var a=[],s=Ht(r),h=this._first,l=de(n),c;h;)h instanceof pt?gh(h._targets,s)&&(l?(!me||h._initted&&h._ts)&&h.globalTime(0)<=n&&h.globalTime(h.totalDuration())>n:!n||h.isActive())&&a.push(h):(c=h.getTweensOf(s,n)).length&&a.push.apply(a,c),h=h._next;return a},i.tweenTo=function(r,n){n=n||{};var a=this,s=zt(a,r),h=n,l=h.startAt,c=h.onStart,p=h.onStartParams,y=h.immediateRender,_,g=pt.to(a,Bt({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:s,overwrite:"auto",duration:n.duration||Math.abs((s-(l&&"time"in l?l.time:a._time))/a.timeScale())||at,onStart:function(){if(a.pause(),!_){var m=n.duration||Math.abs((s-(l&&"time"in l?l.time:a._time))/a.timeScale());g._dur!==m&&ii(g,m,0,1).render(g._time,!0,!0),_=1}c&&c.apply(g,p||[])}},n));return y?g.render(0):g},i.tweenFromTo=function(r,n,a){return this.tweenTo(n,Bt({startAt:{time:zt(this,r)}},a))},i.recent=function(){return this._recent},i.nextLabel=function(r){return r===void 0&&(r=this._time),ss(this,zt(this,r))},i.previousLabel=function(r){return r===void 0&&(r=this._time),ss(this,zt(this,r),1)},i.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+at)},i.shiftChildren=function(r,n,a){a===void 0&&(a=0);for(var s=this._first,h=this.labels,l;s;)s._start>=a&&(s._start+=r,s._end+=r),s=s._next;if(n)for(l in h)h[l]>=a&&(h[l]+=r);return Le(this)},i.invalidate=function(r){var n=this._first;for(this._lock=0;n;)n.invalidate(r),n=n._next;return o.prototype.invalidate.call(this,r)},i.clear=function(r){r===void 0&&(r=!0);for(var n=this._first,a;n;)a=n._next,this.remove(n),n=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Le(this)},i.totalDuration=function(r){var n=0,a=this,s=a._last,h=qt,l,c,p;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(p=a.parent;s;)l=s._prev,s._dirty&&s.totalDuration(),c=s._start,c>h&&a._sort&&s._ts&&!a._lock?(a._lock=1,Jt(a,s,c-s._delay,1)._lock=0):h=c,c<0&&s._ts&&(n-=c,(!p&&!a._dp||p&&p.smoothChildTiming)&&(a._start+=c/a._ts,a._time-=c,a._tTime-=c),a.shiftChildren(-c,!1,-1/0),h=0),s._end>n&&s._ts&&(n=s._end),s=l;ii(a,a===ht&&a._time>n?a._time:n,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(r){if(ht._ts&&(Ha(ht,Sr(r,ht)),za=Dt.frame),Dt.frame>=es){es+=Gt.autoSleep||120;var n=ht._first;if((!n||!n._ts)&&Gt.autoSleep&&Dt._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||Dt.sleep()}}},t}(sr);Bt(Tt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Gh=function(t,i,e,r,n,a,s){var h=new kt(this._pt,t,i,0,1,vo,null,n),l=0,c=0,p,y,_,g,d,m,C,f;for(h.b=e,h.e=r,e+="",r+="",(C=~r.indexOf("random("))&&(r=rr(r)),a&&(f=[e,r],a(f,t,i),e=f[0],r=f[1]),y=e.match(Nr)||[];p=Nr.exec(r);)g=p[0],d=r.substring(l,p.index),_?_=(_+1)%5:d.substr(-5)==="rgba("&&(_=1),g!==y[c++]&&(m=parseFloat(y[c-1])||0,h._pt={_next:h._pt,p:d||c===1?d:",",s:m,c:g.charAt(1)==="="?$e(m,g)-m:parseFloat(g)-m,m:_&&_<4?Math.round:0},l=Nr.lastIndex);return h.c=l<r.length?r.substring(l,r.length):"",h.fp=s,(Ga.test(r)||C)&&(h.e=0),this._pt=h,h},Ln=function(t,i,e,r,n,a,s,h,l,c){dt(r)&&(r=r(n||0,t,a));var p=t[i],y=e!=="get"?e:dt(p)?l?t[i.indexOf("set")||!dt(t["get"+i.substr(3)])?i:"get"+i.substr(3)](l):t[i]():p,_=dt(p)?l?zh:mo:Nn,g;if(yt(r)&&(~r.indexOf("random(")&&(r=rr(r)),r.charAt(1)==="="&&(g=$e(y,r)+(xt(y)||0),(g||g===0)&&(r=g))),!c||y!==r||dn)return!isNaN(y*r)&&r!==""?(g=new kt(this._pt,t,i,+y||0,r-(y||0),typeof p=="boolean"?Hh:yo,0,_),l&&(g.fp=l),s&&g.modifier(s,this,t),this._pt=g):(!p&&!(i in t)&&En(i,r),Gh.call(this,t,i,y,r,_,h||Gt.stringFilter,l))},Ih=function(t,i,e,r,n){if(dt(t)&&(t=Ji(t,n,i,e,r)),!re(t)||t.style&&t.nodeType||wt(t)||Da(t))return yt(t)?Ji(t,n,i,e,r):t;var a={},s;for(s in t)a[s]=Ji(t[s],n,i,e,r);return a},go=function(t,i,e,r,n,a){var s,h,l,c;if(Lt[t]&&(s=new Lt[t]).init(n,s.rawVars?i[t]:Ih(i[t],r,n,a,e),e,r,a)!==!1&&(e._pt=h=new kt(e._pt,n,t,0,1,s.render,s,0,s.priority),e!==je))for(l=e._ptLookup[e._targets.indexOf(n)],c=s._props.length;c--;)l[s._props[c]]=h;return s},me,dn,Dn=function o(t,i,e){var r=t.vars,n=r.ease,a=r.startAt,s=r.immediateRender,h=r.lazy,l=r.onUpdate,c=r.runBackwards,p=r.yoyoEase,y=r.keyframes,_=r.autoRevert,g=t._dur,d=t._startAt,m=t._targets,C=t.parent,f=C&&C.data==="nested"?C.vars.targets:m,u=t._overwrite==="auto"&&!Tn,b=t.timeline,S,T,k,P,w,O,E,L,v,A,x,R,M;if(b&&(!y||!n)&&(n="none"),t._ease=De(n,Je.ease),t._yEase=p?lo(De(p===!0?n:p,Je.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!b&&!!r.runBackwards,!b||y&&!r.stagger){if(L=m[0]?Fe(m[0]).harness:0,R=L&&r[L.prop],S=br(r,Rn),d&&(d._zTime<0&&d.progress(1),i<0&&c&&s&&!_?d.render(-1,!0):d.revert(c&&g?gr:uh),d._lazy=0),a){if(Ce(t._startAt=pt.set(m,Bt({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!d&&Et(h),startAt:null,delay:0,onUpdate:l&&function(){return Nt(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(bt||!s&&!_)&&t._startAt.revert(gr),s&&g&&i<=0&&e<=0){i&&(t._zTime=i);return}}else if(c&&g&&!d){if(i&&(s=!1),k=Bt({overwrite:!1,data:"isFromStart",lazy:s&&!d&&Et(h),immediateRender:s,stagger:0,parent:C},S),R&&(k[L.prop]=R),Ce(t._startAt=pt.set(m,k)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(bt?t._startAt.revert(gr):t._startAt.render(-1,!0)),t._zTime=i,!s)o(t._startAt,at,at);else if(!i)return}for(t._pt=t._ptCache=0,h=g&&Et(h)||h&&!g,T=0;T<m.length;T++){if(w=m[T],E=w._gsap||Mn(m)[T]._gsap,t._ptLookup[T]=A={},sn[E.id]&&be.length&&vr(),x=f===m?T:f.indexOf(w),L&&(v=new L).init(w,R||S,t,x,f)!==!1&&(t._pt=P=new kt(t._pt,w,v.name,0,1,v.render,v,0,v.priority),v._props.forEach(function(D){A[D]=P}),v.priority&&(O=1)),!L||R)for(k in S)Lt[k]&&(v=go(k,S,t,x,w,f))?v.priority&&(O=1):A[k]=P=Ln.call(t,w,k,"get",S[k],x,f,0,r.stringFilter);t._op&&t._op[T]&&t.kill(w,t._op[T]),u&&t._pt&&(me=t,ht.killTweensOf(w,A,t.globalTime(i)),M=!t.parent,me=0),t._pt&&h&&(sn[E.id]=1)}O&&bo(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!M,y&&i<=0&&b.render(qt,!0,!0)},Bh=function(t,i,e,r,n,a,s,h){var l=(t._pt&&t._ptCache||(t._ptCache={}))[i],c,p,y,_;if(!l)for(l=t._ptCache[i]=[],y=t._ptLookup,_=t._targets.length;_--;){if(c=y[_][i],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==i&&c.fp!==i;)c=c._next;if(!c)return dn=1,t.vars[i]="+=0",Dn(t,s),dn=0,h?er(i+" not eligible for reset"):1;l.push(c)}for(_=l.length;_--;)p=l[_],c=p._pt||p,c.s=(r||r===0)&&!n?r:c.s+(r||0)+a*c.c,c.c=e-c.s,p.e&&(p.e=gt(e)+xt(p.e)),p.b&&(p.b=c.s+xt(p.b))},Uh=function(t,i){var e=t[0]?Fe(t[0]).harness:0,r=e&&e.aliases,n,a,s,h;if(!r)return i;n=ti({},i);for(a in r)if(a in n)for(h=r[a].split(","),s=h.length;s--;)n[h[s]]=n[a];return n},Vh=function(t,i,e,r){var n=i.ease||r||"power1.inOut",a,s;if(wt(i))s=e[t]||(e[t]=[]),i.forEach(function(h,l){return s.push({t:l/(i.length-1)*100,v:h,e:n})});else for(a in i)s=e[a]||(e[a]=[]),a==="ease"||s.push({t:parseFloat(t),v:i[a],e:n})},Ji=function(t,i,e,r,n){return dt(t)?t.call(i,e,r,n):yt(t)&&~t.indexOf("random(")?rr(t):t},_o=kn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",po={};Rt(_o+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return po[o]=1});var pt=function(o){Fa(t,o);function t(e,r,n,a){var s;typeof r=="number"&&(n.duration=r,r=n,n=null),s=o.call(this,a?r:Zi(r))||this;var h=s.vars,l=h.duration,c=h.delay,p=h.immediateRender,y=h.stagger,_=h.overwrite,g=h.keyframes,d=h.defaults,m=h.scrollTrigger,C=h.yoyoEase,f=r.parent||ht,u=(wt(e)||Da(e)?de(e[0]):"length"in r)?[e]:Ht(e),b,S,T,k,P,w,O,E;if(s._targets=u.length?Mn(u):er("GSAP target "+e+" not found. https://gsap.com",!Gt.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=_,g||y||fr(l)||fr(c)){if(r=s.vars,b=s.timeline=new Tt({data:"nested",defaults:d||{},targets:f&&f.data==="nested"?f.vars.targets:u}),b.kill(),b.parent=b._dp=he(s),b._start=0,y||fr(l)||fr(c)){if(k=u.length,O=y&&Ja(y),re(y))for(P in y)~_o.indexOf(P)&&(E||(E={}),E[P]=y[P]);for(S=0;S<k;S++)T=br(r,po),T.stagger=0,C&&(T.yoyoEase=C),E&&ti(T,E),w=u[S],T.duration=+Ji(l,he(s),S,w,u),T.delay=(+Ji(c,he(s),S,w,u)||0)-s._delay,!y&&k===1&&T.delay&&(s._delay=c=T.delay,s._start+=c,T.delay=0),b.to(w,T,O?O(S,w,u):0),b._ease=tt.none;b.duration()?l=c=0:s.timeline=0}else if(g){Zi(Bt(b.vars.defaults,{ease:"none"})),b._ease=De(g.ease||r.ease||"none");var L=0,v,A,x;if(wt(g))g.forEach(function(R){return b.to(u,R,">")}),b.duration();else{T={};for(P in g)P==="ease"||P==="easeEach"||Vh(P,g[P],T,g.easeEach);for(P in T)for(v=T[P].sort(function(R,M){return R.t-M.t}),L=0,S=0;S<v.length;S++)A=v[S],x={ease:A.e,duration:(A.t-(S?v[S-1].t:0))/100*l},x[P]=A.v,b.to(u,x,L),L+=x.duration;b.duration()<l&&b.to({},{duration:l-b.duration()})}}l||s.duration(l=b.duration())}else s.timeline=0;return _===!0&&!Tn&&(me=he(s),ht.killTweensOf(u),me=0),Jt(f,he(s),n),r.reversed&&s.reverse(),r.paused&&s.paused(!0),(p||!l&&!g&&s._start===mt(f._time)&&Et(p)&&yh(he(s))&&f.data!=="nested")&&(s._tTime=-at,s.render(Math.max(0,-c)||0)),m&&ja(he(s),m),s}var i=t.prototype;return i.render=function(r,n,a){var s=this._time,h=this._tDur,l=this._dur,c=r<0,p=r>h-at&&!c?h:r<at?0:r,y,_,g,d,m,C,f,u,b;if(!l)bh(this,r,n,a);else if(p!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(y=p,u=this.timeline,this._repeat){if(d=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(d*100+r,n,a);if(y=mt(p%d),p===h?(g=this._repeat,y=l):(m=mt(p/d),g=~~m,g&&g===m?(y=l,g--):y>l&&(y=l)),C=this._yoyo&&g&1,C&&(b=this._yEase,y=l-y),m=ei(this._tTime,d),y===s&&!a&&this._initted&&g===m)return this._tTime=p,this;g!==m&&(u&&this._yEase&&co(u,C),this.vars.repeatRefresh&&!C&&!this._lock&&y!==d&&this._initted&&(this._lock=a=1,this.render(mt(d*g),!0).invalidate()._lock=0))}if(!this._initted){if($a(this,c?r:y,a,n,p))return this._tTime=0,this;if(s!==this._time&&!(a&&this.vars.repeatRefresh&&g!==m))return this;if(l!==this._dur)return this.render(r,n,a)}if(this._tTime=p,this._time=y,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=f=(b||this._ease)(y/l),this._from&&(this.ratio=f=1-f),!s&&p&&!n&&!m&&(Nt(this,"onStart"),this._tTime!==p))return this;for(_=this._pt;_;)_.r(f,_.d),_=_._next;u&&u.render(r<0?r:u._dur*u._ease(y/this._dur),n,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!n&&(c&&an(this,r,n,a),Nt(this,"onUpdate")),this._repeat&&g!==m&&this.vars.onRepeat&&!n&&this.parent&&Nt(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(c&&!this._onUpdate&&an(this,r,!0,!0),(r||!l)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Ce(this,1),!n&&!(c&&!s)&&(p||s||C)&&(Nt(this,p===h?"onComplete":"onReverseComplete",!0),this._prom&&!(p<h&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),o.prototype.invalidate.call(this,r)},i.resetTo=function(r,n,a,s,h){nr||Dt.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Dn(this,l),c=this._ease(l/this._dur),Bh(this,r,n,a,s,c,l,h)?this.resetTo(r,n,a,s,1):(Ar(this,0),this.parent||Xa(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(r,n){if(n===void 0&&(n="all"),!r&&(!n||n==="all"))return this._lazy=this._pt=0,this.parent?ji(this):this.scrollTrigger&&this.scrollTrigger.kill(!!bt),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,n,me&&me.vars.overwrite!==!0)._first||ji(this),this.parent&&a!==this.timeline.totalDuration()&&ii(this,this._dur*this.timeline._tDur/a,0,1),this}var s=this._targets,h=r?Ht(r):s,l=this._ptLookup,c=this._pt,p,y,_,g,d,m,C;if((!n||n==="all")&&ph(s,h))return n==="all"&&(this._pt=0),ji(this);for(p=this._op=this._op||[],n!=="all"&&(yt(n)&&(d={},Rt(n,function(f){return d[f]=1}),n=d),n=Uh(s,n)),C=s.length;C--;)if(~h.indexOf(s[C])){y=l[C],n==="all"?(p[C]=n,g=y,_={}):(_=p[C]=p[C]||{},g=n);for(d in g)m=y&&y[d],m&&((!("kill"in m.d)||m.d.kill(d)===!0)&&Pr(this,m,"_pt"),delete y[d]),_!=="all"&&(_[d]=1)}return this._initted&&!this._pt&&c&&ji(this),this},t.to=function(r,n){return new t(r,n,arguments[2])},t.from=function(r,n){return Qi(1,arguments)},t.delayedCall=function(r,n,a,s){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:n,onReverseComplete:n,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:s})},t.fromTo=function(r,n,a){return Qi(2,arguments)},t.set=function(r,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(r,n)},t.killTweensOf=function(r,n,a){return ht.killTweensOf(r,n,a)},t}(sr);Bt(pt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Rt("staggerTo,staggerFrom,staggerFromTo",function(o){pt[o]=function(){var t=new Tt,i=hn.call(arguments,0);return i.splice(o==="staggerFromTo"?5:4,0,0),t[o].apply(t,i)}});var Nn=function(t,i,e){return t[i]=e},mo=function(t,i,e){return t[i](e)},zh=function(t,i,e,r){return t[i](r.fp,e)},qh=function(t,i,e){return t.setAttribute(i,e)},Gn=function(t,i){return dt(t[i])?mo:Pn(t[i])&&t.setAttribute?qh:Nn},yo=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},Hh=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},vo=function(t,i){var e=i._pt,r="";if(!t&&i.b)r=i.b;else if(t===1&&i.e)r=i.e;else{for(;e;)r=e.p+(e.m?e.m(e.s+e.c*t):Math.round((e.s+e.c*t)*1e4)/1e4)+r,e=e._next;r+=i.c}i.set(i.t,i.p,r,i)},In=function(t,i){for(var e=i._pt;e;)e.r(t,e.d),e=e._next},Wh=function(t,i,e,r){for(var n=this._pt,a;n;)a=n._next,n.p===r&&n.modifier(t,i,e),n=a},Yh=function(t){for(var i=this._pt,e,r;i;)r=i._next,i.p===t&&!i.op||i.op===t?Pr(this,i,"_pt"):i.dep||(e=1),i=r;return!e},Xh=function(t,i,e,r){r.mSet(t,i,r.m.call(r.tween,e,r.mt),r)},bo=function(t){for(var i=t._pt,e,r,n,a;i;){for(e=i._next,r=n;r&&r.pr>i.pr;)r=r._next;(i._prev=r?r._prev:a)?i._prev._next=i:n=i,(i._next=r)?r._prev=i:a=i,i=e}t._pt=n},kt=function(){function o(i,e,r,n,a,s,h,l,c){this.t=e,this.s=n,this.c=a,this.p=r,this.r=s||yo,this.d=h||this,this.set=l||Nn,this.pr=c||0,this._next=i,i&&(i._prev=this)}var t=o.prototype;return t.modifier=function(e,r,n){this.mSet=this.mSet||this.set,this.set=Xh,this.m=e,this.mt=n,this.tween=r},o}();Rt(kn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return Rn[o]=1});It.TweenMax=It.TweenLite=pt;It.TimelineLite=It.TimelineMax=Tt;ht=new Tt({sortChildren:!1,defaults:Je,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Gt.stringFilter=ho;var Ne=[],pr={},Kh=[],os=0,jh=0,Vr=function(t){return(pr[t]||Kh).map(function(i){return i()})},un=function(){var t=Date.now(),i=[];t-os>2&&(Vr("matchMediaInit"),Ne.forEach(function(e){var r=e.queries,n=e.conditions,a,s,h,l;for(s in r)a=Qt.matchMedia(r[s]).matches,a&&(h=1),a!==n[s]&&(n[s]=a,l=1);l&&(e.revert(),h&&i.push(e))}),Vr("matchMediaRevert"),i.forEach(function(e){return e.onMatch(e,function(r){return e.add(null,r)})}),os=t,Vr("matchMedia"))},So=function(){function o(i,e){this.selector=e&&ln(e),this.data=[],this._r=[],this.isReverted=!1,this.id=jh++,i&&this.add(i)}var t=o.prototype;return t.add=function(e,r,n){dt(e)&&(n=r,r=e,e=dt);var a=this,s=function(){var l=ot,c=a.selector,p;return l&&l!==a&&l.data.push(a),n&&(a.selector=ln(n)),ot=a,p=r.apply(a,arguments),dt(p)&&a._r.push(p),ot=l,a.selector=c,a.isReverted=!1,p};return a.last=s,e===dt?s(a,function(h){return a.add(null,h)}):e?a[e]=s:s},t.ignore=function(e){var r=ot;ot=null,e(this),ot=r},t.getTweens=function(){var e=[];return this.data.forEach(function(r){return r instanceof o?e.push.apply(e,r.getTweens()):r instanceof pt&&!(r.parent&&r.parent.data==="nested")&&e.push(r)}),e},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,r){var n=this;if(e?function(){for(var s=n.getTweens(),h=n.data.length,l;h--;)l=n.data[h],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return s.splice(s.indexOf(c),1)}));for(s.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,p){return p.g-c.g||-1/0}).forEach(function(c){return c.t.revert(e)}),h=n.data.length;h--;)l=n.data[h],l instanceof Tt?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof pt)&&l.revert&&l.revert(e);n._r.forEach(function(c){return c(e,n)}),n.isReverted=!0}():this.data.forEach(function(s){return s.kill&&s.kill()}),this.clear(),r)for(var a=Ne.length;a--;)Ne[a].id===this.id&&Ne.splice(a,1)},t.revert=function(e){this.kill(e||{})},o}(),$h=function(){function o(i){this.contexts=[],this.scope=i,ot&&ot.data.push(this)}var t=o.prototype;return t.add=function(e,r,n){re(e)||(e={matches:e});var a=new So(0,n||this.scope),s=a.conditions={},h,l,c;ot&&!a.selector&&(a.selector=ot.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=e;for(l in e)l==="all"?c=1:(h=Qt.matchMedia(e[l]),h&&(Ne.indexOf(a)<0&&Ne.push(a),(s[l]=h.matches)&&(c=1),h.addListener?h.addListener(un):h.addEventListener("change",un)));return c&&r(a,function(p){return a.add(null,p)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(r){return r.kill(e,!0)})},o}(),Cr={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];i.forEach(function(r){return so(r)})},timeline:function(t){return new Tt(t)},getTweensOf:function(t,i){return ht.getTweensOf(t,i)},getProperty:function(t,i,e,r){yt(t)&&(t=Ht(t)[0]);var n=Fe(t||{}).get,a=e?Ya:Wa;return e==="native"&&(e=""),t&&(i?a((Lt[i]&&Lt[i].get||n)(t,i,e,r)):function(s,h,l){return a((Lt[s]&&Lt[s].get||n)(t,s,h,l))})},quickSetter:function(t,i,e){if(t=Ht(t),t.length>1){var r=t.map(function(c){return Ft.quickSetter(c,i,e)}),n=r.length;return function(c){for(var p=n;p--;)r[p](c)}}t=t[0]||{};var a=Lt[i],s=Fe(t),h=s.harness&&(s.harness.aliases||{})[i]||i,l=a?function(c){var p=new a;je._pt=0,p.init(t,e?c+e:c,je,0,[t]),p.render(1,p),je._pt&&In(1,je)}:s.set(t,h);return a?l:function(c){return l(t,h,e?c+e:c,s,1)}},quickTo:function(t,i,e){var r,n=Ft.to(t,Bt((r={},r[i]="+=0.1",r.paused=!0,r.stagger=0,r),e||{})),a=function(h,l,c){return n.resetTo(i,h,l,c)};return a.tween=n,a},isTweening:function(t){return ht.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=De(t.ease,Je.ease)),is(Je,t||{})},config:function(t){return is(Gt,t||{})},registerEffect:function(t){var i=t.name,e=t.effect,r=t.plugins,n=t.defaults,a=t.extendTimeline;(r||"").split(",").forEach(function(s){return s&&!Lt[s]&&!It[s]&&er(i+" effect requires "+s+" plugin.")}),Gr[i]=function(s,h,l){return e(Ht(s),Bt(h||{},n),l)},a&&(Tt.prototype[i]=function(s,h,l){return this.add(Gr[i](s,re(h)?h:(l=h)&&{},this),l)})},registerEase:function(t,i){tt[t]=De(i)},parseEase:function(t,i){return arguments.length?De(t,i):tt},getById:function(t){return ht.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var e=new Tt(t),r,n;for(e.smoothChildTiming=Et(t.smoothChildTiming),ht.remove(e),e._dp=0,e._time=e._tTime=ht._time,r=ht._first;r;)n=r._next,(i||!(!r._dur&&r instanceof pt&&r.vars.onComplete===r._targets[0]))&&Jt(e,r,r._start-r._delay),r=n;return Jt(ht,e,0),e},context:function(t,i){return t?new So(t,i):ot},matchMedia:function(t){return new $h(t)},matchMediaRefresh:function(){return Ne.forEach(function(t){var i=t.conditions,e,r;for(r in i)i[r]&&(i[r]=!1,e=1);e&&t.revert()})||un()},addEventListener:function(t,i){var e=pr[t]||(pr[t]=[]);~e.indexOf(i)||e.push(i)},removeEventListener:function(t,i){var e=pr[t],r=e&&e.indexOf(i);r>=0&&e.splice(r,1)},utils:{wrap:Ah,wrapYoyo:Eh,distribute:Ja,random:eo,snap:to,normalize:Oh,getUnit:xt,clamp:xh,splitColor:ao,toArray:Ht,selector:ln,mapRange:ro,pipe:Th,unitize:Ph,interpolate:Rh,shuffle:Qa},install:Ua,effects:Gr,ticker:Dt,updateRoot:Tt.updateRoot,plugins:Lt,globalTimeline:ht,core:{PropTween:kt,globals:Va,Tween:pt,Timeline:Tt,Animation:sr,getCache:Fe,_removeLinkedListItem:Pr,reverting:function(){return bt},context:function(t){return t&&ot&&(ot.data.push(t),t._ctx=ot),ot},suppressOverwrites:function(t){return Tn=t}}};Rt("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Cr[o]=pt[o]});Dt.add(Tt.updateRoot);je=Cr.to({},{duration:0});var Zh=function(t,i){for(var e=t._pt;e&&e.p!==i&&e.op!==i&&e.fp!==i;)e=e._next;return e},Qh=function(t,i){var e=t._targets,r,n,a;for(r in i)for(n=e.length;n--;)a=t._ptLookup[n][r],a&&(a=a.d)&&(a._pt&&(a=Zh(a,r)),a&&a.modifier&&a.modifier(i[r],t,e[n],r))},zr=function(t,i){return{name:t,headless:1,rawVars:1,init:function(r,n,a){a._onInit=function(s){var h,l;if(yt(n)&&(h={},Rt(n,function(c){return h[c]=1}),n=h),i){h={};for(l in n)h[l]=i(n[l]);n=h}Qh(s,n)}}}},Ft=Cr.registerPlugin({name:"attr",init:function(t,i,e,r,n){var a,s,h;this.tween=e;for(a in i)h=t.getAttribute(a)||"",s=this.add(t,"setAttribute",(h||0)+"",i[a],r,n,0,0,a),s.op=a,s.b=h,this._props.push(a)},render:function(t,i){for(var e=i._pt;e;)bt?e.set(e.t,e.p,e.b,e):e.r(t,e.d),e=e._next}},{name:"endArray",headless:1,init:function(t,i){for(var e=i.length;e--;)this.add(t,e,t[e]||0,i[e],0,0,0,0,0,1)}},zr("roundProps",cn),zr("modifiers"),zr("snap",to))||Cr;pt.version=Tt.version=Ft.version="3.13.0";Ba=1;On()&&ri();tt.Power0;tt.Power1;tt.Power2;tt.Power3;tt.Power4;tt.Linear;tt.Quad;tt.Cubic;tt.Quart;tt.Quint;tt.Strong;tt.Elastic;tt.Back;tt.SteppedEase;tt.Bounce;tt.Sine;tt.Expo;tt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var hs,ye,Ze,Bn,Me,ls,Un,Jh=function(){return typeof window<"u"},ue={},Ee=180/Math.PI,Qe=Math.PI/180,We=Math.atan2,cs=1e8,Vn=/([A-Z])/g,tl=/(left|right|width|margin|padding|x)/i,el=/[\s,\(]\S/,te={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},fn=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},il=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},rl=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},nl=function(t,i){var e=i.s+i.c*t;i.set(i.t,i.p,~~(e+(e<0?-.5:.5))+i.u,i)},Co=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},xo=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},sl=function(t,i,e){return t.style[i]=e},al=function(t,i,e){return t.style.setProperty(i,e)},ol=function(t,i,e){return t._gsap[i]=e},hl=function(t,i,e){return t._gsap.scaleX=t._gsap.scaleY=e},ll=function(t,i,e,r,n){var a=t._gsap;a.scaleX=a.scaleY=e,a.renderTransform(n,a)},cl=function(t,i,e,r,n){var a=t._gsap;a[i]=e,a.renderTransform(n,a)},lt="transform",Mt=lt+"Origin",dl=function o(t,i){var e=this,r=this.target,n=r.style,a=r._gsap;if(t in ue&&n){if(this.tfm=this.tfm||{},t!=="transform")t=te[t]||t,~t.indexOf(",")?t.split(",").forEach(function(s){return e.tfm[s]=le(r,s)}):this.tfm[t]=a.x?a[t]:le(r,t),t===Mt&&(this.tfm.zOrigin=a.zOrigin);else return te.transform.split(",").forEach(function(s){return o.call(e,s,i)});if(this.props.indexOf(lt)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Mt,i,"")),t=lt}(n||i)&&this.props.push(t,i,n[t])},wo=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},ul=function(){var t=this.props,i=this.target,e=i.style,r=i._gsap,n,a;for(n=0;n<t.length;n+=3)t[n+1]?t[n+1]===2?i[t[n]](t[n+2]):i[t[n]]=t[n+2]:t[n+2]?e[t[n]]=t[n+2]:e.removeProperty(t[n].substr(0,2)==="--"?t[n]:t[n].replace(Vn,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),n=Un(),(!n||!n.isStart)&&!e[lt]&&(wo(e),r.zOrigin&&e[Mt]&&(e[Mt]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},To=function(t,i){var e={target:t,props:[],revert:ul,save:dl};return t._gsap||Ft.core.getCache(t),i&&t.style&&t.nodeType&&i.split(",").forEach(function(r){return e.save(r)}),e},Po,gn=function(t,i){var e=ye.createElementNS?ye.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ye.createElement(t);return e&&e.style?e:ye.createElement(t)},Wt=function o(t,i,e){var r=getComputedStyle(t);return r[i]||r.getPropertyValue(i.replace(Vn,"-$1").toLowerCase())||r.getPropertyValue(i)||!e&&o(t,ni(i)||i,1)||""},ds="O,Moz,ms,Ms,Webkit".split(","),ni=function(t,i,e){var r=i||Me,n=r.style,a=5;if(t in n&&!e)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(ds[a]+t in n););return a<0?null:(a===3?"ms":a>=0?ds[a]:"")+t},_n=function(){Jh()&&window.document&&(hs=window,ye=hs.document,Ze=ye.documentElement,Me=gn("div")||{style:{}},gn("div"),lt=ni(lt),Mt=lt+"Origin",Me.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Po=!!ni("perspective"),Un=Ft.core.reverting,Bn=1)},us=function(t){var i=t.ownerSVGElement,e=gn("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0),n;r.style.display="block",e.appendChild(r),Ze.appendChild(e);try{n=r.getBBox()}catch(a){}return e.removeChild(r),Ze.removeChild(e),n},fs=function(t,i){for(var e=i.length;e--;)if(t.hasAttribute(i[e]))return t.getAttribute(i[e])},Oo=function(t){var i,e;try{i=t.getBBox()}catch(r){i=us(t),e=1}return i&&(i.width||i.height)||e||(i=us(t)),i&&!i.width&&!i.x&&!i.y?{x:+fs(t,["x","cx","x1"])||0,y:+fs(t,["y","cy","y1"])||0,width:0,height:0}:i},Ao=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Oo(t))},Ue=function(t,i){if(i){var e=t.style,r;i in ue&&i!==Mt&&(i=lt),e.removeProperty?(r=i.substr(0,2),(r==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),e.removeProperty(r==="--"?i:i.replace(Vn,"-$1").toLowerCase())):e.removeAttribute(i)}},ve=function(t,i,e,r,n,a){var s=new kt(t._pt,i,e,0,1,a?xo:Co);return t._pt=s,s.b=r,s.e=n,t._props.push(e),s},gs={deg:1,rad:1,turn:1},fl={grid:1,flex:1},xe=function o(t,i,e,r){var n=parseFloat(e)||0,a=(e+"").trim().substr((n+"").length)||"px",s=Me.style,h=tl.test(i),l=t.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(h?"Width":"Height"),p=100,y=r==="px",_=r==="%",g,d,m,C;if(r===a||!n||gs[r]||gs[a])return n;if(a!=="px"&&!y&&(n=o(t,i,e,"px")),C=t.getCTM&&Ao(t),(_||a==="%")&&(ue[i]||~i.indexOf("adius")))return g=C?t.getBBox()[h?"width":"height"]:t[c],gt(_?n/g*p:n/100*g);if(s[h?"width":"height"]=p+(y?a:r),d=r!=="rem"&&~i.indexOf("adius")||r==="em"&&t.appendChild&&!l?t:t.parentNode,C&&(d=(t.ownerSVGElement||{}).parentNode),(!d||d===ye||!d.appendChild)&&(d=ye.body),m=d._gsap,m&&_&&m.width&&h&&m.time===Dt.time&&!m.uncache)return gt(n/m.width*p);if(_&&(i==="height"||i==="width")){var f=t.style[i];t.style[i]=p+r,g=t[c],f?t.style[i]=f:Ue(t,i)}else(_||a==="%")&&!fl[Wt(d,"display")]&&(s.position=Wt(t,"position")),d===t&&(s.position="static"),d.appendChild(Me),g=Me[c],d.removeChild(Me),s.position="absolute";return h&&_&&(m=Fe(d),m.time=Dt.time,m.width=d[c]),gt(y?g*n/p:g&&n?p/g*n:0)},le=function(t,i,e,r){var n;return Bn||_n(),i in te&&i!=="transform"&&(i=te[i],~i.indexOf(",")&&(i=i.split(",")[0])),ue[i]&&i!=="transform"?(n=or(t,r),n=i!=="transformOrigin"?n[i]:n.svg?n.origin:wr(Wt(t,Mt))+" "+n.zOrigin+"px"):(n=t.style[i],(!n||n==="auto"||r||~(n+"").indexOf("calc("))&&(n=xr[i]&&xr[i](t,i,e)||Wt(t,i)||qa(t,i)||(i==="opacity"?1:0))),e&&!~(n+"").trim().indexOf(" ")?xe(t,i,n,e)+e:n},gl=function(t,i,e,r){if(!e||e==="none"){var n=ni(i,t,1),a=n&&Wt(t,n,1);a&&a!==e?(i=n,e=a):i==="borderColor"&&(e=Wt(t,"borderTopColor"))}var s=new kt(this._pt,t.style,i,0,1,vo),h=0,l=0,c,p,y,_,g,d,m,C,f,u,b,S;if(s.b=e,s.e=r,e+="",r+="",r.substring(0,6)==="var(--"&&(r=Wt(t,r.substring(4,r.indexOf(")")))),r==="auto"&&(d=t.style[i],t.style[i]=r,r=Wt(t,i)||r,d?t.style[i]=d:Ue(t,i)),c=[e,r],ho(c),e=c[0],r=c[1],y=e.match(Ke)||[],S=r.match(Ke)||[],S.length){for(;p=Ke.exec(r);)m=p[0],f=r.substring(h,p.index),g?g=(g+1)%5:(f.substr(-5)==="rgba("||f.substr(-5)==="hsla(")&&(g=1),m!==(d=y[l++]||"")&&(_=parseFloat(d)||0,b=d.substr((_+"").length),m.charAt(1)==="="&&(m=$e(_,m)+b),C=parseFloat(m),u=m.substr((C+"").length),h=Ke.lastIndex-u.length,u||(u=u||Gt.units[i]||b,h===r.length&&(r+=u,s.e+=u)),b!==u&&(_=xe(t,i,d,u)||0),s._pt={_next:s._pt,p:f||l===1?f:",",s:_,c:C-_,m:g&&g<4||i==="zIndex"?Math.round:0});s.c=h<r.length?r.substring(h,r.length):""}else s.r=i==="display"&&r==="none"?xo:Co;return Ga.test(r)&&(s.e=0),this._pt=s,s},_s={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_l=function(t){var i=t.split(" "),e=i[0],r=i[1]||"50%";return(e==="top"||e==="bottom"||r==="left"||r==="right")&&(t=e,e=r,r=t),i[0]=_s[e]||e,i[1]=_s[r]||r,i.join(" ")},pl=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var e=i.t,r=e.style,n=i.u,a=e._gsap,s,h,l;if(n==="all"||n===!0)r.cssText="",h=1;else for(n=n.split(","),l=n.length;--l>-1;)s=n[l],ue[s]&&(h=1,s=s==="transformOrigin"?Mt:lt),Ue(e,s);h&&(Ue(e,lt),a&&(a.svg&&e.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",or(e,1),a.uncache=1,wo(r)))}},xr={clearProps:function(t,i,e,r,n){if(n.data!=="isFromStart"){var a=t._pt=new kt(t._pt,i,e,0,0,pl);return a.u=r,a.pr=-10,a.tween=n,t._props.push(e),1}}},ar=[1,0,0,1,0,0],Eo={},Ro=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ps=function(t){var i=Wt(t,lt);return Ro(i)?ar:i.substr(7).match(Na).map(gt)},zn=function(t,i){var e=t._gsap||Fe(t),r=t.style,n=ps(t),a,s,h,l;return e.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,n=[h.a,h.b,h.c,h.d,h.e,h.f],n.join(",")==="1,0,0,1,0,0"?ar:n):(n===ar&&!t.offsetParent&&t!==Ze&&!e.svg&&(h=r.display,r.display="block",a=t.parentNode,(!a||!t.offsetParent&&!t.getBoundingClientRect().width)&&(l=1,s=t.nextElementSibling,Ze.appendChild(t)),n=ps(t),h?r.display=h:Ue(t,"display"),l&&(s?a.insertBefore(t,s):a?a.appendChild(t):Ze.removeChild(t))),i&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n)},pn=function(t,i,e,r,n,a){var s=t._gsap,h=n||zn(t,!0),l=s.xOrigin||0,c=s.yOrigin||0,p=s.xOffset||0,y=s.yOffset||0,_=h[0],g=h[1],d=h[2],m=h[3],C=h[4],f=h[5],u=i.split(" "),b=parseFloat(u[0])||0,S=parseFloat(u[1])||0,T,k,P,w;e?h!==ar&&(k=_*m-g*d)&&(P=b*(m/k)+S*(-d/k)+(d*f-m*C)/k,w=b*(-g/k)+S*(_/k)-(_*f-g*C)/k,b=P,S=w):(T=Oo(t),b=T.x+(~u[0].indexOf("%")?b/100*T.width:b),S=T.y+(~(u[1]||u[0]).indexOf("%")?S/100*T.height:S)),r||r!==!1&&s.smooth?(C=b-l,f=S-c,s.xOffset=p+(C*_+f*d)-C,s.yOffset=y+(C*g+f*m)-f):s.xOffset=s.yOffset=0,s.xOrigin=b,s.yOrigin=S,s.smooth=!!r,s.origin=i,s.originIsAbsolute=!!e,t.style[Mt]="0px 0px",a&&(ve(a,s,"xOrigin",l,b),ve(a,s,"yOrigin",c,S),ve(a,s,"xOffset",p,s.xOffset),ve(a,s,"yOffset",y,s.yOffset)),t.setAttribute("data-svg-origin",b+" "+S)},or=function(t,i){var e=t._gsap||new fo(t);if("x"in e&&!i&&!e.uncache)return e;var r=t.style,n=e.scaleX<0,a="px",s="deg",h=getComputedStyle(t),l=Wt(t,Mt)||"0",c,p,y,_,g,d,m,C,f,u,b,S,T,k,P,w,O,E,L,v,A,x,R,M,D,I,N,U,q,B,V,W;return c=p=y=d=m=C=f=u=b=0,_=g=1,e.svg=!!(t.getCTM&&Ao(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(r[lt]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[lt]!=="none"?h[lt]:"")),r.scale=r.rotate=r.translate="none"),k=zn(t,e.svg),e.svg&&(e.uncache?(D=t.getBBox(),l=e.xOrigin-D.x+"px "+(e.yOrigin-D.y)+"px",M=""):M=!i&&t.getAttribute("data-svg-origin"),pn(t,M||l,!!M||e.originIsAbsolute,e.smooth!==!1,k)),S=e.xOrigin||0,T=e.yOrigin||0,k!==ar&&(E=k[0],L=k[1],v=k[2],A=k[3],c=x=k[4],p=R=k[5],k.length===6?(_=Math.sqrt(E*E+L*L),g=Math.sqrt(A*A+v*v),d=E||L?We(L,E)*Ee:0,f=v||A?We(v,A)*Ee+d:0,f&&(g*=Math.abs(Math.cos(f*Qe))),e.svg&&(c-=S-(S*E+T*v),p-=T-(S*L+T*A))):(W=k[6],B=k[7],N=k[8],U=k[9],q=k[10],V=k[11],c=k[12],p=k[13],y=k[14],P=We(W,q),m=P*Ee,P&&(w=Math.cos(-P),O=Math.sin(-P),M=x*w+N*O,D=R*w+U*O,I=W*w+q*O,N=x*-O+N*w,U=R*-O+U*w,q=W*-O+q*w,V=B*-O+V*w,x=M,R=D,W=I),P=We(-v,q),C=P*Ee,P&&(w=Math.cos(-P),O=Math.sin(-P),M=E*w-N*O,D=L*w-U*O,I=v*w-q*O,V=A*O+V*w,E=M,L=D,v=I),P=We(L,E),d=P*Ee,P&&(w=Math.cos(P),O=Math.sin(P),M=E*w+L*O,D=x*w+R*O,L=L*w-E*O,R=R*w-x*O,E=M,x=D),m&&Math.abs(m)+Math.abs(d)>359.9&&(m=d=0,C=180-C),_=gt(Math.sqrt(E*E+L*L+v*v)),g=gt(Math.sqrt(R*R+W*W)),P=We(x,R),f=Math.abs(P)>2e-4?P*Ee:0,b=V?1/(V<0?-V:V):0),e.svg&&(M=t.getAttribute("transform"),e.forceCSS=t.setAttribute("transform","")||!Ro(Wt(t,lt)),M&&t.setAttribute("transform",M))),Math.abs(f)>90&&Math.abs(f)<270&&(n?(_*=-1,f+=d<=0?180:-180,d+=d<=0?180:-180):(g*=-1,f+=f<=0?180:-180)),i=i||e.uncache,e.x=c-((e.xPercent=c&&(!i&&e.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*e.xPercent/100:0)+a,e.y=p-((e.yPercent=p&&(!i&&e.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-p)?-50:0)))?t.offsetHeight*e.yPercent/100:0)+a,e.z=y+a,e.scaleX=gt(_),e.scaleY=gt(g),e.rotation=gt(d)+s,e.rotationX=gt(m)+s,e.rotationY=gt(C)+s,e.skewX=f+s,e.skewY=u+s,e.transformPerspective=b+a,(e.zOrigin=parseFloat(l.split(" ")[2])||!i&&e.zOrigin||0)&&(r[Mt]=wr(l)),e.xOffset=e.yOffset=0,e.force3D=Gt.force3D,e.renderTransform=e.svg?yl:Po?ko:ml,e.uncache=0,e},wr=function(t){return(t=t.split(" "))[0]+" "+t[1]},qr=function(t,i,e){var r=xt(i);return gt(parseFloat(i)+parseFloat(xe(t,"x",e+"px",r)))+r},ml=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,ko(t,i)},Pe="0deg",ai="0px",Oe=") ",ko=function(t,i){var e=i||this,r=e.xPercent,n=e.yPercent,a=e.x,s=e.y,h=e.z,l=e.rotation,c=e.rotationY,p=e.rotationX,y=e.skewX,_=e.skewY,g=e.scaleX,d=e.scaleY,m=e.transformPerspective,C=e.force3D,f=e.target,u=e.zOrigin,b="",S=C==="auto"&&t&&t!==1||C===!0;if(u&&(p!==Pe||c!==Pe)){var T=parseFloat(c)*Qe,k=Math.sin(T),P=Math.cos(T),w;T=parseFloat(p)*Qe,w=Math.cos(T),a=qr(f,a,k*w*-u),s=qr(f,s,-Math.sin(T)*-u),h=qr(f,h,P*w*-u+u)}m!==ai&&(b+="perspective("+m+Oe),(r||n)&&(b+="translate("+r+"%, "+n+"%) "),(S||a!==ai||s!==ai||h!==ai)&&(b+=h!==ai||S?"translate3d("+a+", "+s+", "+h+") ":"translate("+a+", "+s+Oe),l!==Pe&&(b+="rotate("+l+Oe),c!==Pe&&(b+="rotateY("+c+Oe),p!==Pe&&(b+="rotateX("+p+Oe),(y!==Pe||_!==Pe)&&(b+="skew("+y+", "+_+Oe),(g!==1||d!==1)&&(b+="scale("+g+", "+d+Oe),f.style[lt]=b||"translate(0, 0)"},yl=function(t,i){var e=i||this,r=e.xPercent,n=e.yPercent,a=e.x,s=e.y,h=e.rotation,l=e.skewX,c=e.skewY,p=e.scaleX,y=e.scaleY,_=e.target,g=e.xOrigin,d=e.yOrigin,m=e.xOffset,C=e.yOffset,f=e.forceCSS,u=parseFloat(a),b=parseFloat(s),S,T,k,P,w;h=parseFloat(h),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,h+=c),h||l?(h*=Qe,l*=Qe,S=Math.cos(h)*p,T=Math.sin(h)*p,k=Math.sin(h-l)*-y,P=Math.cos(h-l)*y,l&&(c*=Qe,w=Math.tan(l-c),w=Math.sqrt(1+w*w),k*=w,P*=w,c&&(w=Math.tan(c),w=Math.sqrt(1+w*w),S*=w,T*=w)),S=gt(S),T=gt(T),k=gt(k),P=gt(P)):(S=p,P=y,T=k=0),(u&&!~(a+"").indexOf("px")||b&&!~(s+"").indexOf("px"))&&(u=xe(_,"x",a,"px"),b=xe(_,"y",s,"px")),(g||d||m||C)&&(u=gt(u+g-(g*S+d*k)+m),b=gt(b+d-(g*T+d*P)+C)),(r||n)&&(w=_.getBBox(),u=gt(u+r/100*w.width),b=gt(b+n/100*w.height)),w="matrix("+S+","+T+","+k+","+P+","+u+","+b+")",_.setAttribute("transform",w),f&&(_.style[lt]=w)},vl=function(t,i,e,r,n){var a=360,s=yt(n),h=parseFloat(n)*(s&&~n.indexOf("rad")?Ee:1),l=h-r,c=r+l+"deg",p,y;return s&&(p=n.split("_")[1],p==="short"&&(l%=a,l!==l%(a/2)&&(l+=l<0?a:-a)),p==="cw"&&l<0?l=(l+a*cs)%a-~~(l/a)*a:p==="ccw"&&l>0&&(l=(l-a*cs)%a-~~(l/a)*a)),t._pt=y=new kt(t._pt,i,e,r,l,il),y.e=c,y.u="deg",t._props.push(e),y},ms=function(t,i){for(var e in i)t[e]=i[e];return t},bl=function(t,i,e){var r=ms({},e._gsap),n="perspective,force3D,transformOrigin,svgOrigin",a=e.style,s,h,l,c,p,y,_,g;r.svg?(l=e.getAttribute("transform"),e.setAttribute("transform",""),a[lt]=i,s=or(e,1),Ue(e,lt),e.setAttribute("transform",l)):(l=getComputedStyle(e)[lt],a[lt]=i,s=or(e,1),a[lt]=l);for(h in ue)l=r[h],c=s[h],l!==c&&n.indexOf(h)<0&&(_=xt(l),g=xt(c),p=_!==g?xe(e,h,l,g):parseFloat(l),y=parseFloat(c),t._pt=new kt(t._pt,s,h,p,y-p,fn),t._pt.u=g||0,t._props.push(h));ms(s,r)};Rt("padding,margin,Width,Radius",function(o,t){var i="Top",e="Right",r="Bottom",n="Left",a=(t<3?[i,e,r,n]:[i+n,i+e,r+e,r+n]).map(function(s){return t<2?o+s:"border"+s+o});xr[t>1?"border"+o:o]=function(s,h,l,c,p){var y,_;if(arguments.length<4)return y=a.map(function(g){return le(s,g,l)}),_=y.join(" "),_.split(y[0]).length===5?y[0]:_;y=(c+"").split(" "),_={},a.forEach(function(g,d){return _[g]=y[d]=y[d]||y[(d-1)/2|0]}),s.init(h,_,p)}});var Mo={name:"css",register:_n,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,e,r,n){var a=this._props,s=t.style,h=e.vars.startAt,l,c,p,y,_,g,d,m,C,f,u,b,S,T,k,P;Bn||_n(),this.styles=this.styles||To(t),P=this.styles.props,this.tween=e;for(d in i)if(d!=="autoRound"&&(c=i[d],!(Lt[d]&&go(d,i,e,r,t,n)))){if(_=typeof c,g=xr[d],_==="function"&&(c=c.call(e,r,t,n),_=typeof c),_==="string"&&~c.indexOf("random(")&&(c=rr(c)),g)g(this,t,d,c,e)&&(k=1);else if(d.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(d)+"").trim(),c+="",Se.lastIndex=0,Se.test(l)||(m=xt(l),C=xt(c)),C?m!==C&&(l=xe(t,d,l,C)+C):m&&(c+=m),this.add(s,"setProperty",l,c,r,n,0,0,d),a.push(d),P.push(d,0,s[d]);else if(_!=="undefined"){if(h&&d in h?(l=typeof h[d]=="function"?h[d].call(e,r,t,n):h[d],yt(l)&&~l.indexOf("random(")&&(l=rr(l)),xt(l+"")||l==="auto"||(l+=Gt.units[d]||xt(le(t,d))||""),(l+"").charAt(1)==="="&&(l=le(t,d))):l=le(t,d),y=parseFloat(l),f=_==="string"&&c.charAt(1)==="="&&c.substr(0,2),f&&(c=c.substr(2)),p=parseFloat(c),d in te&&(d==="autoAlpha"&&(y===1&&le(t,"visibility")==="hidden"&&p&&(y=0),P.push("visibility",0,s.visibility),ve(this,s,"visibility",y?"inherit":"hidden",p?"inherit":"hidden",!p)),d!=="scale"&&d!=="transform"&&(d=te[d],~d.indexOf(",")&&(d=d.split(",")[0]))),u=d in ue,u){if(this.styles.save(d),_==="string"&&c.substring(0,6)==="var(--"&&(c=Wt(t,c.substring(4,c.indexOf(")"))),p=parseFloat(c)),b||(S=t._gsap,S.renderTransform&&!i.parseTransform||or(t,i.parseTransform),T=i.smoothOrigin!==!1&&S.smooth,b=this._pt=new kt(this._pt,s,lt,0,1,S.renderTransform,S,0,-1),b.dep=1),d==="scale")this._pt=new kt(this._pt,S,"scaleY",S.scaleY,(f?$e(S.scaleY,f+p):p)-S.scaleY||0,fn),this._pt.u=0,a.push("scaleY",d),d+="X";else if(d==="transformOrigin"){P.push(Mt,0,s[Mt]),c=_l(c),S.svg?pn(t,c,0,T,0,this):(C=parseFloat(c.split(" ")[2])||0,C!==S.zOrigin&&ve(this,S,"zOrigin",S.zOrigin,C),ve(this,s,d,wr(l),wr(c)));continue}else if(d==="svgOrigin"){pn(t,c,1,T,0,this);continue}else if(d in Eo){vl(this,S,d,y,f?$e(y,f+c):c);continue}else if(d==="smoothOrigin"){ve(this,S,"smooth",S.smooth,c);continue}else if(d==="force3D"){S[d]=c;continue}else if(d==="transform"){bl(this,c,t);continue}}else d in s||(d=ni(d)||d);if(u||(p||p===0)&&(y||y===0)&&!el.test(c)&&d in s)m=(l+"").substr((y+"").length),p||(p=0),C=xt(c)||(d in Gt.units?Gt.units[d]:m),m!==C&&(y=xe(t,d,l,C)),this._pt=new kt(this._pt,u?S:s,d,y,(f?$e(y,f+p):p)-y,!u&&(C==="px"||d==="zIndex")&&i.autoRound!==!1?nl:fn),this._pt.u=C||0,m!==C&&C!=="%"&&(this._pt.b=l,this._pt.r=rl);else if(d in s)gl.call(this,t,d,l,f?f+c:c);else if(d in t)this.add(t,d,l||t[d],f?f+c:c,r,n);else if(d!=="parseTransform"){En(d,c);continue}u||(d in s?P.push(d,0,s[d]):typeof t[d]=="function"?P.push(d,2,t[d]()):P.push(d,1,l||t[d])),a.push(d)}}k&&bo(this)},render:function(t,i){if(i.tween._time||!Un())for(var e=i._pt;e;)e.r(t,e.d),e=e._next;else i.styles.revert()},get:le,aliases:te,getSetter:function(t,i,e){var r=te[i];return r&&r.indexOf(",")<0&&(i=r),i in ue&&i!==Mt&&(t._gsap.x||le(t,"x"))?e&&ls===e?i==="scale"?hl:ol:(ls=e||{})&&(i==="scale"?ll:cl):t.style&&!Pn(t.style[i])?sl:~i.indexOf("-")?al:Gn(t,i)},core:{_removeProperty:Ue,_getMatrix:zn}};Ft.utils.checkPrefix=ni;Ft.core.getStyleSaver=To;(function(o,t,i,e){var r=Rt(o+","+t+","+i,function(n){ue[n]=1});Rt(t,function(n){Gt.units[n]="deg",Eo[n]=1}),te[r[13]]=o+","+t,Rt(e,function(n){var a=n.split(":");te[a[1]]=r[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Rt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){Gt.units[o]="px"});Ft.registerPlugin(Mo);var St=Ft.registerPlugin(Mo)||Ft;St.core.Tween;const lr=document.querySelector(".c-loader");PubSub.subscribe(it.IMAGE_UPLOAD_NEW_IMAGE,Rl);const qn=St.timeline({repeat:-1}),cr=St.timeline({delay:.5}),Er=30,Sl=St.to(lr.querySelectorAll(".c-loader__shine"),{rotate:Er,scale:3,duration:.2,ease:"linear"}),Cl=St.to(lr.querySelectorAll(".c-loader__shine"),{rotate:Er*2,opacity:0,duration:.3,ease:"linear"}),xl=St.to(lr.querySelectorAll(".c-loader__shine-2"),{rotate:-Er,scale:3,duration:.2,ease:"linear"}),wl=St.to(lr.querySelectorAll(".c-loader__shine-2"),{rotate:-Er*2,opacity:0,duration:.3,ease:"linear"}),Tl=St.fromTo(lr.querySelectorAll(".c-loader__circle"),{scale:0},{scale:4,duration:1.2,opacity:1,delay:.01,ease:"power3.in",transformOrigin:"30% 40%"});cr.add(Sl);cr.add(Cl);cr.add(xl,"-=0.3");cr.add(wl);var ys=.2,vs=.3,bs=.3,Ss=.2,Rr=document.querySelector(".c-loader__tooth"),kr=document.querySelector(".c-loader__shadow"),dr=St.timeline(),Pl=[St.to(kr,{duration:ys,scaleX:1.3,transformOrigin:"50% 50%",ease:"sine.inOut"}),St.to(Rr,{duration:ys,scaleX:1.2,scaleY:.65,y:7,transformOrigin:"50% 70%",ease:"sine.inOut"})],Ol=[St.to(kr,{duration:vs,scaleX:.5,transformOrigin:"50% 50%",ease:"sine.inOut"}),St.to(Rr,{duration:vs,scaleX:.85,scaleY:1.1,y:-12,transformOrigin:"50% 65%",ease:"quad.inOut"})],Al=[St.to(kr,{duration:bs,scaleX:1.2,transformOrigin:"50% 50%",ease:"quad.inOut"}),St.to(Rr,{duration:bs,scaleX:1.1,scaleY:.8,y:6,transformOrigin:"50% 50%",ease:"quad.inOut"})],El=[St.to(kr,{duration:Ss+.045,scaleX:1,transformOrigin:"50% 50%",ease:"sine.inOut"}),St.to(Rr,{duration:Ss,scale:1,y:0,transformOrigin:"50% 50%",ease:"sine.inOut"})];dr.add(Pl);dr.add(Ol);dr.add(Al,"+=.025");dr.add(El,"+=.05");qn.add(dr);qn.add([Tl,cr],"-=1.5");function Rl(){qn.kill()}const Fo=document.querySelector(".c-toolbar__font-range"),Ge=document.querySelector(".c-toolbar__font-size"),kl=document.querySelector(".c-toolbar__font-color"),Hn=document.querySelector(".c-toolbar__font"),mn=14,yn=72;Hn.addEventListener("click",Ml);function Ml(){Hn.classList.add("active"),PubSub.publish(it.TOOLBAR_FONT_CLICKED)}kl.addEventListener("input",Fl);function Fl(o){PubSub.publish(it.TOOLBAR_FONT_COLOR_CHANGED,o.target.value)}Fo.addEventListener("input",Ll);function Ll(o){PubSub.publish(it.TOOLBAR_FONT_SIZE_CHANGED,parseInt(o.target.value,10)),Ge.value=o.target.value}Ge.addEventListener("input",Dl);Ge.addEventListener("blur",Nl);Ge.addEventListener("keydown",Gl);function Dl(o){const t=parseInt(o.target.value,10);isNaN(t)||t>=mn&&t<=yn&&(PubSub.publish(it.TOOLBAR_FONT_SIZE_CHANGED,t),Fo.value=t)}function Nl(o){const t=parseInt(o.target.value,10);isNaN(t)||(t>yn&&(Ge.value=yn),t<mn&&(Ge.value=mn),Ge.dispatchEvent(new Event("input")))}function Gl(o){o.key==="Enter"&&(o.preventDefault(),this.blur())}PubSub.subscribe(it.TOOLBAR_STROKE_CLICKED,Lo);PubSub.subscribe(it.TOOLBAR_ERASER_CLICKED,Lo);function Lo(){Hn.classList.remove("active")}const Il=document.querySelectorAll('input[name="stroke-radio"]'),Bl=document.querySelector(".c-toolbar__stroke-color"),Wn=document.querySelector(".c-toolbar__stroke");Il.forEach(o=>{o.addEventListener("change",t=>{PubSub.publish(it.TOOLBAR_STROKE_WIDTH_SELECTED,t.target.value.toUpperCase()),Yn()})});Bl.addEventListener("input",Ul);Wn.addEventListener("click",Yn);function Ul(o){PubSub.publish(it.TOOLBAR_STROKE_COLOR_CHANGED,o.target.value),Yn()}function Yn(){Wn.classList.add("active"),PubSub.publish(it.TOOLBAR_STROKE_CLICKED)}PubSub.subscribe(it.TOOLBAR_FONT_CLICKED,Do);PubSub.subscribe(it.TOOLBAR_ERASER_CLICKED,Do);function Do(){Wn.classList.remove("active")}const Xn=document.querySelector(".c-toolbar__eraser");Xn.addEventListener("click",Vl);function Vl(){Xn.classList.add("active"),PubSub.publish(it.TOOLBAR_ERASER_CLICKED)}PubSub.subscribe(it.TOOLBAR_FONT_CLICKED,No);PubSub.subscribe(it.TOOLBAR_STROKE_CLICKED,No);function No(){Xn.classList.remove("active")}const zl=document.querySelectorAll('input[name="annotations-radio"]');zl.forEach(o=>{o.addEventListener("change",t=>{const i=t.target.value==="off";PubSub.publish(it.TOOLBAR_ANNOTATIONS_TOGGLED,i)})});const Go=document.querySelector(".c-toolbar__zoom-out"),Io=document.querySelector(".c-toolbar__zoom-in"),vn=1,bn=4;let ee=1;const Bo={1:1,2:1.5,3:2.5,4:4};Go.addEventListener("click",Hl);Io.addEventListener("click",ql);function ql(o){ee++,ee>bn&&(ee=bn),Uo(),PubSub.publish(it.TOOLBAR_ZOOM_CHANGED,Bo[ee])}function Hl(o){ee--,ee<vn&&(ee=vn),Uo(),PubSub.publish(it.TOOLBAR_ZOOM_CHANGED,Bo[ee])}function Uo(){Io.disabled=ee===bn,Go.disabled=ee===vn}var mr={exports:{}},oi={},Hr={},Wr={},Cs;function Z(){return Cs||(Cs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof Re<"u"?Re:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.20",isBrowser:i(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return o.Konva.angleDeg?r*t:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var r;return(r=o.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(r){o.glob.Konva=r}};const e=r=>{o.Konva[r.prototype.getClassName()]=r};o._registerNode=e,o.Konva._injectGlobal(o.Konva)}(Wr)),Wr}var Yr={},xs;function ut(){return xs||(xs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const t=Z();class i{constructor(b=[1,0,0,1,0,0]){this.dirty=!1,this.m=b&&b.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(b){b.m[0]=this.m[0],b.m[1]=this.m[1],b.m[2]=this.m[2],b.m[3]=this.m[3],b.m[4]=this.m[4],b.m[5]=this.m[5]}point(b){const S=this.m;return{x:S[0]*b.x+S[2]*b.y+S[4],y:S[1]*b.x+S[3]*b.y+S[5]}}translate(b,S){return this.m[4]+=this.m[0]*b+this.m[2]*S,this.m[5]+=this.m[1]*b+this.m[3]*S,this}scale(b,S){return this.m[0]*=b,this.m[1]*=b,this.m[2]*=S,this.m[3]*=S,this}rotate(b){const S=Math.cos(b),T=Math.sin(b),k=this.m[0]*S+this.m[2]*T,P=this.m[1]*S+this.m[3]*T,w=this.m[0]*-T+this.m[2]*S,O=this.m[1]*-T+this.m[3]*S;return this.m[0]=k,this.m[1]=P,this.m[2]=w,this.m[3]=O,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(b,S){const T=this.m[0]+this.m[2]*S,k=this.m[1]+this.m[3]*S,P=this.m[2]+this.m[0]*b,w=this.m[3]+this.m[1]*b;return this.m[0]=T,this.m[1]=k,this.m[2]=P,this.m[3]=w,this}multiply(b){const S=this.m[0]*b.m[0]+this.m[2]*b.m[1],T=this.m[1]*b.m[0]+this.m[3]*b.m[1],k=this.m[0]*b.m[2]+this.m[2]*b.m[3],P=this.m[1]*b.m[2]+this.m[3]*b.m[3],w=this.m[0]*b.m[4]+this.m[2]*b.m[5]+this.m[4],O=this.m[1]*b.m[4]+this.m[3]*b.m[5]+this.m[5];return this.m[0]=S,this.m[1]=T,this.m[2]=k,this.m[3]=P,this.m[4]=w,this.m[5]=O,this}invert(){const b=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*b,T=-this.m[1]*b,k=-this.m[2]*b,P=this.m[0]*b,w=b*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),O=b*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=T,this.m[2]=k,this.m[3]=P,this.m[4]=w,this.m[5]=O,this}getMatrix(){return this.m}decompose(){const b=this.m[0],S=this.m[1],T=this.m[2],k=this.m[3],P=this.m[4],w=this.m[5],O=b*k-S*T,E={x:P,y:w,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(b!=0||S!=0){const L=Math.sqrt(b*b+S*S);E.rotation=S>0?Math.acos(b/L):-Math.acos(b/L),E.scaleX=L,E.scaleY=O/L,E.skewX=(b*T+S*k)/O,E.skewY=0}else if(T!=0||k!=0){const L=Math.sqrt(T*T+k*k);E.rotation=Math.PI/2-(k>0?Math.acos(-T/L):-Math.acos(T/L)),E.scaleX=O/L,E.scaleY=L,E.skewX=0,E.skewY=(b*T+S*k)/O}return E.rotation=o.Util._getRotation(E.rotation),E}}o.Transform=i;const e="[object Array]",r="[object Number]",n="[object String]",a="[object Boolean]",s=Math.PI/180,h=180/Math.PI,l="#",c="",p="0",y="Konva warning: ",_="Konva error: ",g="rgb(",d={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},m=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let C=[];const f=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(u){setTimeout(u,60)};o.Util={_isElement(u){return!!(u&&u.nodeType==1)},_isFunction(u){return!!(u&&u.constructor&&u.call&&u.apply)},_isPlainObject(u){return!!u&&u.constructor===Object},_isArray(u){return Object.prototype.toString.call(u)===e},_isNumber(u){return Object.prototype.toString.call(u)===r&&!isNaN(u)&&isFinite(u)},_isString(u){return Object.prototype.toString.call(u)===n},_isBoolean(u){return Object.prototype.toString.call(u)===a},isObject(u){return u instanceof Object},isValidSelector(u){if(typeof u!="string")return!1;const b=u[0];return b==="#"||b==="."||b===b.toUpperCase()},_sign(u){return u===0||u>0?1:-1},requestAnimFrame(u){C.push(u),C.length===1&&f(function(){const b=C;C=[],b.forEach(function(S){S()})})},createCanvasElement(){const u=document.createElement("canvas");try{u.style=u.style||{}}catch(b){}return u},createImageElement(){return document.createElement("img")},_isInDocument(u){for(;u=u.parentNode;)if(u==document)return!0;return!1},_urlToImage(u,b){const S=o.Util.createImageElement();S.onload=function(){b(S)},S.src=u},_rgbToHex(u,b,S){return((1<<24)+(u<<16)+(b<<8)+S).toString(16).slice(1)},_hexToRgb(u){u=u.replace(l,c);const b=parseInt(u,16);return{r:b>>16&255,g:b>>8&255,b:b&255}},getRandomColor(){let u=(Math.random()*16777215<<0).toString(16);for(;u.length<6;)u=p+u;return l+u},getRGB(u){let b;return u in d?(b=d[u],{r:b[0],g:b[1],b:b[2]}):u[0]===l?this._hexToRgb(u.substring(1)):u.substr(0,4)===g?(b=m.exec(u.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},colorToRGBA(u){return u=u||"black",o.Util._namedColorToRBA(u)||o.Util._hex3ColorToRGBA(u)||o.Util._hex4ColorToRGBA(u)||o.Util._hex6ColorToRGBA(u)||o.Util._hex8ColorToRGBA(u)||o.Util._rgbColorToRGBA(u)||o.Util._rgbaColorToRGBA(u)||o.Util._hslColorToRGBA(u)},_namedColorToRBA(u){const b=d[u.toLowerCase()];return b?{r:b[0],g:b[1],b:b[2],a:1}:null},_rgbColorToRGBA(u){if(u.indexOf("rgb(")===0){u=u.match(/rgb\(([^)]+)\)/)[1];const b=u.split(/ *, */).map(Number);return{r:b[0],g:b[1],b:b[2],a:1}}},_rgbaColorToRGBA(u){if(u.indexOf("rgba(")===0){u=u.match(/rgba\(([^)]+)\)/)[1];const b=u.split(/ *, */).map((S,T)=>S.slice(-1)==="%"?T===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:b[0],g:b[1],b:b[2],a:b[3]}}},_hex8ColorToRGBA(u){if(u[0]==="#"&&u.length===9)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:parseInt(u.slice(7,9),16)/255}},_hex6ColorToRGBA(u){if(u[0]==="#"&&u.length===7)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:1}},_hex4ColorToRGBA(u){if(u[0]==="#"&&u.length===5)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:parseInt(u[4]+u[4],16)/255}},_hex3ColorToRGBA(u){if(u[0]==="#"&&u.length===4)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:1}},_hslColorToRGBA(u){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(u)){const[b,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(u),T=Number(S[0])/360,k=Number(S[1])/100,P=Number(S[2])/100;let w,O,E;if(k===0)return E=P*255,{r:Math.round(E),g:Math.round(E),b:Math.round(E),a:1};P<.5?w=P*(1+k):w=P+k-P*k;const L=2*P-w,v=[0,0,0];for(let A=0;A<3;A++)O=T+1/3*-(A-1),O<0&&O++,O>1&&O--,6*O<1?E=L+(w-L)*6*O:2*O<1?E=w:3*O<2?E=L+(w-L)*(2/3-O)*6:E=L,v[A]=E*255;return{r:Math.round(v[0]),g:Math.round(v[1]),b:Math.round(v[2]),a:1}}},haveIntersection(u,b){return!(b.x>u.x+u.width||b.x+b.width<u.x||b.y>u.y+u.height||b.y+b.height<u.y)},cloneObject(u){const b={};for(const S in u)this._isPlainObject(u[S])?b[S]=this.cloneObject(u[S]):this._isArray(u[S])?b[S]=this.cloneArray(u[S]):b[S]=u[S];return b},cloneArray(u){return u.slice(0)},degToRad(u){return u*s},radToDeg(u){return u*h},_degToRad(u){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(u)},_radToDeg(u){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(u)},_getRotation(u){return t.Konva.angleDeg?o.Util.radToDeg(u):u},_capitalize(u){return u.charAt(0).toUpperCase()+u.slice(1)},throw(u){throw new Error(_+u)},error(u){console.error(_+u)},warn(u){t.Konva.showWarnings&&console.warn(y+u)},each(u,b){for(const S in u)b(S,u[S])},_inRange(u,b,S){return b<=u&&u<S},_getProjectionToSegment(u,b,S,T,k,P){let w,O,E;const L=(u-S)*(u-S)+(b-T)*(b-T);if(L==0)w=u,O=b,E=(k-S)*(k-S)+(P-T)*(P-T);else{const v=((k-u)*(S-u)+(P-b)*(T-b))/L;v<0?(w=u,O=b,E=(u-k)*(u-k)+(b-P)*(b-P)):v>1?(w=S,O=T,E=(S-k)*(S-k)+(T-P)*(T-P)):(w=u+v*(S-u),O=b+v*(T-b),E=(w-k)*(w-k)+(O-P)*(O-P))}return[w,O,E]},_getProjectionToLine(u,b,S){const T=o.Util.cloneObject(u);let k=Number.MAX_VALUE;return b.forEach(function(P,w){if(!S&&w===b.length-1)return;const O=b[(w+1)%b.length],E=o.Util._getProjectionToSegment(P.x,P.y,O.x,O.y,u.x,u.y),L=E[0],v=E[1],A=E[2];A<k&&(T.x=L,T.y=v,k=A)}),T},_prepareArrayForTween(u,b,S){const T=[],k=[];if(u.length>b.length){const w=b;b=u,u=w}for(let w=0;w<u.length;w+=2)T.push({x:u[w],y:u[w+1]});for(let w=0;w<b.length;w+=2)k.push({x:b[w],y:b[w+1]});const P=[];return k.forEach(function(w){const O=o.Util._getProjectionToLine(w,T,S);P.push(O.x),P.push(O.y)}),P},_prepareToStringify(u){let b;u.visitedByCircularReferenceRemoval=!0;for(const S in u)if(u.hasOwnProperty(S)&&u[S]&&typeof u[S]=="object"){if(b=Object.getOwnPropertyDescriptor(u,S),u[S].visitedByCircularReferenceRemoval||o.Util._isElement(u[S]))if(b.configurable)delete u[S];else return null;else if(o.Util._prepareToStringify(u[S])===null)if(b.configurable)delete u[S];else return null}return delete u.visitedByCircularReferenceRemoval,u},_assign(u,b){for(const S in b)u[S]=b[S];return u},_getFirstPointerId(u){return u.touches?u.changedTouches[0].identifier:u.pointerId||999},releaseCanvas(...u){t.Konva.releaseCanvasOnDestroy&&u.forEach(b=>{b.width=0,b.height=0})},drawRoundedRectPath(u,b,S,T){let k=0,P=0,w=0,O=0;typeof T=="number"?k=P=w=O=Math.min(T,b/2,S/2):(k=Math.min(T[0]||0,b/2,S/2),P=Math.min(T[1]||0,b/2,S/2),O=Math.min(T[2]||0,b/2,S/2),w=Math.min(T[3]||0,b/2,S/2)),u.moveTo(k,0),u.lineTo(b-P,0),u.arc(b-P,P,P,Math.PI*3/2,0,!1),u.lineTo(b,S-O),u.arc(b-O,S-O,O,0,Math.PI/2,!1),u.lineTo(w,S),u.arc(w,S-w,w,Math.PI/2,Math.PI,!1),u.lineTo(0,k),u.arc(k,k,k,Math.PI,Math.PI*3/2,!1)}}}(Yr)),Yr}var hi={},Xr={},Ot={},ws;function J(){if(ws)return Ot;ws=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.RGBComponent=e,Ot.alphaComponent=r,Ot.getNumberValidator=n,Ot.getNumberOrArrayOfNumbersValidator=a,Ot.getNumberOrAutoValidator=s,Ot.getStringValidator=h,Ot.getStringOrGradientValidator=l,Ot.getFunctionValidator=c,Ot.getNumberArrayValidator=p,Ot.getBooleanValidator=y,Ot.getComponentValidator=_;const o=Z(),t=ut();function i(g){return t.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||t.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function e(g){return g>255?255:g<0?0:Math.round(g)}function r(g){return g>1?1:g<1e-4?1e-4:g}function n(){if(o.Konva.isUnminified)return function(g,d){return t.Util._isNumber(g)||t.Util.warn(i(g)+' is a not valid value for "'+d+'" attribute. The value should be a number.'),g}}function a(g){if(o.Konva.isUnminified)return function(d,m){let C=t.Util._isNumber(d),f=t.Util._isArray(d)&&d.length==g;return!C&&!f&&t.Util.warn(i(d)+' is a not valid value for "'+m+'" attribute. The value should be a number or Array<number>('+g+")"),d}}function s(){if(o.Konva.isUnminified)return function(g,d){var m=t.Util._isNumber(g),C=g==="auto";return m||C||t.Util.warn(i(g)+' is a not valid value for "'+d+'" attribute. The value should be a number or "auto".'),g}}function h(){if(o.Konva.isUnminified)return function(g,d){return t.Util._isString(g)||t.Util.warn(i(g)+' is a not valid value for "'+d+'" attribute. The value should be a string.'),g}}function l(){if(o.Konva.isUnminified)return function(g,d){const m=t.Util._isString(g),C=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return m||C||t.Util.warn(i(g)+' is a not valid value for "'+d+'" attribute. The value should be a string or a native gradient.'),g}}function c(){if(o.Konva.isUnminified)return function(g,d){return t.Util._isFunction(g)||t.Util.warn(i(g)+' is a not valid value for "'+d+'" attribute. The value should be a function.'),g}}function p(){if(o.Konva.isUnminified)return function(g,d){const m=Int8Array?Object.getPrototypeOf(Int8Array):null;return m&&g instanceof m||(t.Util._isArray(g)?g.forEach(function(C){t.Util._isNumber(C)||t.Util.warn('"'+d+'" attribute has non numeric element '+C+". Make sure that all elements are numbers.")}):t.Util.warn(i(g)+' is a not valid value for "'+d+'" attribute. The value should be a array of numbers.')),g}}function y(){if(o.Konva.isUnminified)return function(g,d){var m=g===!0||g===!1;return m||t.Util.warn(i(g)+' is a not valid value for "'+d+'" attribute. The value should be a boolean.'),g}}function _(g){if(o.Konva.isUnminified)return function(d,m){return d==null||t.Util.isObject(d)||t.Util.warn(i(d)+' is a not valid value for "'+m+'" attribute. The value should be an object with properties '+g),d}}return Ot}var Ts;function Q(){return Ts||(Ts=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const t=ut(),i=J(),e="get",r="set";o.Factory={addGetterSetter(n,a,s,h,l){o.Factory.addGetter(n,a,s),o.Factory.addSetter(n,a,h,l),o.Factory.addOverloadedGetterSetter(n,a)},addGetter(n,a,s){var h=e+t.Util._capitalize(a);n.prototype[h]=n.prototype[h]||function(){const l=this.attrs[a];return l===void 0?s:l}},addSetter(n,a,s,h){var l=r+t.Util._capitalize(a);n.prototype[l]||o.Factory.overWriteSetter(n,a,s,h)},overWriteSetter(n,a,s,h){var l=r+t.Util._capitalize(a);n.prototype[l]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,a)),this._setAttr(a,c),h&&h.call(this),this}},addComponentsGetterSetter(n,a,s,h,l){const c=s.length,p=t.Util._capitalize,y=e+p(a),_=r+p(a);n.prototype[y]=function(){const d={};for(let m=0;m<c;m++){const C=s[m];d[C]=this.getAttr(a+p(C))}return d};const g=(0,i.getComponentValidator)(s);n.prototype[_]=function(d){const m=this.attrs[a];h&&(d=h.call(this,d,a)),g&&g.call(this,d,a);for(const C in d)d.hasOwnProperty(C)&&this._setAttr(a+p(C),d[C]);return d||s.forEach(C=>{this._setAttr(a+p(C),void 0)}),this._fireChangeEvent(a,m,d),l&&l.call(this),this},o.Factory.addOverloadedGetterSetter(n,a)},addOverloadedGetterSetter(n,a){var s=t.Util._capitalize(a),h=r+s,l=e+s;n.prototype[a]=function(){return arguments.length?(this[h](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(n,a,s,h){t.Util.error("Adding deprecated "+a);const l=e+t.Util._capitalize(a),c=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[l]=function(){t.Util.error(c);const p=this.attrs[a];return p===void 0?s:p},o.Factory.addSetter(n,a,h,function(){t.Util.error(c)}),o.Factory.addOverloadedGetterSetter(n,a)},backCompat(n,a){t.Util.each(a,function(s,h){const l=n.prototype[h],c=e+t.Util._capitalize(s),p=r+t.Util._capitalize(s);function y(){l.apply(this,arguments),t.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}n.prototype[s]=y,n.prototype[c]=y,n.prototype[p]=y})},afterSetFilter(){this._filterUpToDate=!1}}}(Xr)),Xr}var ae={},oe={},Ps;function Vo(){if(Ps)return oe;Ps=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.HitContext=oe.SceneContext=oe.Context=void 0;const o=ut(),t=Z();function i(C){const f=[],u=C.length,b=o.Util;for(let S=0;S<u;S++){let T=C[S];b._isNumber(T)?T=Math.round(T*1e3)/1e3:b._isString(T)||(T=T+""),f.push(T)}return f}const e=",",r="(",n=")",a="([",s="])",h=";",l="()",c="=",p=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],y=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],_=100;let g=class{constructor(f){this.canvas=f,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(f){f.fillEnabled()&&this._fill(f)}_fill(f){}strokeShape(f){f.hasStroke()&&this._stroke(f)}_stroke(f){}fillStrokeShape(f){f.attrs.fillAfterStrokeEnabled?(this.strokeShape(f),this.fillShape(f)):(this.fillShape(f),this.strokeShape(f))}getTrace(f,u){let b=this.traceArr,S=b.length,T="",k,P,w,O;for(k=0;k<S;k++)P=b[k],w=P.method,w?(O=P.args,T+=w,f?T+=l:o.Util._isArray(O[0])?T+=a+O.join(e)+s:(u&&(O=O.map(E=>typeof E=="number"?Math.floor(E):E)),T+=r+O.join(e)+n)):(T+=P.property,f||(T+=c+P.val)),T+=h;return T}clearTrace(){this.traceArr=[]}_trace(f){let u=this.traceArr,b;u.push(f),b=u.length,b>=_&&u.shift()}reset(){const f=this.getCanvas().getPixelRatio();this.setTransform(1*f,0,0,1*f,0,0)}getCanvas(){return this.canvas}clear(f){const u=this.getCanvas();f?this.clearRect(f.x||0,f.y||0,f.width||0,f.height||0):this.clearRect(0,0,u.getWidth()/u.pixelRatio,u.getHeight()/u.pixelRatio)}_applyLineCap(f){const u=f.attrs.lineCap;u&&this.setAttr("lineCap",u)}_applyOpacity(f){const u=f.getAbsoluteOpacity();u!==1&&this.setAttr("globalAlpha",u)}_applyLineJoin(f){const u=f.attrs.lineJoin;u&&this.setAttr("lineJoin",u)}setAttr(f,u){this._context[f]=u}arc(f,u,b,S,T,k){this._context.arc(f,u,b,S,T,k)}arcTo(f,u,b,S,T){this._context.arcTo(f,u,b,S,T)}beginPath(){this._context.beginPath()}bezierCurveTo(f,u,b,S,T,k){this._context.bezierCurveTo(f,u,b,S,T,k)}clearRect(f,u,b,S){this._context.clearRect(f,u,b,S)}clip(...f){this._context.clip.apply(this._context,f)}closePath(){this._context.closePath()}createImageData(f,u){const b=arguments;if(b.length===2)return this._context.createImageData(f,u);if(b.length===1)return this._context.createImageData(f)}createLinearGradient(f,u,b,S){return this._context.createLinearGradient(f,u,b,S)}createPattern(f,u){return this._context.createPattern(f,u)}createRadialGradient(f,u,b,S,T,k){return this._context.createRadialGradient(f,u,b,S,T,k)}drawImage(f,u,b,S,T,k,P,w,O){const E=arguments,L=this._context;E.length===3?L.drawImage(f,u,b):E.length===5?L.drawImage(f,u,b,S,T):E.length===9&&L.drawImage(f,u,b,S,T,k,P,w,O)}ellipse(f,u,b,S,T,k,P,w){this._context.ellipse(f,u,b,S,T,k,P,w)}isPointInPath(f,u,b,S){return b?this._context.isPointInPath(b,f,u,S):this._context.isPointInPath(f,u,S)}fill(...f){this._context.fill.apply(this._context,f)}fillRect(f,u,b,S){this._context.fillRect(f,u,b,S)}strokeRect(f,u,b,S){this._context.strokeRect(f,u,b,S)}fillText(f,u,b,S){S?this._context.fillText(f,u,b,S):this._context.fillText(f,u,b)}measureText(f){return this._context.measureText(f)}getImageData(f,u,b,S){return this._context.getImageData(f,u,b,S)}lineTo(f,u){this._context.lineTo(f,u)}moveTo(f,u){this._context.moveTo(f,u)}rect(f,u,b,S){this._context.rect(f,u,b,S)}roundRect(f,u,b,S,T){this._context.roundRect(f,u,b,S,T)}putImageData(f,u,b){this._context.putImageData(f,u,b)}quadraticCurveTo(f,u,b,S){this._context.quadraticCurveTo(f,u,b,S)}restore(){this._context.restore()}rotate(f){this._context.rotate(f)}save(){this._context.save()}scale(f,u){this._context.scale(f,u)}setLineDash(f){this._context.setLineDash?this._context.setLineDash(f):"mozDash"in this._context?this._context.mozDash=f:"webkitLineDash"in this._context&&(this._context.webkitLineDash=f)}getLineDash(){return this._context.getLineDash()}setTransform(f,u,b,S,T,k){this._context.setTransform(f,u,b,S,T,k)}stroke(f){f?this._context.stroke(f):this._context.stroke()}strokeText(f,u,b,S){this._context.strokeText(f,u,b,S)}transform(f,u,b,S,T,k){this._context.transform(f,u,b,S,T,k)}translate(f,u){this._context.translate(f,u)}_enableTrace(){let f=this,u=p.length,b=this.setAttr,S,T;const k=function(P){let w=f[P],O;f[P]=function(){return T=i(Array.prototype.slice.call(arguments,0)),O=w.apply(f,arguments),f._trace({method:P,args:T}),O}};for(S=0;S<u;S++)k(p[S]);f.setAttr=function(){b.apply(f,arguments);const P=arguments[0];let w=arguments[1];(P==="shadowOffsetX"||P==="shadowOffsetY"||P==="shadowBlur")&&(w=w/this.canvas.getPixelRatio()),f._trace({property:P,val:w})}}_applyGlobalCompositeOperation(f){const u=f.attrs.globalCompositeOperation;!u||u==="source-over"||this.setAttr("globalCompositeOperation",u)}};oe.Context=g,y.forEach(function(C){Object.defineProperty(g.prototype,C,{get(){return this._context[C]},set(f){this._context[C]=f}})});class d extends g{constructor(f,{willReadFrequently:u=!1}={}){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:u})}_fillColor(f){const u=f.fill();this.setAttr("fillStyle",u),f._fillFunc(this)}_fillPattern(f){this.setAttr("fillStyle",f._getFillPattern()),f._fillFunc(this)}_fillLinearGradient(f){const u=f._getLinearGradient();u&&(this.setAttr("fillStyle",u),f._fillFunc(this))}_fillRadialGradient(f){const u=f._getRadialGradient();u&&(this.setAttr("fillStyle",u),f._fillFunc(this))}_fill(f){const u=f.fill(),b=f.getFillPriority();if(u&&b==="color"){this._fillColor(f);return}const S=f.getFillPatternImage();if(S&&b==="pattern"){this._fillPattern(f);return}const T=f.getFillLinearGradientColorStops();if(T&&b==="linear-gradient"){this._fillLinearGradient(f);return}const k=f.getFillRadialGradientColorStops();if(k&&b==="radial-gradient"){this._fillRadialGradient(f);return}u?this._fillColor(f):S?this._fillPattern(f):T?this._fillLinearGradient(f):k&&this._fillRadialGradient(f)}_strokeLinearGradient(f){const u=f.getStrokeLinearGradientStartPoint(),b=f.getStrokeLinearGradientEndPoint(),S=f.getStrokeLinearGradientColorStops(),T=this.createLinearGradient(u.x,u.y,b.x,b.y);if(S){for(let k=0;k<S.length;k+=2)T.addColorStop(S[k],S[k+1]);this.setAttr("strokeStyle",T)}}_stroke(f){const u=f.dash(),b=f.getStrokeScaleEnabled();if(f.hasStroke()){if(!b){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(f),u&&f.dashEnabled()&&(this.setLineDash(u),this.setAttr("lineDashOffset",f.dashOffset())),this.setAttr("lineWidth",f.strokeWidth()),f.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),f.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(f):this.setAttr("strokeStyle",f.stroke()),f._strokeFunc(this),b||this.restore()}}_applyShadow(f){var u,b,S;const T=(u=f.getShadowRGBA())!==null&&u!==void 0?u:"black",k=(b=f.getShadowBlur())!==null&&b!==void 0?b:5,P=(S=f.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},w=f.getAbsoluteScale(),O=this.canvas.getPixelRatio(),E=w.x*O,L=w.y*O;this.setAttr("shadowColor",T),this.setAttr("shadowBlur",k*Math.min(Math.abs(E),Math.abs(L))),this.setAttr("shadowOffsetX",P.x*E),this.setAttr("shadowOffsetY",P.y*L)}}oe.SceneContext=d;class m extends g{constructor(f){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:!0})}_fill(f){this.save(),this.setAttr("fillStyle",f.colorKey),f._fillFuncHit(this),this.restore()}strokeShape(f){f.hasHitStroke()&&this._stroke(f)}_stroke(f){if(f.hasHitStroke()){const u=f.getStrokeScaleEnabled();if(!u){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(f);const b=f.hitStrokeWidth(),S=b==="auto"?f.strokeWidth():b;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",f.colorKey),f._strokeFuncHit(this),u||this.restore()}}}return oe.HitContext=m,oe}var Os;function Mr(){if(Os)return ae;Os=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.HitCanvas=ae.SceneCanvas=ae.Canvas=void 0;const o=ut(),t=Vo(),i=Z();let e;function r(){if(e)return e;const h=o.Util.createCanvasElement(),l=h.getContext("2d");return e=function(){const c=i.Konva._global.devicePixelRatio||1,p=l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1;return c/p}(),o.Util.releaseCanvas(h),e}let n=class{constructor(l){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const p=(l||{}).pixelRatio||i.Konva.pixelRatio||r();this.pixelRatio=p,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(l){const c=this.pixelRatio;this.pixelRatio=l,this.setSize(this.getWidth()/c,this.getHeight()/c)}setWidth(l){this.width=this._canvas.width=l*this.pixelRatio,this._canvas.style.width=l+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}setHeight(l){this.height=this._canvas.height=l*this.pixelRatio,this._canvas.style.height=l+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}getWidth(){return this.width}getHeight(){return this.height}setSize(l,c){this.setWidth(l||0),this.setHeight(c||0)}toDataURL(l,c){try{return this._canvas.toDataURL(l,c)}catch(p){try{return this._canvas.toDataURL()}catch(y){return o.Util.error("Unable to get data URL. "+y.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ae.Canvas=n;class a extends n{constructor(l={width:0,height:0,willReadFrequently:!1}){super(l),this.context=new t.SceneContext(this,{willReadFrequently:l.willReadFrequently}),this.setSize(l.width,l.height)}}ae.SceneCanvas=a;class s extends n{constructor(l={width:0,height:0}){super(l),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(l.width,l.height)}}return ae.HitCanvas=s,ae}var Kr={},As;function Kn(){return As||(As=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const t=Z(),i=ut();o.DD={get isDragging(){let e=!1;return o.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return o.DD._dragElements.forEach(r=>{e=r.node}),e},_dragElements:new Map,_drag(e){const r=[];o.DD._dragElements.forEach((n,a)=>{const{node:s}=n,h=s.getStage();h.setPointersPositions(e),n.pointerId===void 0&&(n.pointerId=i.Util._getFirstPointerId(e));const l=h._changedPointerPositions.find(c=>c.id===n.pointerId);if(l){if(n.dragStatus!=="dragging"){const c=s.dragDistance();if(Math.max(Math.abs(l.x-n.startPointerPos.x),Math.abs(l.y-n.startPointerPos.y))<c||(s.startDrag({evt:e}),!s.isDragging()))return}s._setDragPosition(e,n),r.push(s)}}),r.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)})},_endDragBefore(e){const r=[];o.DD._dragElements.forEach(n=>{const{node:a}=n,s=a.getStage();if(e&&s.setPointersPositions(e),!s._changedPointerPositions.find(c=>c.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(o.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,n.dragStatus="stopped");const l=n.node.getLayer()||n.node instanceof t.Konva.Stage&&n.node;l&&r.indexOf(l)===-1&&r.push(l)}),r.forEach(n=>{n.draw()})},_endDragAfter(e){o.DD._dragElements.forEach((r,n)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:e},!0),r.dragStatus!=="dragging"&&o.DD._dragElements.delete(n)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))}(Kr)),Kr}var Es;function _t(){if(Es)return hi;Es=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Node=void 0;const o=ut(),t=Q(),i=Mr(),e=Z(),r=Kn(),n=J(),a="absoluteOpacity",s="allEventListeners",h="absoluteTransform",l="absoluteScale",c="canvas",p="Change",y="children",_="konva",g="listening",d="mouseenter",m="mouseleave",C="set",f="Shape",u=" ",b="stage",S="transform",T="Stage",k="visible",P=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(u);let w=1,O=class Sn{constructor(v){this._id=w++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(v),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(v){(v===S||v===h)&&this._cache.get(v)?this._cache.get(v).dirty=!0:v?this._cache.delete(v):this._cache.clear()}_getCache(v,A){let x=this._cache.get(v);return(x===void 0||(v===S||v===h)&&x.dirty===!0)&&(x=A.call(this),this._cache.set(v,x)),x}_calculate(v,A,x){if(!this._attachedDepsListeners.get(v)){const R=A.map(M=>M+"Change.konva").join(u);this.on(R,()=>{this._clearCache(v)}),this._attachedDepsListeners.set(v,!0)}return this._getCache(v,x)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(v){this._clearCache(v),v===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:v,filter:A,hit:x}=this._cache.get(c);o.Util.releaseCanvas(v,A,x),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(v){const A=v||{};let x={};(A.x===void 0||A.y===void 0||A.width===void 0||A.height===void 0)&&(x=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let R=Math.ceil(A.width||x.width),M=Math.ceil(A.height||x.height),D=A.pixelRatio,I=A.x===void 0?Math.floor(x.x):A.x,N=A.y===void 0?Math.floor(x.y):A.y,U=A.offset||0,q=A.drawBorder||!1,B=A.hitCanvasPixelRatio||1;if(!R||!M){o.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const V=Math.abs(Math.round(x.x)-I)>.5?1:0,W=Math.abs(Math.round(x.y)-N)>.5?1:0;R+=U*2+V,M+=U*2+W,I-=U,N-=U;const Y=new i.SceneCanvas({pixelRatio:D,width:R,height:M}),F=new i.SceneCanvas({pixelRatio:D,width:0,height:0,willReadFrequently:!0}),G=new i.HitCanvas({pixelRatio:B,width:R,height:M}),z=Y.getContext(),H=G.getContext();return G.isCache=!0,Y.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,A.imageSmoothingEnabled===!1&&(Y.getContext()._context.imageSmoothingEnabled=!1,F.getContext()._context.imageSmoothingEnabled=!1),z.save(),H.save(),z.translate(-I,-N),H.translate(-I,-N),this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(l),this.drawScene(Y,this),this.drawHit(G,this),this._isUnderCache=!1,z.restore(),H.restore(),q&&(z.save(),z.beginPath(),z.rect(0,0,R,M),z.closePath(),z.setAttr("strokeStyle","red"),z.setAttr("lineWidth",5),z.stroke(),z.restore()),this._cache.set(c,{scene:Y,filter:F,hit:G,x:I,y:N}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(v){throw new Error('abstract "getClientRect" method call')}_transformedRect(v,A){const x=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}];let R=1/0,M=1/0,D=-1/0,I=-1/0;const N=this.getAbsoluteTransform(A);return x.forEach(function(U){const q=N.point(U);R===void 0&&(R=D=q.x,M=I=q.y),R=Math.min(R,q.x),M=Math.min(M,q.y),D=Math.max(D,q.x),I=Math.max(I,q.y)}),{x:R,y:M,width:D-R,height:I-M}}_drawCachedSceneCanvas(v){v.save(),v._applyOpacity(this),v._applyGlobalCompositeOperation(this);const A=this._getCanvasCache();v.translate(A.x,A.y);const x=this._getCachedSceneCanvas(),R=x.pixelRatio;v.drawImage(x._canvas,0,0,x.width/R,x.height/R),v.restore()}_drawCachedHitCanvas(v){const A=this._getCanvasCache(),x=A.hit;v.save(),v.translate(A.x,A.y),v.drawImage(x._canvas,0,0,x.width/x.pixelRatio,x.height/x.pixelRatio),v.restore()}_getCachedSceneCanvas(){let v=this.filters(),A=this._getCanvasCache(),x=A.scene,R=A.filter,M=R.getContext(),D,I,N,U;if(v){if(!this._filterUpToDate){const q=x.pixelRatio;R.setSize(x.width/x.pixelRatio,x.height/x.pixelRatio);try{for(D=v.length,M.clear(),M.drawImage(x._canvas,0,0,x.getWidth()/q,x.getHeight()/q),I=M.getImageData(0,0,R.getWidth(),R.getHeight()),N=0;N<D;N++){if(U=v[N],typeof U!="function"){o.Util.error("Filter should be type of function, but got "+typeof U+" instead. Please check correct filters");continue}U.call(this,I),M.putImageData(I,0,0)}}catch(B){o.Util.error("Unable to apply filter. "+B.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return R}return x}on(v,A){if(this._cache&&this._cache.delete(s),arguments.length===3)return this._delegate.apply(this,arguments);let x=v.split(u),R=x.length,M,D,I,N,U;for(M=0;M<R;M++)D=x[M],I=D.split("."),N=I[0],U=I[1]||"",this.eventListeners[N]||(this.eventListeners[N]=[]),this.eventListeners[N].push({name:U,handler:A});return this}off(v,A){let x=(v||"").split(u),R=x.length,M,D,I,N,U,q;if(this._cache&&this._cache.delete(s),!v)for(D in this.eventListeners)this._off(D);for(M=0;M<R;M++)if(I=x[M],N=I.split("."),U=N[0],q=N[1],U)this.eventListeners[U]&&this._off(U,q,A);else for(D in this.eventListeners)this._off(D,q,A);return this}dispatchEvent(v){const A={target:this,type:v.type,evt:v};return this.fire(v.type,A),this}addEventListener(v,A){return this.on(v,function(x){A.call(this,x.evt)}),this}removeEventListener(v){return this.off(v),this}_delegate(v,A,x){const R=this;this.on(v,function(M){const D=M.target.findAncestors(A,!0,R);for(let I=0;I<D.length;I++)M=o.Util.cloneObject(M),M.currentTarget=D[I],x.call(D[I],M)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const v=this.getParent();v&&v.children&&(v.children.splice(this.index,1),v._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(v){const A="get"+o.Util._capitalize(v);return o.Util._isFunction(this[A])?this[A]():this.attrs[v]}getAncestors(){let v=this.getParent(),A=[];for(;v;)A.push(v),v=v.getParent();return A}getAttrs(){return this.attrs||{}}setAttrs(v){return this._batchTransformChanges(()=>{let A,x;if(!v)return this;for(A in v)A!==y&&(x=C+o.Util._capitalize(A),o.Util._isFunction(this[x])?this[x](v[A]):this._setAttr(A,v[A]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(v){if(!this.listening())return!1;const x=this.getParent();return x&&x!==v&&this!==v?x._isListening(v):!0}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(v){if(!this.visible())return!1;const x=this.getParent();return x&&x!==v&&this!==v?x._isVisible(v):!0}shouldDrawHit(v,A=!1){if(v)return this._isVisible(v)&&this._isListening(v);const x=this.getLayer();let R=!1;r.DD._dragElements.forEach(D=>{D.dragStatus==="dragging"&&(D.node.nodeType==="Stage"||D.node.getLayer()===x)&&(R=!0)});const M=!A&&!e.Konva.hitOnDragEnabled&&(R||e.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!M}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let v=this.getDepth(),A=this,x=0,R,M,D,I;function N(q){for(R=[],M=q.length,D=0;D<M;D++)I=q[D],x++,I.nodeType!==f&&(R=R.concat(I.getChildren().slice())),I._id===A._id&&(D=M);R.length>0&&R[0].getDepth()<=v&&N(R)}const U=this.getStage();return A.nodeType!==T&&U&&N(U.getChildren()),x}getDepth(){let v=0,A=this.parent;for(;A;)v++,A=A.parent;return v}_batchTransformChanges(v){this._batchingTransformChange=!0,v(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(v){return this._batchTransformChanges(()=>{this.x(v.x),this.y(v.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const v=this.getStage();if(!v)return null;const A=v.getPointerPosition();if(!A)return null;const x=this.getAbsoluteTransform().copy();return x.invert(),x.point(A)}getAbsolutePosition(v){let A=!1,x=this.parent;for(;x;){if(x.isCached()){A=!0;break}x=x.parent}A&&!v&&(v=!0);const R=this.getAbsoluteTransform(v).getMatrix(),M=new o.Transform,D=this.offset();return M.m=R.slice(),M.translate(D.x,D.y),M.getTranslation()}setAbsolutePosition(v){const{x:A,y:x,...R}=this._clearTransform();this.attrs.x=A,this.attrs.y=x,this._clearCache(S);const M=this._getAbsoluteTransform().copy();return M.invert(),M.translate(v.x,v.y),v={x:this.attrs.x+M.getTranslation().x,y:this.attrs.y+M.getTranslation().y},this._setTransform(R),this.setPosition({x:v.x,y:v.y}),this._clearCache(S),this._clearSelfAndDescendantCache(h),this}_setTransform(v){let A;for(A in v)this.attrs[A]=v[A]}_clearTransform(){const v={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,v}move(v){let A=v.x,x=v.y,R=this.x(),M=this.y();return A!==void 0&&(R+=A),x!==void 0&&(M+=x),this.setPosition({x:R,y:M}),this}_eachAncestorReverse(v,A){let x=[],R=this.getParent(),M,D;if(!(A&&A._id===this._id)){for(x.unshift(this);R&&(!A||R._id!==A._id);)x.unshift(R),R=R.parent;for(M=x.length,D=0;D<M;D++)v(x[D])}}rotate(v){return this.rotation(this.rotation()+v),this}moveToTop(){if(!this.parent)return o.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const v=this.index,A=this.parent.getChildren().length;return v<A-1?(this.parent.children.splice(v,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return o.Util.warn("Node has no parent. moveUp function is ignored."),!1;const v=this.index,A=this.parent.getChildren().length;return v<A-1?(this.parent.children.splice(v,1),this.parent.children.splice(v+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return o.Util.warn("Node has no parent. moveDown function is ignored."),!1;const v=this.index;return v>0?(this.parent.children.splice(v,1),this.parent.children.splice(v-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return o.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const v=this.index;return v>0?(this.parent.children.splice(v,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(v){if(!this.parent)return o.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(v<0||v>=this.parent.children.length)&&o.Util.warn("Unexpected value "+v+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const A=this.index;return this.parent.children.splice(A,1),this.parent.children.splice(v,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let v=this.opacity();const A=this.getParent();return A&&!A._isUnderCache&&(v*=A.getAbsoluteOpacity()),v}moveTo(v){return this.getParent()!==v&&(this._remove(),v.add(this)),this}toObject(){let v=this.getAttrs(),A,x,R,M,D;const I={attrs:{},className:this.getClassName()};for(A in v)x=v[A],D=o.Util.isObject(x)&&!o.Util._isPlainObject(x)&&!o.Util._isArray(x),!D&&(R=typeof this[A]=="function"&&this[A],delete v[A],M=R?R.call(this):null,v[A]=x,M!==x&&(I.attrs[A]=x));return o.Util._prepareToStringify(I)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(v,A,x){const R=[];A&&this._isMatch(v)&&R.push(this);let M=this.parent;for(;M;){if(M===x)return R;M._isMatch(v)&&R.push(M),M=M.parent}return R}isAncestorOf(v){return!1}findAncestor(v,A,x){return this.findAncestors(v,A,x)[0]}_isMatch(v){if(!v)return!1;if(typeof v=="function")return v(this);let A=v.replace(/ /g,"").split(","),x=A.length,R,M;for(R=0;R<x;R++)if(M=A[R],o.Util.isValidSelector(M)||(o.Util.warn('Selector "'+M+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),o.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),o.Util.warn("Konva is awesome, right?")),M.charAt(0)==="#"){if(this.id()===M.slice(1))return!0}else if(M.charAt(0)==="."){if(this.hasName(M.slice(1)))return!0}else if(this.className===M||this.nodeType===M)return!0;return!1}getLayer(){const v=this.getParent();return v?v.getLayer():null}getStage(){return this._getCache(b,this._getStage)}_getStage(){const v=this.getParent();return v?v.getStage():null}fire(v,A={},x){return A.target=A.target||this,x?this._fireAndBubble(v,A):this._fire(v,A),this}getAbsoluteTransform(v){return v?this._getAbsoluteTransform(v):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(v){let A;if(v)return A=new o.Transform,this._eachAncestorReverse(function(x){const R=x.transformsEnabled();R==="all"?A.multiply(x.getTransform()):R==="position"&&A.translate(x.x()-x.offsetX(),x.y()-x.offsetY())},v),A;{A=this._cache.get(h)||new o.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(A):A.reset();const x=this.transformsEnabled();if(x==="all")A.multiply(this.getTransform());else if(x==="position"){const R=this.attrs.x||0,M=this.attrs.y||0,D=this.attrs.offsetX||0,I=this.attrs.offsetY||0;A.translate(R-D,M-I)}return A.dirty=!1,A}}getAbsoluteScale(v){let A=this;for(;A;)A._isUnderCache&&(v=A),A=A.getParent();const R=this.getAbsoluteTransform(v).decompose();return{x:R.scaleX,y:R.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var v,A;const x=this._cache.get(S)||new o.Transform;x.reset();const R=this.x(),M=this.y(),D=e.Konva.getAngle(this.rotation()),I=(v=this.attrs.scaleX)!==null&&v!==void 0?v:1,N=(A=this.attrs.scaleY)!==null&&A!==void 0?A:1,U=this.attrs.skewX||0,q=this.attrs.skewY||0,B=this.attrs.offsetX||0,V=this.attrs.offsetY||0;return(R!==0||M!==0)&&x.translate(R,M),D!==0&&x.rotate(D),(U!==0||q!==0)&&x.skew(U,q),(I!==1||N!==1)&&x.scale(I,N),(B!==0||V!==0)&&x.translate(-1*B,-1*V),x.dirty=!1,x}clone(v){let A=o.Util.cloneObject(this.attrs),x,R,M,D,I;for(x in v)A[x]=v[x];const N=new this.constructor(A);for(x in this.eventListeners)for(R=this.eventListeners[x],M=R.length,D=0;D<M;D++)I=R[D],I.name.indexOf(_)<0&&(N.eventListeners[x]||(N.eventListeners[x]=[]),N.eventListeners[x].push(I));return N}_toKonvaCanvas(v){v=v||{};const A=this.getClientRect(),x=this.getStage(),R=v.x!==void 0?v.x:Math.floor(A.x),M=v.y!==void 0?v.y:Math.floor(A.y),D=v.pixelRatio||1,I=new i.SceneCanvas({width:v.width||Math.ceil(A.width)||(x?x.width():0),height:v.height||Math.ceil(A.height)||(x?x.height():0),pixelRatio:D}),N=I.getContext(),U=new i.SceneCanvas({width:I.width/I.pixelRatio+Math.abs(R),height:I.height/I.pixelRatio+Math.abs(M),pixelRatio:I.pixelRatio});return v.imageSmoothingEnabled===!1&&(N._context.imageSmoothingEnabled=!1),N.save(),(R||M)&&N.translate(-1*R,-1*M),this.drawScene(I,void 0,U),N.restore(),I}toCanvas(v){return this._toKonvaCanvas(v)._canvas}toDataURL(v){v=v||{};const A=v.mimeType||null,x=v.quality||null,R=this._toKonvaCanvas(v).toDataURL(A,x);return v.callback&&v.callback(R),R}toImage(v){return new Promise((A,x)=>{try{const R=v==null?void 0:v.callback;R&&delete v.callback,o.Util._urlToImage(this.toDataURL(v),function(M){A(M),R==null||R(M)})}catch(R){x(R)}})}toBlob(v){return new Promise((A,x)=>{try{const R=v==null?void 0:v.callback;R&&delete v.callback,this.toCanvas(v).toBlob(M=>{A(M),R==null||R(M)},v==null?void 0:v.mimeType,v==null?void 0:v.quality)}catch(R){x(R)}})}setSize(v){return this.width(v.width),this.height(v.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():e.Konva.dragDistance}_off(v,A,x){let R=this.eventListeners[v],M,D,I;for(M=0;M<R.length;M++)if(D=R[M].name,I=R[M].handler,(D!=="konva"||A==="konva")&&(!A||D===A)&&(!x||x===I)){if(R.splice(M,1),R.length===0){delete this.eventListeners[v];break}M--}}_fireChangeEvent(v,A,x){this._fire(v+p,{oldVal:A,newVal:x})}addName(v){if(!this.hasName(v)){const A=this.name(),x=A?A+" "+v:v;this.name(x)}return this}hasName(v){if(!v)return!1;const A=this.name();return A?(A||"").split(/\s/g).indexOf(v)!==-1:!1}removeName(v){const A=(this.name()||"").split(/\s/g),x=A.indexOf(v);return x!==-1&&(A.splice(x,1),this.name(A.join(" "))),this}setAttr(v,A){const x=this[C+o.Util._capitalize(v)];return o.Util._isFunction(x)?x.call(this,A):this._setAttr(v,A),this}_requestDraw(){if(e.Konva.autoDrawEnabled){const v=this.getLayer()||this.getStage();v==null||v.batchDraw()}}_setAttr(v,A){const x=this.attrs[v];x===A&&!o.Util.isObject(A)||(A==null?delete this.attrs[v]:this.attrs[v]=A,this._shouldFireChangeEvents&&this._fireChangeEvent(v,x,A),this._requestDraw())}_setComponentAttr(v,A,x){let R;x!==void 0&&(R=this.attrs[v],R||(this.attrs[v]=this.getAttr(v)),this.attrs[v][A]=x,this._fireChangeEvent(v,R,x))}_fireAndBubble(v,A,x){if(A&&this.nodeType===f&&(A.target=this),!((v===d||v===m)&&(x&&(this===x||this.isAncestorOf&&this.isAncestorOf(x))||this.nodeType==="Stage"&&!x))){this._fire(v,A);const M=(v===d||v===m)&&x&&x.isAncestorOf&&x.isAncestorOf(this)&&!x.isAncestorOf(this.parent);(A&&!A.cancelBubble||!A)&&this.parent&&this.parent.isListening()&&!M&&(x&&x.parent?this._fireAndBubble.call(this.parent,v,A,x):this._fireAndBubble.call(this.parent,v,A))}}_getProtoListeners(v){var A,x,R;const M=(A=this._cache.get(s))!==null&&A!==void 0?A:{};let D=M==null?void 0:M[v];if(D===void 0){D=[];let I=Object.getPrototypeOf(this);for(;I;){const N=(R=(x=I.eventListeners)===null||x===void 0?void 0:x[v])!==null&&R!==void 0?R:[];D.push(...N),I=Object.getPrototypeOf(I)}M[v]=D,this._cache.set(s,M)}return D}_fire(v,A){A=A||{},A.currentTarget=this,A.type=v;const x=this._getProtoListeners(v);if(x)for(var R=0;R<x.length;R++)x[R].handler.call(this,A);const M=this.eventListeners[v];if(M)for(var R=0;R<M.length;R++)M[R].handler.call(this,A)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(v){const A=v?v.pointerId:void 0,x=this.getStage(),R=this.getAbsolutePosition();if(!x)return;const M=x._getPointerById(A)||x._changedPointerPositions[0]||R;r.DD._dragElements.set(this._id,{node:this,startPointerPos:M,offset:{x:M.x-R.x,y:M.y-R.y},dragStatus:"ready",pointerId:A})}startDrag(v,A=!0){r.DD._dragElements.has(this._id)||this._createDragElement(v);const x=r.DD._dragElements.get(this._id);x.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:v&&v.evt},A)}_setDragPosition(v,A){const x=this.getStage()._getPointerById(A.pointerId);if(!x)return;let R={x:x.x-A.offset.x,y:x.y-A.offset.y};const M=this.dragBoundFunc();if(M!==void 0){const D=M.call(this,R,v);D?R=D:o.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==R.x||this._lastPos.y!==R.y)&&(this.setAbsolutePosition(R),this._requestDraw()),this._lastPos=R}stopDrag(v){const A=r.DD._dragElements.get(this._id);A&&(A.dragStatus="stopped"),r.DD._endDragBefore(v),r.DD._endDragAfter(v)}setDraggable(v){this._setAttr("draggable",v),this._dragChange()}isDragging(){const v=r.DD._dragElements.get(this._id);return v?v.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(v){if(!(!(v.evt.button!==void 0)||e.Konva.dragButtons.indexOf(v.evt.button)>=0)||this.isDragging())return;let R=!1;r.DD._dragElements.forEach(M=>{this.isAncestorOf(M.node)&&(R=!0)}),R||this._createDragElement(v)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const A=r.DD._dragElements.get(this._id),x=A&&A.dragStatus==="dragging",R=A&&A.dragStatus==="ready";x?this.stopDrag():R&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(v={x:0,y:0}){const A=this.getStage();if(!A)return!1;const x={x:-v.x,y:-v.y,width:A.width()+2*v.x,height:A.height()+2*v.y};return o.Util.haveIntersection(x,this.getClientRect())}static create(v,A){return o.Util._isString(v)&&(v=JSON.parse(v)),this._createNode(v,A)}static _createNode(v,A){let x=Sn.prototype.getClassName.call(v),R=v.children,M,D,I;A&&(v.attrs.container=A),e.Konva[x]||(o.Util.warn('Can not find a node with class name "'+x+'". Fallback to "Shape".'),x="Shape");const N=e.Konva[x];if(M=new N(v.attrs),R)for(D=R.length,I=0;I<D;I++)M.add(Sn._createNode(R[I]));return M}};hi.Node=O,O.prototype.nodeType="Node",O.prototype._attrsAffectingSize=[],O.prototype.eventListeners={},O.prototype.on.call(O.prototype,P,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(S),this._clearSelfAndDescendantCache(h)}),O.prototype.on.call(O.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(k)}),O.prototype.on.call(O.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),O.prototype.on.call(O.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const E=t.Factory.addGetterSetter;return E(O,"zIndex"),E(O,"absolutePosition"),E(O,"position"),E(O,"x",0,(0,n.getNumberValidator)()),E(O,"y",0,(0,n.getNumberValidator)()),E(O,"globalCompositeOperation","source-over",(0,n.getStringValidator)()),E(O,"opacity",1,(0,n.getNumberValidator)()),E(O,"name","",(0,n.getStringValidator)()),E(O,"id","",(0,n.getStringValidator)()),E(O,"rotation",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(O,"scale",["x","y"]),E(O,"scaleX",1,(0,n.getNumberValidator)()),E(O,"scaleY",1,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(O,"skew",["x","y"]),E(O,"skewX",0,(0,n.getNumberValidator)()),E(O,"skewY",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(O,"offset",["x","y"]),E(O,"offsetX",0,(0,n.getNumberValidator)()),E(O,"offsetY",0,(0,n.getNumberValidator)()),E(O,"dragDistance",void 0,(0,n.getNumberValidator)()),E(O,"width",0,(0,n.getNumberValidator)()),E(O,"height",0,(0,n.getNumberValidator)()),E(O,"listening",!0,(0,n.getBooleanValidator)()),E(O,"preventDefault",!0,(0,n.getBooleanValidator)()),E(O,"filters",void 0,function(L){return this._filterUpToDate=!1,L}),E(O,"visible",!0,(0,n.getBooleanValidator)()),E(O,"transformsEnabled","all",(0,n.getStringValidator)()),E(O,"size"),E(O,"dragBoundFunc"),E(O,"draggable",!1,(0,n.getBooleanValidator)()),t.Factory.backCompat(O,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),hi}var li={},Rs;function Fr(){if(Rs)return li;Rs=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Container=void 0;const o=Q(),t=_t(),i=J();let e=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(n){if(!n)return this.children||[];const a=this.children||[],s=[];return a.forEach(function(h){n(h)&&s.push(h)}),s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let s=0;s<n.length;s++)this.add(n[s]);return this}const a=n[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const a=this._generalFind(n,!0);return a.length>0?a[0]:void 0}_generalFind(n,a){const s=[];return this._descendants(h=>{const l=h._isMatch(n);return l&&s.push(h),!!(l&&a)}),s}_descendants(n){let a=!1;const s=this.getChildren();for(const h of s){if(a=n(h),a)return!0;if(h.hasChildren()&&(a=h._descendants(n),a))return!0}return!1}toObject(){const n=t.Node.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(a=>{n.children.push(a.toObject())}),n}isAncestorOf(n){let a=n.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(n){const a=t.Node.prototype.clone.call(this,n);return this.getChildren().forEach(function(s){a.add(s.clone())}),a}getAllIntersections(n){const a=[];return this.find("Shape").forEach(s=>{s.isVisible()&&s.intersects(n)&&a.push(s)}),a}_clearSelfAndDescendantCache(n){var a;super._clearSelfAndDescendantCache(n),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(s){s._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(a,s){a.index=s}),this._requestDraw()}drawScene(n,a,s){const h=this.getLayer(),l=n||h&&h.getCanvas(),c=l&&l.getContext(),p=this._getCanvasCache(),y=p&&p.scene,_=l&&l.isCache;if(!this.isVisible()&&!_)return this;if(y){c.save();const g=this.getAbsoluteTransform(a).getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,a,s);return this}drawHit(n,a){if(!this.shouldDrawHit(a))return this;const s=this.getLayer(),h=n||s&&s.hitCanvas,l=h&&h.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const y=this.getAbsoluteTransform(a).getMatrix();l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",h,a);return this}_drawChildren(n,a,s,h){var l;const c=a&&a.getContext(),p=this.clipWidth(),y=this.clipHeight(),_=this.clipFunc(),g=typeof p=="number"&&typeof y=="number"||_,d=s===this;if(g){c.save();const C=this.getAbsoluteTransform(s);let f=C.getMatrix();c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),c.beginPath();let u;if(_)u=_.call(this,c,this);else{const b=this.clipX(),S=this.clipY();c.rect(b||0,S||0,p,y)}c.clip.apply(c,u),f=C.copy().invert().getMatrix(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const m=!d&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";m&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(C){C[n](a,s,h)}),m&&c.restore(),g&&c.restore()}getClientRect(n={}){var a;const s=n.skipTransform,h=n.relativeTo;let l,c,p,y,_={x:1/0,y:1/0,width:0,height:0};const g=this;(a=this.children)===null||a===void 0||a.forEach(function(C){if(!C.visible())return;const f=C.getClientRect({relativeTo:g,skipShadow:n.skipShadow,skipStroke:n.skipStroke});f.width===0&&f.height===0||(l===void 0?(l=f.x,c=f.y,p=f.x+f.width,y=f.y+f.height):(l=Math.min(l,f.x),c=Math.min(c,f.y),p=Math.max(p,f.x+f.width),y=Math.max(y,f.y+f.height)))});const d=this.find("Shape");let m=!1;for(let C=0;C<d.length;C++)if(d[C]._isVisible(this)){m=!0;break}return m&&l!==void 0?_={x:l,y:c,width:p-l,height:y-c}:_={x:0,y:0,width:0,height:0},s?_:this._transformedRect(_,h)}};return li.Container=e,o.Factory.addComponentsGetterSetter(e,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(e,"clipX",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipY",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipWidth",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipHeight",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipFunc"),li}var jr={},pe={},ks;function zo(){if(ks)return pe;ks=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.getCapturedShape=e,pe.createEvent=r,pe.hasPointerCapture=n,pe.setPointerCapture=a,pe.releaseCapture=s;const o=Z(),t=new Map,i=o.Konva._global.PointerEvent!==void 0;function e(h){return t.get(h)}function r(h){return{evt:h,pointerId:h.pointerId}}function n(h,l){return t.get(h)===l}function a(h,l){s(h),l.getStage()&&(t.set(h,l),i&&l._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function s(h,l){const c=t.get(h);if(!c)return;const p=c.getStage();p&&p.content,t.delete(h),i&&c._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return pe}var Ms;function Wl(){return Ms||(Ms=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const t=ut(),i=Q(),e=Fr(),r=Z(),n=Mr(),a=Kn(),s=Z(),h=zo(),l="Stage",c="string",p="px",y="mouseout",_="mouseleave",g="mouseover",d="mouseenter",m="mousemove",C="mousedown",f="mouseup",u="pointermove",b="pointerdown",S="pointerup",T="pointercancel",k="lostpointercapture",P="pointerout",w="pointerleave",O="pointerover",E="pointerenter",L="contextmenu",v="touchstart",A="touchend",x="touchmove",R="touchcancel",M="wheel",D=5,I=[[d,"_pointerenter"],[C,"_pointerdown"],[m,"_pointermove"],[f,"_pointerup"],[_,"_pointerleave"],[v,"_pointerdown"],[x,"_pointermove"],[A,"_pointerup"],[R,"_pointercancel"],[g,"_pointerover"],[M,"_wheel"],[L,"_contextmenu"],[b,"_pointerdown"],[u,"_pointermove"],[S,"_pointerup"],[T,"_pointercancel"],[k,"_lostpointercapture"]],N={mouse:{[P]:y,[w]:_,[O]:g,[E]:d,[u]:m,[b]:C,[S]:f,[T]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[P]:"touchout",[w]:"touchleave",[O]:"touchover",[E]:"touchenter",[u]:x,[b]:v,[S]:A,[T]:R,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[P]:P,[w]:w,[O]:O,[E]:E,[u]:u,[b]:b,[S]:S,[T]:T,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},U=Y=>Y.indexOf("pointer")>=0?"pointer":Y.indexOf("touch")>=0?"touch":"mouse",q=Y=>{const F=U(Y);if(F==="pointer")return r.Konva.pointerEventsEnabled&&N.pointer;if(F==="touch")return N.touch;if(F==="mouse")return N.mouse};function B(Y={}){return(Y.clipFunc||Y.clipWidth||Y.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Y}const V="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class W extends e.Container{constructor(F){super(B(F)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{B(this.attrs)}),this._checkVisibility()}_validateAdd(F){const G=F.getType()==="Layer",z=F.getType()==="FastLayer";G||z||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const F=this.visible()?"":"none";this.content.style.display=F}setContainer(F){if(typeof F===c){if(F.charAt(0)==="."){const z=F.slice(1);F=document.getElementsByClassName(z)[0]}else{var G;F.charAt(0)!=="#"?G=F:G=F.slice(1),F=document.getElementById(G)}if(!F)throw"Can not find container in document with id "+G}return this._setAttr("container",F),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),F.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const F=this.children,G=F.length;for(let z=0;z<G;z++)F[z].clear();return this}clone(F){return F||(F={}),F.container=typeof document<"u"&&document.createElement("div"),e.Container.prototype.clone.call(this,F)}destroy(){super.destroy();const F=this.content;F&&t.Util._isInDocument(F)&&this.container().removeChild(F);const G=o.stages.indexOf(this);return G>-1&&o.stages.splice(G,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const F=this._pointerPositions[0]||this._changedPointerPositions[0];return F?{x:F.x,y:F.y}:(t.Util.warn(V),null)}_getPointerById(F){return this._pointerPositions.find(G=>G.id===F)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(F){F=F||{},F.x=F.x||0,F.y=F.y||0,F.width=F.width||this.width(),F.height=F.height||this.height();const G=new n.SceneCanvas({width:F.width,height:F.height,pixelRatio:F.pixelRatio||1}),z=G.getContext()._context,H=this.children;return(F.x||F.y)&&z.translate(-1*F.x,-1*F.y),H.forEach(function(X){if(!X.isVisible())return;const K=X._toKonvaCanvas(F);z.drawImage(K._canvas,F.x,F.y,K.getWidth()/K.getPixelRatio(),K.getHeight()/K.getPixelRatio())}),G}getIntersection(F){if(!F)return null;const G=this.children,z=G.length,H=z-1;for(let X=H;X>=0;X--){const K=G[X].getIntersection(F);if(K)return K}return null}_resizeDOM(){const F=this.width(),G=this.height();this.content&&(this.content.style.width=F+p,this.content.style.height=G+p),this.bufferCanvas.setSize(F,G),this.bufferHitCanvas.setSize(F,G),this.children.forEach(z=>{z.setSize({width:F,height:G}),z.draw()})}add(F,...G){if(arguments.length>1){for(let H=0;H<arguments.length;H++)this.add(arguments[H]);return this}super.add(F);const z=this.children.length;return z>D&&t.Util.warn("The stage has "+z+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),F.setSize({width:this.width(),height:this.height()}),F.draw(),r.Konva.isBrowser&&this.content.appendChild(F.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(F){return h.hasPointerCapture(F,this)}setPointerCapture(F){h.setPointerCapture(F,this)}releaseCapture(F){h.releaseCapture(F,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&I.forEach(([F,G])=>{this.content.addEventListener(F,z=>{this[G](z)},{passive:!1})})}_pointerenter(F){this.setPointersPositions(F);const G=q(F.type);G&&this._fire(G.pointerenter,{evt:F,target:this,currentTarget:this})}_pointerover(F){this.setPointersPositions(F);const G=q(F.type);G&&this._fire(G.pointerover,{evt:F,target:this,currentTarget:this})}_getTargetShape(F){let G=this[F+"targetShape"];return G&&!G.getStage()&&(G=null),G}_pointerleave(F){const G=q(F.type),z=U(F.type);if(!G)return;this.setPointersPositions(F);const H=this._getTargetShape(z),X=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;H&&X?(H._fireAndBubble(G.pointerout,{evt:F}),H._fireAndBubble(G.pointerleave,{evt:F}),this._fire(G.pointerleave,{evt:F,target:this,currentTarget:this}),this[z+"targetShape"]=null):X&&(this._fire(G.pointerleave,{evt:F,target:this,currentTarget:this}),this._fire(G.pointerout,{evt:F,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(F){const G=q(F.type),z=U(F.type);if(!G)return;this.setPointersPositions(F);let H=!1;this._changedPointerPositions.forEach(X=>{const K=this.getIntersection(X);if(a.DD.justDragged=!1,r.Konva["_"+z+"ListenClick"]=!0,!K||!K.isListening()){this[z+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&K.setPointerCapture(X.id),this[z+"ClickStartShape"]=K,K._fireAndBubble(G.pointerdown,{evt:F,pointerId:X.id}),H=!0;const et=F.type.indexOf("touch")>=0;K.preventDefault()&&F.cancelable&&et&&F.preventDefault()}),H||this._fire(G.pointerdown,{evt:F,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(F){const G=q(F.type),z=U(F.type);if(!G||(r.Konva.isDragging()&&a.DD.node.preventDefault()&&F.cancelable&&F.preventDefault(),this.setPointersPositions(F),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const X={};let K=!1;const et=this._getTargetShape(z);this._changedPointerPositions.forEach(rt=>{const j=h.getCapturedShape(rt.id)||this.getIntersection(rt),Ct=rt.id,nt={evt:F,pointerId:Ct},ft=et!==j;if(ft&&et&&(et._fireAndBubble(G.pointerout,{...nt},j),et._fireAndBubble(G.pointerleave,{...nt},j)),j){if(X[j._id])return;X[j._id]=!0}j&&j.isListening()?(K=!0,ft&&(j._fireAndBubble(G.pointerover,{...nt},et),j._fireAndBubble(G.pointerenter,{...nt},et),this[z+"targetShape"]=j),j._fireAndBubble(G.pointermove,{...nt})):et&&(this._fire(G.pointerover,{evt:F,target:this,currentTarget:this,pointerId:Ct}),this[z+"targetShape"]=null)}),K||this._fire(G.pointermove,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(F){const G=q(F.type),z=U(F.type);if(!G)return;this.setPointersPositions(F);const H=this[z+"ClickStartShape"],X=this[z+"ClickEndShape"],K={};let et=!1;this._changedPointerPositions.forEach(rt=>{const j=h.getCapturedShape(rt.id)||this.getIntersection(rt);if(j){if(j.releaseCapture(rt.id),K[j._id])return;K[j._id]=!0}const Ct=rt.id,nt={evt:F,pointerId:Ct};let ft=!1;r.Konva["_"+z+"InDblClickWindow"]?(ft=!0,clearTimeout(this[z+"DblTimeout"])):a.DD.justDragged||(r.Konva["_"+z+"InDblClickWindow"]=!0,clearTimeout(this[z+"DblTimeout"])),this[z+"DblTimeout"]=setTimeout(function(){r.Konva["_"+z+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),j&&j.isListening()?(et=!0,this[z+"ClickEndShape"]=j,j._fireAndBubble(G.pointerup,{...nt}),r.Konva["_"+z+"ListenClick"]&&H&&H===j&&(j._fireAndBubble(G.pointerclick,{...nt}),ft&&X&&X===j&&j._fireAndBubble(G.pointerdblclick,{...nt}))):(this[z+"ClickEndShape"]=null,r.Konva["_"+z+"ListenClick"]&&this._fire(G.pointerclick,{evt:F,target:this,currentTarget:this,pointerId:Ct}),ft&&this._fire(G.pointerdblclick,{evt:F,target:this,currentTarget:this,pointerId:Ct}))}),et||this._fire(G.pointerup,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+z+"ListenClick"]=!1,F.cancelable&&z!=="touch"&&z!=="pointer"&&F.preventDefault()}_contextmenu(F){this.setPointersPositions(F);const G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(L,{evt:F}):this._fire(L,{evt:F,target:this,currentTarget:this})}_wheel(F){this.setPointersPositions(F);const G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(M,{evt:F}):this._fire(M,{evt:F,target:this,currentTarget:this})}_pointercancel(F){this.setPointersPositions(F);const G=h.getCapturedShape(F.pointerId)||this.getIntersection(this.getPointerPosition());G&&G._fireAndBubble(S,h.createEvent(F)),h.releaseCapture(F.pointerId)}_lostpointercapture(F){h.releaseCapture(F.pointerId)}setPointersPositions(F){const G=this._getContentPosition();let z=null,H=null;F=F||window.event,F.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(F.touches,X=>{this._pointerPositions.push({id:X.identifier,x:(X.clientX-G.left)/G.scaleX,y:(X.clientY-G.top)/G.scaleY})}),Array.prototype.forEach.call(F.changedTouches||F.touches,X=>{this._changedPointerPositions.push({id:X.identifier,x:(X.clientX-G.left)/G.scaleX,y:(X.clientY-G.top)/G.scaleY})})):(z=(F.clientX-G.left)/G.scaleX,H=(F.clientY-G.top)/G.scaleY,this.pointerPos={x:z,y:H},this._pointerPositions=[{x:z,y:H,id:t.Util._getFirstPointerId(F)}],this._changedPointerPositions=[{x:z,y:H,id:t.Util._getFirstPointerId(F)}])}_setPointerPosition(F){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(F)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const F=this.content.getBoundingClientRect();return{top:F.top,left:F.left,scaleX:F.width/this.content.clientWidth||1,scaleY:F.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new n.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new n.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const F=this.container();if(!F)throw"Stage has no container. A container is required.";F.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),F.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(F){F.batchDraw()}),this}}o.Stage=W,W.prototype.nodeType=l,(0,s._registerNode)(W),i.Factory.addGetterSetter(W,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(Y=>{Y.batchDraw()})})}(jr)),jr}var ci={},$r={},Fs;function vt(){return Fs||(Fs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const t=Z(),i=ut(),e=Q(),r=_t(),n=J(),a=Z(),s=zo(),h="hasShadow",l="shadowRGBA",c="patternImage",p="linearGradient",y="radialGradient";let _;function g(){return _||(_=i.Util.createCanvasElement().getContext("2d"),_)}o.shapes={};function d(w){const O=this.attrs.fillRule;O?w.fill(O):w.fill()}function m(w){w.stroke()}function C(w){const O=this.attrs.fillRule;O?w.fill(O):w.fill()}function f(w){w.stroke()}function u(){this._clearCache(h)}function b(){this._clearCache(l)}function S(){this._clearCache(c)}function T(){this._clearCache(p)}function k(){this._clearCache(y)}class P extends r.Node{constructor(O){super(O);let E;for(;E=i.Util.getRandomColor(),!(E&&!(E in o.shapes)););this.colorKey=E,o.shapes[E]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const E=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(E&&E.setTransform){const L=new i.Transform;L.translate(this.fillPatternX(),this.fillPatternY()),L.rotate(t.Konva.getAngle(this.fillPatternRotation())),L.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),L.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const v=L.getMatrix(),A=typeof DOMMatrix>"u"?{a:v[0],b:v[1],c:v[2],d:v[3],e:v[4],f:v[5]}:new DOMMatrix(v);E.setTransform(A)}return E}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const O=this.fillLinearGradientColorStops();if(O){const E=g(),L=this.fillLinearGradientStartPoint(),v=this.fillLinearGradientEndPoint(),A=E.createLinearGradient(L.x,L.y,v.x,v.y);for(let x=0;x<O.length;x+=2)A.addColorStop(O[x],O[x+1]);return A}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){const O=this.fillRadialGradientColorStops();if(O){const E=g(),L=this.fillRadialGradientStartPoint(),v=this.fillRadialGradientEndPoint(),A=E.createRadialGradient(L.x,L.y,this.fillRadialGradientStartRadius(),v.x,v.y,this.fillRadialGradientEndRadius());for(let x=0;x<O.length;x+=2)A.addColorStop(O[x],O[x+1]);return A}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const O=i.Util.colorToRGBA(this.shadowColor());if(O)return"rgba("+O.r+","+O.g+","+O.b+","+O.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const O=this.hitStrokeWidth();return O==="auto"?this.hasStroke():this.strokeEnabled()&&!!O}intersects(O){const E=this.getStage();if(!E)return!1;const L=E.bufferHitCanvas;return L.getContext().clear(),this.drawHit(L,void 0,!0),L.context.getImageData(Math.round(O.x),Math.round(O.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(O){var E;if(!((E=this.attrs.perfectDrawEnabled)!==null&&E!==void 0?E:!0))return!1;const v=O||this.hasFill(),A=this.hasStroke(),x=this.getAbsoluteOpacity()!==1;if(v&&A&&x)return!0;const R=this.hasShadow(),M=this.shadowForStrokeEnabled();return!!(v&&A&&R&&M)}setStrokeHitEnabled(O){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),O?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const O=this.size();return{x:this._centroid?-O.width/2:0,y:this._centroid?-O.height/2:0,width:O.width,height:O.height}}getClientRect(O={}){let E=!1,L=this.getParent();for(;L;){if(L.isCached()){E=!0;break}L=L.getParent()}const v=O.skipTransform,A=O.relativeTo||E&&this.getStage()||void 0,x=this.getSelfRect(),M=!O.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,D=x.width+M,I=x.height+M,N=!O.skipShadow&&this.hasShadow(),U=N?this.shadowOffsetX():0,q=N?this.shadowOffsetY():0,B=D+Math.abs(U),V=I+Math.abs(q),W=N&&this.shadowBlur()||0,Y=B+W*2,F=V+W*2,G={width:Y,height:F,x:-(M/2+W)+Math.min(U,0)+x.x,y:-(M/2+W)+Math.min(q,0)+x.y};return v?G:this._transformedRect(G,A)}drawScene(O,E,L){const v=this.getLayer();let A=O||v.getCanvas(),x=A.getContext(),R=this._getCanvasCache(),M=this.getSceneFunc(),D=this.hasShadow(),I,N;const U=A.isCache,q=E===this;if(!this.isVisible()&&!q)return this;if(R){x.save();const V=this.getAbsoluteTransform(E).getMatrix();return x.transform(V[0],V[1],V[2],V[3],V[4],V[5]),this._drawCachedSceneCanvas(x),x.restore(),this}if(!M)return this;if(x.save(),this._useBufferCanvas()&&!U){I=this.getStage();const V=L||I.bufferCanvas;N=V.getContext(),N.clear(),N.save(),N._applyLineJoin(this);var B=this.getAbsoluteTransform(E).getMatrix();N.transform(B[0],B[1],B[2],B[3],B[4],B[5]),M.call(this,N,this),N.restore();const W=V.pixelRatio;D&&x._applyShadow(this),x._applyOpacity(this),x._applyGlobalCompositeOperation(this),x.drawImage(V._canvas,0,0,V.width/W,V.height/W)}else{if(x._applyLineJoin(this),!q){var B=this.getAbsoluteTransform(E).getMatrix();x.transform(B[0],B[1],B[2],B[3],B[4],B[5]),x._applyOpacity(this),x._applyGlobalCompositeOperation(this)}D&&x._applyShadow(this),M.call(this,x,this)}return x.restore(),this}drawHit(O,E,L=!1){if(!this.shouldDrawHit(E,L))return this;const v=this.getLayer(),A=O||v.hitCanvas,x=A&&A.getContext(),R=this.hitFunc()||this.sceneFunc(),M=this._getCanvasCache(),D=M&&M.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),D){x.save();const N=this.getAbsoluteTransform(E).getMatrix();return x.transform(N[0],N[1],N[2],N[3],N[4],N[5]),this._drawCachedHitCanvas(x),x.restore(),this}if(!R)return this;if(x.save(),x._applyLineJoin(this),!(this===E)){const N=this.getAbsoluteTransform(E).getMatrix();x.transform(N[0],N[1],N[2],N[3],N[4],N[5])}return R.call(this,x,this),x.restore(),this}drawHitFromCache(O=0){const E=this._getCanvasCache(),L=this._getCachedSceneCanvas(),v=E.hit,A=v.getContext(),x=v.getWidth(),R=v.getHeight();A.clear(),A.drawImage(L._canvas,0,0,x,R);try{const M=A.getImageData(0,0,x,R),D=M.data,I=D.length,N=i.Util._hexToRgb(this.colorKey);for(let U=0;U<I;U+=4)D[U+3]>O?(D[U]=N.r,D[U+1]=N.g,D[U+2]=N.b,D[U+3]=255):D[U+3]=0;A.putImageData(M,0,0)}catch(M){i.Util.error("Unable to draw hit graph from cached scene canvas. "+M.message)}return this}hasPointerCapture(O){return s.hasPointerCapture(O,this)}setPointerCapture(O){s.setPointerCapture(O,this)}releaseCapture(O){s.releaseCapture(O,this)}}o.Shape=P,P.prototype._fillFunc=d,P.prototype._strokeFunc=m,P.prototype._fillFuncHit=C,P.prototype._strokeFuncHit=f,P.prototype._centroid=!1,P.prototype.nodeType="Shape",(0,a._registerNode)(P),P.prototype.eventListeners={},P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",u),P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",T),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",k),e.Factory.addGetterSetter(P,"stroke",void 0,(0,n.getStringOrGradientValidator)()),e.Factory.addGetterSetter(P,"strokeWidth",2,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"fillAfterStrokeEnabled",!1),e.Factory.addGetterSetter(P,"hitStrokeWidth","auto",(0,n.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(P,"strokeHitEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(P,"perfectDrawEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(P,"shadowForStrokeEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(P,"lineJoin"),e.Factory.addGetterSetter(P,"lineCap"),e.Factory.addGetterSetter(P,"sceneFunc"),e.Factory.addGetterSetter(P,"hitFunc"),e.Factory.addGetterSetter(P,"dash"),e.Factory.addGetterSetter(P,"dashOffset",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"shadowColor",void 0,(0,n.getStringValidator)()),e.Factory.addGetterSetter(P,"shadowBlur",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"shadowOpacity",1,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(P,"shadowOffset",["x","y"]),e.Factory.addGetterSetter(P,"shadowOffsetX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"shadowOffsetY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"fillPatternImage"),e.Factory.addGetterSetter(P,"fill",void 0,(0,n.getStringOrGradientValidator)()),e.Factory.addGetterSetter(P,"fillPatternX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"fillPatternY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"fillLinearGradientColorStops"),e.Factory.addGetterSetter(P,"strokeLinearGradientColorStops"),e.Factory.addGetterSetter(P,"fillRadialGradientStartRadius",0),e.Factory.addGetterSetter(P,"fillRadialGradientEndRadius",0),e.Factory.addGetterSetter(P,"fillRadialGradientColorStops"),e.Factory.addGetterSetter(P,"fillPatternRepeat","repeat"),e.Factory.addGetterSetter(P,"fillEnabled",!0),e.Factory.addGetterSetter(P,"strokeEnabled",!0),e.Factory.addGetterSetter(P,"shadowEnabled",!0),e.Factory.addGetterSetter(P,"dashEnabled",!0),e.Factory.addGetterSetter(P,"strokeScaleEnabled",!0),e.Factory.addGetterSetter(P,"fillPriority","color"),e.Factory.addComponentsGetterSetter(P,"fillPatternOffset",["x","y"]),e.Factory.addGetterSetter(P,"fillPatternOffsetX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"fillPatternOffsetY",0,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(P,"fillPatternScale",["x","y"]),e.Factory.addGetterSetter(P,"fillPatternScaleX",1,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(P,"fillPatternScaleY",1,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(P,"fillLinearGradientStartPoint",["x","y"]),e.Factory.addComponentsGetterSetter(P,"strokeLinearGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(P,"fillLinearGradientStartPointX",0),e.Factory.addGetterSetter(P,"strokeLinearGradientStartPointX",0),e.Factory.addGetterSetter(P,"fillLinearGradientStartPointY",0),e.Factory.addGetterSetter(P,"strokeLinearGradientStartPointY",0),e.Factory.addComponentsGetterSetter(P,"fillLinearGradientEndPoint",["x","y"]),e.Factory.addComponentsGetterSetter(P,"strokeLinearGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(P,"fillLinearGradientEndPointX",0),e.Factory.addGetterSetter(P,"strokeLinearGradientEndPointX",0),e.Factory.addGetterSetter(P,"fillLinearGradientEndPointY",0),e.Factory.addGetterSetter(P,"strokeLinearGradientEndPointY",0),e.Factory.addComponentsGetterSetter(P,"fillRadialGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(P,"fillRadialGradientStartPointX",0),e.Factory.addGetterSetter(P,"fillRadialGradientStartPointY",0),e.Factory.addComponentsGetterSetter(P,"fillRadialGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(P,"fillRadialGradientEndPointX",0),e.Factory.addGetterSetter(P,"fillRadialGradientEndPointY",0),e.Factory.addGetterSetter(P,"fillPatternRotation",0),e.Factory.addGetterSetter(P,"fillRule",void 0,(0,n.getStringValidator)()),e.Factory.backCompat(P,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}($r)),$r}var Ls;function qo(){if(Ls)return ci;Ls=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Layer=void 0;const o=ut(),t=Fr(),i=_t(),e=Q(),r=Mr(),n=J(),a=vt(),s=Z(),h="#",l="beforeDraw",c="draw",p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],y=p.length;let _=class extends t.Container{constructor(d){super(d),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(d){return this.getContext().clear(d),this.getHitCanvas().getContext().clear(d),this}setZIndex(d){super.setZIndex(d);const m=this.getStage();return m&&m.content&&(m.content.removeChild(this.getNativeCanvasElement()),d<m.children.length-1?m.content.insertBefore(this.getNativeCanvasElement(),m.children[d+1].getCanvas()._canvas):m.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const d=this.getStage();return d&&d.content&&(d.content.removeChild(this.getNativeCanvasElement()),d.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const m=this.getStage();return!m||!m.content?!1:(m.content.removeChild(this.getNativeCanvasElement()),this.index<m.children.length-1?m.content.insertBefore(this.getNativeCanvasElement(),m.children[this.index+1].getCanvas()._canvas):m.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const d=this.getStage();if(d){const m=d.children;d.content&&(d.content.removeChild(this.getNativeCanvasElement()),d.content.insertBefore(this.getNativeCanvasElement(),m[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const d=this.getStage();if(d){const m=d.children;d.content&&(d.content.removeChild(this.getNativeCanvasElement()),d.content.insertBefore(this.getNativeCanvasElement(),m[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const d=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),d&&d.parentNode&&o.Util._isInDocument(d)&&d.parentNode.removeChild(d),this}getStage(){return this.parent}setSize({width:d,height:m}){return this.canvas.setSize(d,m),this.hitCanvas.setSize(d,m),this._setSmoothEnabled(),this}_validateAdd(d){const m=d.getType();m!=="Group"&&m!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(d){return d=d||{},d.width=d.width||this.getWidth(),d.height=d.height||this.getHeight(),d.x=d.x!==void 0?d.x:this.x(),d.y=d.y!==void 0?d.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,d)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(d){if(!this.isListening()||!this.isVisible())return null;let m=1,C=!1;for(;;){for(let f=0;f<y;f++){const u=p[f],b=this._getIntersection({x:d.x+u.x*m,y:d.y+u.y*m}),S=b.shape;if(S)return S;if(C=!!b.antialiased,!b.antialiased)break}if(C)m+=1;else return null}}_getIntersection(d){const m=this.hitCanvas.pixelRatio,C=this.hitCanvas.context.getImageData(Math.round(d.x*m),Math.round(d.y*m),1,1).data,f=C[3];if(f===255){const u=o.Util._rgbToHex(C[0],C[1],C[2]),b=a.shapes[h+u];return b?{shape:b}:{antialiased:!0}}else if(f>0)return{antialiased:!0};return{}}drawScene(d,m){const C=this.getLayer(),f=d||C&&C.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&f.getContext().clear(),t.Container.prototype.drawScene.call(this,f,m),this._fire(c,{node:this}),this}drawHit(d,m){const C=this.getLayer(),f=d||C&&C.hitCanvas;return C&&C.clearBeforeDraw()&&C.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,f,m),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(d){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(d)}getHitGraphEnabled(d){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const d=this.parent;!!this.hitCanvas._canvas.parentNode?d.content.removeChild(this.hitCanvas._canvas):d.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return ci.Layer=_,_.prototype.nodeType="Layer",(0,s._registerNode)(_),e.Factory.addGetterSetter(_,"imageSmoothingEnabled",!0),e.Factory.addGetterSetter(_,"clearBeforeDraw",!0),e.Factory.addGetterSetter(_,"hitGraphEnabled",!0,(0,n.getBooleanValidator)()),ci}var di={},Ds;function Yl(){if(Ds)return di;Ds=1,Object.defineProperty(di,"__esModule",{value:!0}),di.FastLayer=void 0;const o=ut(),t=qo(),i=Z();let e=class extends t.Layer{constructor(n){super(n),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return di.FastLayer=e,e.prototype.nodeType="FastLayer",(0,i._registerNode)(e),di}var ui={},Ns;function jn(){if(Ns)return ui;Ns=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Group=void 0;const o=ut(),t=Fr(),i=Z();let e=class extends t.Container{_validateAdd(n){const a=n.getType();a!=="Group"&&a!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}};return ui.Group=e,e.prototype.nodeType="Group",(0,i._registerNode)(e),ui}var fi={},Gs;function $n(){if(Gs)return fi;Gs=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Animation=void 0;const o=Z(),t=ut(),i=function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}}();let e=class Xe{constructor(n,a){this.id=Xe.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=n,this.setLayers(a)}setLayers(n){let a=[];return n&&(a=Array.isArray(n)?n:[n]),this.layers=a,this}getLayers(){return this.layers}addLayer(n){const a=this.layers,s=a.length;for(let h=0;h<s;h++)if(a[h]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){const a=Xe.animations,s=a.length;for(let h=0;h<s;h++)if(a[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),Xe._addAnimation(this),this}stop(){return Xe._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){const a=n.id,s=this.animations,h=s.length;for(let l=0;l<h;l++)if(s[l].id===a){this.animations.splice(l,1);break}}static _runFrames(){const n={},a=this.animations;for(let s=0;s<a.length;s++){const h=a[s],l=h.layers,c=h.func;h._updateFrameObject(i());const p=l.length;let y;if(c?y=c.call(h,h.frame)!==!1:y=!0,!!y)for(let _=0;_<p;_++){const g=l[_];g._id!==void 0&&(n[g._id]=g)}}for(const s in n)n.hasOwnProperty(s)&&n[s].batchDraw()}static _animationLoop(){const n=Xe;n.animations.length?(n._runFrames(),t.Util.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return fi.Animation=e,e.animations=[],e.animIdCounter=0,e.animRunning=!1,fi}var Zr={},Is;function Xl(){return Is||(Is=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const t=ut(),i=$n(),e=_t(),r=Z(),n={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,s=2,h=3,l=["fill","stroke","shadowColor"];let c=0;class p{constructor(g,d,m,C,f,u,b){this.prop=g,this.propFunc=d,this.begin=C,this._pos=C,this.duration=u,this._change=0,this.prevPos=0,this.yoyo=b,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=m,this._change=f-this.begin,this.pause()}fire(g){const d=this[g];d&&d()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===s?this.setTime(g):this.state===h&&this.setTime(this.duration-g)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(g){const d=this,m=g.node,C=m._id,f=g.easing||o.Easings.Linear,u=!!g.yoyo;let b,S;typeof g.duration>"u"?b=.3:g.duration===0?b=.001:b=g.duration,this.node=m,this._id=c++;const T=m.getLayer()||(m instanceof r.Konva.Stage?m.getLayers():null);T||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){d.tween.onEnterFrame()},T),this.tween=new p(S,function(k){d._tweenFunc(k)},f,0,1,b*1e3,u),this._addListeners(),y.attrs[C]||(y.attrs[C]={}),y.attrs[C][this._id]||(y.attrs[C][this._id]={}),y.tweens[C]||(y.tweens[C]={});for(S in g)n[S]===void 0&&this._addAttr(S,g[S]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,d){const m=this.node,C=m._id;let f,u,b,S,T;const k=y.tweens[C][g];k&&delete y.attrs[C][k][g];let P=m.getAttr(g);if(t.Util._isArray(d))if(f=[],u=Math.max(d.length,P.length),g==="points"&&d.length!==P.length&&(d.length>P.length?(S=P,P=t.Util._prepareArrayForTween(P,d,m.closed())):(b=d,d=t.Util._prepareArrayForTween(d,P,m.closed()))),g.indexOf("fill")===0)for(let w=0;w<u;w++)if(w%2===0)f.push(d[w]-P[w]);else{const O=t.Util.colorToRGBA(P[w]);T=t.Util.colorToRGBA(d[w]),P[w]=O,f.push({r:T.r-O.r,g:T.g-O.g,b:T.b-O.b,a:T.a-O.a})}else for(let w=0;w<u;w++)f.push(d[w]-P[w]);else l.indexOf(g)!==-1?(P=t.Util.colorToRGBA(P),T=t.Util.colorToRGBA(d),f={r:T.r-P.r,g:T.g-P.g,b:T.b-P.b,a:T.a-P.a}):f=d-P;y.attrs[C][this._id][g]={start:P,diff:f,end:d,trueEnd:b,trueStart:S},y.tweens[C][g]=this._id}_tweenFunc(g){const d=this.node,m=y.attrs[d._id][this._id];let C,f,u,b,S,T,k,P;for(C in m){if(f=m[C],u=f.start,b=f.diff,P=f.end,t.Util._isArray(u))if(S=[],k=Math.max(u.length,P.length),C.indexOf("fill")===0)for(T=0;T<k;T++)T%2===0?S.push((u[T]||0)+b[T]*g):S.push("rgba("+Math.round(u[T].r+b[T].r*g)+","+Math.round(u[T].g+b[T].g*g)+","+Math.round(u[T].b+b[T].b*g)+","+(u[T].a+b[T].a*g)+")");else for(T=0;T<k;T++)S.push((u[T]||0)+b[T]*g);else l.indexOf(C)!==-1?S="rgba("+Math.round(u.r+b.r*g)+","+Math.round(u.g+b.g*g)+","+Math.round(u.b+b.b*g)+","+(u.a+b.a*g)+")":S=u+b*g;d.setAttr(C,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,d=y.attrs[g._id][this._id];d.points&&d.points.trueEnd&&g.setAttr("points",d.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,d=y.attrs[g._id][this._id];d.points&&d.points.trueStart&&g.points(d.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,d=this._id,m=y.tweens[g];this.pause();for(const C in m)delete y.tweens[g][C];delete y.attrs[g][d]}}o.Tween=y,y.attrs={},y.tweens={},e.Node.prototype.to=function(_){const g=_.onFinish;_.node=this,_.onFinish=function(){this.destroy(),g&&g()},new y(_).play()},o.Easings={BackEaseIn(_,g,d,m){return d*(_/=m)*_*((1.70158+1)*_-1.70158)+g},BackEaseOut(_,g,d,m){return d*((_=_/m-1)*_*((1.70158+1)*_+1.70158)+1)+g},BackEaseInOut(_,g,d,m){let C=1.70158;return(_/=m/2)<1?d/2*(_*_*(((C*=1.525)+1)*_-C))+g:d/2*((_-=2)*_*(((C*=1.525)+1)*_+C)+2)+g},ElasticEaseIn(_,g,d,m,C,f){let u=0;return _===0?g:(_/=m)===1?g+d:(f||(f=m*.3),!C||C<Math.abs(d)?(C=d,u=f/4):u=f/(2*Math.PI)*Math.asin(d/C),-(C*Math.pow(2,10*(_-=1))*Math.sin((_*m-u)*(2*Math.PI)/f))+g)},ElasticEaseOut(_,g,d,m,C,f){let u=0;return _===0?g:(_/=m)===1?g+d:(f||(f=m*.3),!C||C<Math.abs(d)?(C=d,u=f/4):u=f/(2*Math.PI)*Math.asin(d/C),C*Math.pow(2,-10*_)*Math.sin((_*m-u)*(2*Math.PI)/f)+d+g)},ElasticEaseInOut(_,g,d,m,C,f){let u=0;return _===0?g:(_/=m/2)===2?g+d:(f||(f=m*(.3*1.5)),!C||C<Math.abs(d)?(C=d,u=f/4):u=f/(2*Math.PI)*Math.asin(d/C),_<1?-.5*(C*Math.pow(2,10*(_-=1))*Math.sin((_*m-u)*(2*Math.PI)/f))+g:C*Math.pow(2,-10*(_-=1))*Math.sin((_*m-u)*(2*Math.PI)/f)*.5+d+g)},BounceEaseOut(_,g,d,m){return(_/=m)<1/2.75?d*(7.5625*_*_)+g:_<2/2.75?d*(7.5625*(_-=1.5/2.75)*_+.75)+g:_<2.5/2.75?d*(7.5625*(_-=2.25/2.75)*_+.9375)+g:d*(7.5625*(_-=2.625/2.75)*_+.984375)+g},BounceEaseIn(_,g,d,m){return d-o.Easings.BounceEaseOut(m-_,0,d,m)+g},BounceEaseInOut(_,g,d,m){return _<m/2?o.Easings.BounceEaseIn(_*2,0,d,m)*.5+g:o.Easings.BounceEaseOut(_*2-m,0,d,m)*.5+d*.5+g},EaseIn(_,g,d,m){return d*(_/=m)*_+g},EaseOut(_,g,d,m){return-d*(_/=m)*(_-2)+g},EaseInOut(_,g,d,m){return(_/=m/2)<1?d/2*_*_+g:-d/2*(--_*(_-2)-1)+g},StrongEaseIn(_,g,d,m){return d*(_/=m)*_*_*_*_+g},StrongEaseOut(_,g,d,m){return d*((_=_/m-1)*_*_*_*_+1)+g},StrongEaseInOut(_,g,d,m){return(_/=m/2)<1?d/2*_*_*_*_*_+g:d/2*((_-=2)*_*_*_*_+2)+g},Linear(_,g,d,m){return d*_/m+g}}}(Zr)),Zr}var Bs;function Kl(){return Bs||(Bs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const t=Z(),i=ut(),e=_t(),r=Fr(),n=Wl(),a=qo(),s=Yl(),h=jn(),l=Kn(),c=vt(),p=$n(),y=Xl(),_=Vo(),g=Mr();o.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:e.Node,Container:r.Container,Stage:n.Stage,stages:n.stages,Layer:a.Layer,FastLayer:s.FastLayer,Group:h.Group,DD:l.DD,Shape:c.Shape,shapes:c.shapes,Animation:p.Animation,Tween:y.Tween,Easings:y.Easings,Context:_.Context,Canvas:g.Canvas}),o.default=o.Konva}(Hr)),Hr}var gi={},Us;function jl(){if(Us)return gi;Us=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Arc=void 0;const o=Q(),t=vt(),i=Z(),e=J(),r=Z();let n=class extends t.Shape{_sceneFunc(s){const h=i.Konva.getAngle(this.angle()),l=this.clockwise();s.beginPath(),s.arc(0,0,this.outerRadius(),0,h,l),s.arc(0,0,this.innerRadius(),h,0,!l),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}getSelfRect(){const s=this.innerRadius(),h=this.outerRadius(),l=this.clockwise(),c=i.Konva.getAngle(l?360-this.angle():this.angle()),p=Math.cos(Math.min(c,Math.PI)),y=1,_=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),g=Math.sin(Math.min(c,Math.PI/2)),d=p*(p>0?s:h),m=y*h,C=_*(_>0?s:h),f=g*(g>0?h:s);return{x:d,y:l?-1*f:C,width:m-d,height:f-C}}};return gi.Arc=n,n.prototype._centroid=!0,n.prototype.className="Arc",n.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1,(0,e.getBooleanValidator)()),gi}var _i={},pi={},Vs;function Ho(){if(Vs)return pi;Vs=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Line=void 0;const o=Q(),t=Z(),i=vt(),e=J();function r(s,h,l,c,p,y,_){const g=Math.sqrt(Math.pow(l-s,2)+Math.pow(c-h,2)),d=Math.sqrt(Math.pow(p-l,2)+Math.pow(y-c,2)),m=_*g/(g+d),C=_*d/(g+d),f=l-m*(p-s),u=c-m*(y-h),b=l+C*(p-s),S=c+C*(y-h);return[f,u,b,S]}function n(s,h){const l=s.length,c=[];for(let p=2;p<l-2;p+=2){const y=r(s[p-2],s[p-1],s[p],s[p+1],s[p+2],s[p+3],h);isNaN(y[0])||(c.push(y[0]),c.push(y[1]),c.push(s[p]),c.push(s[p+1]),c.push(y[2]),c.push(y[3]))}return c}let a=class extends i.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){let l=this.points(),c=l.length,p=this.tension(),y=this.closed(),_=this.bezier(),g,d,m;if(c){if(h.beginPath(),h.moveTo(l[0],l[1]),p!==0&&c>4){for(g=this.getTensionPoints(),d=g.length,m=y?0:4,y||h.quadraticCurveTo(g[0],g[1],g[2],g[3]);m<d-2;)h.bezierCurveTo(g[m++],g[m++],g[m++],g[m++],g[m++],g[m++]);y||h.quadraticCurveTo(g[d-2],g[d-1],l[c-2],l[c-1])}else if(_)for(m=2;m<c;)h.bezierCurveTo(l[m++],l[m++],l[m++],l[m++],l[m++],l[m++]);else for(m=2;m<c;m+=2)h.lineTo(l[m],l[m+1]);y?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():n(this.points(),this.tension())}_getTensionPointsClosed(){const h=this.points(),l=h.length,c=this.tension(),p=r(h[l-2],h[l-1],h[0],h[1],h[2],h[3],c),y=r(h[l-4],h[l-3],h[l-2],h[l-1],h[0],h[1],c),_=n(h,c);return[p[2],p[3]].concat(_).concat([y[0],y[1],h[l-2],h[l-1],y[2],y[3],p[0],p[1],h[0],h[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();let l=h[0],c=h[0],p=h[1],y=h[1],_,g;for(let d=0;d<h.length/2;d++)_=h[d*2],g=h[d*2+1],l=Math.min(l,_),c=Math.max(c,_),p=Math.min(p,g),y=Math.max(y,g);return{x:l,y:p,width:c-l,height:y-p}}};return pi.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(a),o.Factory.addGetterSetter(a,"closed",!1),o.Factory.addGetterSetter(a,"bezier",!1),o.Factory.addGetterSetter(a,"tension",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(a,"points",[],(0,e.getNumberArrayValidator)()),pi}var mi={},Qr={},zs;function $l(){return zs||(zs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(a,s,h)=>{let l,c;const y=h/2;l=0;for(let _=0;_<20;_++)c=y*o.tValues[20][_]+y,l+=o.cValues[20][_]*e(a,s,c);return y*l};o.getCubicArcLength=t;const i=(a,s,h)=>{h===void 0&&(h=1);const l=a[0]-2*a[1]+a[2],c=s[0]-2*s[1]+s[2],p=2*a[1]-2*a[0],y=2*s[1]-2*s[0],_=4*(l*l+c*c),g=4*(l*p+c*y),d=p*p+y*y;if(_===0)return h*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(s[2]-s[0],2));const m=g/(2*_),C=d/_,f=h+m,u=C-m*m,b=f*f+u>0?Math.sqrt(f*f+u):0,S=m*m+u>0?Math.sqrt(m*m+u):0,T=m+Math.sqrt(m*m+u)!==0?u*Math.log(Math.abs((f+b)/(m+S))):0;return Math.sqrt(_)/2*(f*b-m*S+T)};o.getQuadraticArcLength=i;function e(a,s,h){const l=r(1,h,a),c=r(1,h,s),p=l*l+c*c;return Math.sqrt(p)}const r=(a,s,h)=>{const l=h.length-1;let c,p;if(l===0)return 0;if(a===0){p=0;for(let y=0;y<=l;y++)p+=o.binomialCoefficients[l][y]*Math.pow(1-s,l-y)*Math.pow(s,y)*h[y];return p}else{c=new Array(l);for(let y=0;y<l;y++)c[y]=l*(h[y+1]-h[y]);return r(a-1,s,c)}},n=(a,s,h)=>{let l=1,c=a/s,p=(a-h(c))/s,y=0;for(;l>.001;){const _=h(c+p),g=Math.abs(a-_)/s;if(g<l)l=g,c+=p;else{const d=h(c-p),m=Math.abs(a-d)/s;m<l?(l=m,c-=p):p/=2}if(y++,y>500)break}return c};o.t2length=n}(Qr)),Qr}var qs;function Zn(){if(qs)return mi;qs=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Path=void 0;const o=Q(),t=vt(),i=Z(),e=$l();let r=class At extends t.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=At.parsePathData(this.data()),this.pathLength=At.getPathLength(this.dataArray)}_sceneFunc(a){const s=this.dataArray;a.beginPath();let h=!1;for(let b=0;b<s.length;b++){const S=s[b].command,T=s[b].points;switch(S){case"L":a.lineTo(T[0],T[1]);break;case"M":a.moveTo(T[0],T[1]);break;case"C":a.bezierCurveTo(T[0],T[1],T[2],T[3],T[4],T[5]);break;case"Q":a.quadraticCurveTo(T[0],T[1],T[2],T[3]);break;case"A":var l=T[0],c=T[1],p=T[2],y=T[3],_=T[4],g=T[5],d=T[6],m=T[7],C=p>y?p:y,f=p>y?1:p/y,u=p>y?y/p:1;a.translate(l,c),a.rotate(d),a.scale(f,u),a.arc(0,0,C,_,_+g,1-m),a.scale(1/f,1/u),a.rotate(-d),a.translate(-l,-c);break;case"z":h=!0,a.closePath();break}}!h&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(_){if(_.command==="A"){const g=_.points[4],d=_.points[5],m=_.points[4]+d;let C=Math.PI/180;if(Math.abs(g-m)<C&&(C=Math.abs(g-m)),d<0)for(let f=g-C;f>m;f-=C){const u=At.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],f,0);a.push(u.x,u.y)}else for(let f=g+C;f<m;f+=C){const u=At.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],f,0);a.push(u.x,u.y)}}else if(_.command==="C")for(let g=0;g<=1;g+=.01){const d=At.getPointOnCubicBezier(g,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3],_.points[4],_.points[5]);a.push(d.x,d.y)}else a=a.concat(_.points)});let s=a[0],h=a[0],l=a[1],c=a[1],p,y;for(let _=0;_<a.length/2;_++)p=a[_*2],y=a[_*2+1],isNaN(p)||(s=Math.min(s,p),h=Math.max(h,p)),isNaN(y)||(l=Math.min(l,y),c=Math.max(c,y));return{x:s,y:l,width:h-s,height:c-l}}getLength(){return this.pathLength}getPointAtLength(a){return At.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,s,h,l){return Math.sqrt((h-a)*(h-a)+(l-s)*(l-s))}static getPathLength(a){let s=0;for(let h=0;h<a.length;++h)s+=a[h].pathLength;return s}static getPointAtLengthOfDataArray(a,s){let h,l=0,c=s.length;if(!c)return null;for(;l<c&&a>s[l].pathLength;)a-=s[l].pathLength,++l;if(l===c)return h=s[l-1].points.slice(-2),{x:h[0],y:h[1]};if(a<.01)return h=s[l].points.slice(0,2),{x:h[0],y:h[1]};const p=s[l],y=p.points;switch(p.command){case"L":return At.getPointOnLine(a,p.start.x,p.start.y,y[0],y[1]);case"C":return At.getPointOnCubicBezier((0,e.t2length)(a,At.getPathLength(s),b=>(0,e.getCubicArcLength)([p.start.x,y[0],y[2],y[4]],[p.start.y,y[1],y[3],y[5]],b)),p.start.x,p.start.y,y[0],y[1],y[2],y[3],y[4],y[5]);case"Q":return At.getPointOnQuadraticBezier((0,e.t2length)(a,At.getPathLength(s),b=>(0,e.getQuadraticArcLength)([p.start.x,y[0],y[2]],[p.start.y,y[1],y[3]],b)),p.start.x,p.start.y,y[0],y[1],y[2],y[3]);case"A":var _=y[0],g=y[1],d=y[2],m=y[3],C=y[4],f=y[5],u=y[6];return C+=f*a/p.pathLength,At.getPointOnEllipticalArc(_,g,d,m,C,u)}return null}static getPointOnLine(a,s,h,l,c,p,y){p=p!=null?p:s,y=y!=null?y:h;const _=this.getLineLength(s,h,l,c);if(_<1e-10)return{x:s,y:h};if(l===s)return{x:p,y:y+(c>h?a:-a)};const g=(c-h)/(l-s),d=Math.sqrt(a*a/(1+g*g))*(l<s?-1:1),m=g*d;if(Math.abs(y-h-g*(p-s))<1e-10)return{x:p+d,y:y+m};const C=((p-s)*(l-s)+(y-h)*(c-h))/(_*_),f=s+C*(l-s),u=h+C*(c-h),b=this.getLineLength(p,y,f,u),S=Math.sqrt(a*a-b*b),T=Math.sqrt(S*S/(1+g*g))*(l<s?-1:1),k=g*T;return{x:f+T,y:u+k}}static getPointOnCubicBezier(a,s,h,l,c,p,y,_,g){function d(S){return S*S*S}function m(S){return 3*S*S*(1-S)}function C(S){return 3*S*(1-S)*(1-S)}function f(S){return(1-S)*(1-S)*(1-S)}const u=_*d(a)+p*m(a)+l*C(a)+s*f(a),b=g*d(a)+y*m(a)+c*C(a)+h*f(a);return{x:u,y:b}}static getPointOnQuadraticBezier(a,s,h,l,c,p,y){function _(f){return f*f}function g(f){return 2*f*(1-f)}function d(f){return(1-f)*(1-f)}const m=p*_(a)+l*g(a)+s*d(a),C=y*_(a)+c*g(a)+h*d(a);return{x:m,y:C}}static getPointOnEllipticalArc(a,s,h,l,c,p){const y=Math.cos(p),_=Math.sin(p),g={x:h*Math.cos(c),y:l*Math.sin(c)};return{x:a+(g.x*y-g.y*_),y:s+(g.x*_+g.y*y)}}static parsePathData(a){if(!a)return[];let s=a;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];s=s.replace(new RegExp(" ","g"),",");for(var l=0;l<h.length;l++)s=s.replace(new RegExp(h[l],"g"),"|"+h[l]);const c=s.split("|"),p=[],y=[];let _=0,g=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(l=1;l<c.length;l++){let v=c[l],A=v.charAt(0);for(v=v.slice(1),y.length=0;m=d.exec(v);)y.push(m[0]);const x=[];for(let R=0,M=y.length;R<M;R++){if(y[R]==="00"){x.push(0,0);continue}const D=parseFloat(y[R]);isNaN(D)?x.push(0):x.push(D)}for(;x.length>0&&!isNaN(x[0]);){let R="",M=[];const D=_,I=g;var C,f,u,b,S,T,k,P,w,O;switch(A){case"l":_+=x.shift(),g+=x.shift(),R="L",M.push(_,g);break;case"L":_=x.shift(),g=x.shift(),M.push(_,g);break;case"m":var E=x.shift(),L=x.shift();if(_+=E,g+=L,R="M",p.length>2&&p[p.length-1].command==="z"){for(let N=p.length-2;N>=0;N--)if(p[N].command==="M"){_=p[N].points[0]+E,g=p[N].points[1]+L;break}}M.push(_,g),A="l";break;case"M":_=x.shift(),g=x.shift(),R="M",M.push(_,g),A="L";break;case"h":_+=x.shift(),R="L",M.push(_,g);break;case"H":_=x.shift(),R="L",M.push(_,g);break;case"v":g+=x.shift(),R="L",M.push(_,g);break;case"V":g=x.shift(),R="L",M.push(_,g);break;case"C":M.push(x.shift(),x.shift(),x.shift(),x.shift()),_=x.shift(),g=x.shift(),M.push(_,g);break;case"c":M.push(_+x.shift(),g+x.shift(),_+x.shift(),g+x.shift()),_+=x.shift(),g+=x.shift(),R="C",M.push(_,g);break;case"S":f=_,u=g,C=p[p.length-1],C.command==="C"&&(f=_+(_-C.points[2]),u=g+(g-C.points[3])),M.push(f,u,x.shift(),x.shift()),_=x.shift(),g=x.shift(),R="C",M.push(_,g);break;case"s":f=_,u=g,C=p[p.length-1],C.command==="C"&&(f=_+(_-C.points[2]),u=g+(g-C.points[3])),M.push(f,u,_+x.shift(),g+x.shift()),_+=x.shift(),g+=x.shift(),R="C",M.push(_,g);break;case"Q":M.push(x.shift(),x.shift()),_=x.shift(),g=x.shift(),M.push(_,g);break;case"q":M.push(_+x.shift(),g+x.shift()),_+=x.shift(),g+=x.shift(),R="Q",M.push(_,g);break;case"T":f=_,u=g,C=p[p.length-1],C.command==="Q"&&(f=_+(_-C.points[0]),u=g+(g-C.points[1])),_=x.shift(),g=x.shift(),R="Q",M.push(f,u,_,g);break;case"t":f=_,u=g,C=p[p.length-1],C.command==="Q"&&(f=_+(_-C.points[0]),u=g+(g-C.points[1])),_+=x.shift(),g+=x.shift(),R="Q",M.push(f,u,_,g);break;case"A":b=x.shift(),S=x.shift(),T=x.shift(),k=x.shift(),P=x.shift(),w=_,O=g,_=x.shift(),g=x.shift(),R="A",M=this.convertEndpointToCenterParameterization(w,O,_,g,k,P,b,S,T);break;case"a":b=x.shift(),S=x.shift(),T=x.shift(),k=x.shift(),P=x.shift(),w=_,O=g,_+=x.shift(),g+=x.shift(),R="A",M=this.convertEndpointToCenterParameterization(w,O,_,g,k,P,b,S,T);break}p.push({command:R||A,points:M,start:{x:D,y:I},pathLength:this.calcLength(D,I,R||A,M)})}(A==="z"||A==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(a,s,h,l){let c,p,y,_;const g=At;switch(h){case"L":return g.getLineLength(a,s,l[0],l[1]);case"C":return(0,e.getCubicArcLength)([a,l[0],l[2],l[4]],[s,l[1],l[3],l[5]],1);case"Q":return(0,e.getQuadraticArcLength)([a,l[0],l[2]],[s,l[1],l[3]],1);case"A":c=0;var d=l[4],m=l[5],C=l[4]+m,f=Math.PI/180;if(Math.abs(d-C)<f&&(f=Math.abs(d-C)),p=g.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],d,0),m<0)for(_=d-f;_>C;_-=f)y=g.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],_,0),c+=g.getLineLength(p.x,p.y,y.x,y.y),p=y;else for(_=d+f;_<C;_+=f)y=g.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],_,0),c+=g.getLineLength(p.x,p.y,y.x,y.y),p=y;return y=g.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],C,0),c+=g.getLineLength(p.x,p.y,y.x,y.y),c}return 0}static convertEndpointToCenterParameterization(a,s,h,l,c,p,y,_,g){const d=g*(Math.PI/180),m=Math.cos(d)*(a-h)/2+Math.sin(d)*(s-l)/2,C=-1*Math.sin(d)*(a-h)/2+Math.cos(d)*(s-l)/2,f=m*m/(y*y)+C*C/(_*_);f>1&&(y*=Math.sqrt(f),_*=Math.sqrt(f));let u=Math.sqrt((y*y*(_*_)-y*y*(C*C)-_*_*(m*m))/(y*y*(C*C)+_*_*(m*m)));c===p&&(u*=-1),isNaN(u)&&(u=0);const b=u*y*C/_,S=u*-_*m/y,T=(a+h)/2+Math.cos(d)*b-Math.sin(d)*S,k=(s+l)/2+Math.sin(d)*b+Math.cos(d)*S,P=function(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1])},w=function(x,R){return(x[0]*R[0]+x[1]*R[1])/(P(x)*P(R))},O=function(x,R){return(x[0]*R[1]<x[1]*R[0]?-1:1)*Math.acos(w(x,R))},E=O([1,0],[(m-b)/y,(C-S)/_]),L=[(m-b)/y,(C-S)/_],v=[(-1*m-b)/y,(-1*C-S)/_];let A=O(L,v);return w(L,v)<=-1&&(A=Math.PI),w(L,v)>=1&&(A=0),p===0&&A>0&&(A=A-2*Math.PI),p===1&&A<0&&(A=A+2*Math.PI),[T,k,y,_,E,A,d,p]}};return mi.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(r),o.Factory.addGetterSetter(r,"data"),mi}var Hs;function Zl(){if(Hs)return _i;Hs=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Arrow=void 0;const o=Q(),t=Ho(),i=J(),e=Z(),r=Zn();let n=class extends t.Line{_sceneFunc(s){super._sceneFunc(s);const h=Math.PI*2,l=this.points();let c=l;const p=this.tension()!==0&&l.length>4;p&&(c=this.getTensionPoints());const y=this.pointerLength(),_=l.length;let g,d;if(p){const f=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],l[_-2],l[_-1]],u=r.Path.calcLength(c[c.length-4],c[c.length-3],"C",f),b=r.Path.getPointOnQuadraticBezier(Math.min(1,1-y/u),f[0],f[1],f[2],f[3],f[4],f[5]);g=l[_-2]-b.x,d=l[_-1]-b.y}else g=l[_-2]-l[_-4],d=l[_-1]-l[_-3];const m=(Math.atan2(d,g)+h)%h,C=this.pointerWidth();this.pointerAtEnding()&&(s.save(),s.beginPath(),s.translate(l[_-2],l[_-1]),s.rotate(m),s.moveTo(0,0),s.lineTo(-y,C/2),s.lineTo(-y,-C/2),s.closePath(),s.restore(),this.__fillStroke(s)),this.pointerAtBeginning()&&(s.save(),s.beginPath(),s.translate(l[0],l[1]),p?(g=(c[0]+c[2])/2-l[0],d=(c[1]+c[3])/2-l[1]):(g=l[2]-l[0],d=l[3]-l[1]),s.rotate((Math.atan2(-d,-g)+h)%h),s.moveTo(0,0),s.lineTo(-y,C/2),s.lineTo(-y,-C/2),s.closePath(),s.restore(),this.__fillStroke(s))}__fillStroke(s){const h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,s.setLineDash([])),s.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const s=super.getSelfRect(),h=this.pointerWidth()/2;return{x:s.x,y:s.y-h,width:s.width,height:s.height+h*2}}};return _i.Arrow=n,n.prototype.className="Arrow",(0,e._registerNode)(n),o.Factory.addGetterSetter(n,"pointerLength",10,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerWidth",10,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerAtBeginning",!1),o.Factory.addGetterSetter(n,"pointerAtEnding",!0),_i}var yi={},Ws;function Ql(){if(Ws)return yi;Ws=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Circle=void 0;const o=Q(),t=vt(),i=J(),e=Z();let r=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return yi.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),yi}var vi={},Ys;function Jl(){if(Ys)return vi;Ys=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Ellipse=void 0;const o=Q(),t=vt(),i=J(),e=Z();let r=class extends t.Shape{_sceneFunc(a){const s=this.radiusX(),h=this.radiusY();a.beginPath(),a.save(),s!==h&&a.scale(1,h/s),a.arc(0,0,s,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return vi.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,e._registerNode)(r),o.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),o.Factory.addGetterSetter(r,"radiusX",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"radiusY",0,(0,i.getNumberValidator)()),vi}var bi={},Xs;function tc(){if(Xs)return bi;Xs=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Image=void 0;const o=ut(),t=Q(),i=vt(),e=Z(),r=J();let n=class Wo extends i.Shape{constructor(s){super(s),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",h=>{this._removeImageLoad(h.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const s=this.image();s&&s.complete||s&&s.readyState===4||s&&s.addEventListener&&s.addEventListener("load",this._loadListener)}_removeImageLoad(s){s&&s.removeEventListener&&s.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const s=!!this.cornerRadius(),h=this.hasShadow();return s&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(s){const h=this.getWidth(),l=this.getHeight(),c=this.cornerRadius(),p=this.attrs.image;let y;if(p){const _=this.attrs.cropWidth,g=this.attrs.cropHeight;_&&g?y=[p,this.cropX(),this.cropY(),_,g,0,0,h,l]:y=[p,0,0,h,l]}(this.hasFill()||this.hasStroke()||c)&&(s.beginPath(),c?o.Util.drawRoundedRectPath(s,h,l,c):s.rect(0,0,h,l),s.closePath(),s.fillStrokeShape(this)),p&&(c&&s.clip(),s.drawImage.apply(s,y))}_hitFunc(s){const h=this.width(),l=this.height(),c=this.cornerRadius();s.beginPath(),c?o.Util.drawRoundedRectPath(s,h,l,c):s.rect(0,0,h,l),s.closePath(),s.fillStrokeShape(this)}getWidth(){var s,h;return(s=this.attrs.width)!==null&&s!==void 0?s:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var s,h;return(s=this.attrs.height)!==null&&s!==void 0?s:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(s,h,l=null){const c=o.Util.createImageElement();c.onload=function(){const p=new Wo({image:c});h(p)},c.onerror=l,c.crossOrigin="Anonymous",c.src=s}};return bi.Image=n,n.prototype.className="Image",(0,e._registerNode)(n),t.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(n,"image"),t.Factory.addComponentsGetterSetter(n,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(n,"cropX",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropY",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropHeight",0,(0,r.getNumberValidator)()),bi}var Ae={},Ks;function ec(){if(Ks)return Ae;Ks=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.Tag=Ae.Label=void 0;const o=Q(),t=vt(),i=jn(),e=J(),r=Z(),n=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",s="none",h="up",l="right",c="down",p="left",y=n.length;let _=class extends i.Group{constructor(m){super(m),this.on("add.konva",function(C){this._addListeners(C.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(m){let C=this,f;const u=function(){C._sync()};for(f=0;f<y;f++)m.on(n[f]+a,u)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let m=this.getText(),C=this.getTag(),f,u,b,S,T,k,P;if(m&&C){switch(f=m.width(),u=m.height(),b=C.pointerDirection(),S=C.pointerWidth(),P=C.pointerHeight(),T=0,k=0,b){case h:T=f/2,k=-1*P;break;case l:T=f+S,k=u/2;break;case c:T=f/2,k=u+P;break;case p:T=-1*S,k=u/2;break}C.setAttrs({x:-1*T,y:-1*k,width:f,height:u}),m.setAttrs({x:-1*T,y:-1*k})}}};Ae.Label=_,_.prototype.className="Label",(0,r._registerNode)(_);class g extends t.Shape{_sceneFunc(m){const C=this.width(),f=this.height(),u=this.pointerDirection(),b=this.pointerWidth(),S=this.pointerHeight(),T=this.cornerRadius();let k=0,P=0,w=0,O=0;typeof T=="number"?k=P=w=O=Math.min(T,C/2,f/2):(k=Math.min(T[0]||0,C/2,f/2),P=Math.min(T[1]||0,C/2,f/2),O=Math.min(T[2]||0,C/2,f/2),w=Math.min(T[3]||0,C/2,f/2)),m.beginPath(),m.moveTo(k,0),u===h&&(m.lineTo((C-b)/2,0),m.lineTo(C/2,-1*S),m.lineTo((C+b)/2,0)),m.lineTo(C-P,0),m.arc(C-P,P,P,Math.PI*3/2,0,!1),u===l&&(m.lineTo(C,(f-S)/2),m.lineTo(C+b,f/2),m.lineTo(C,(f+S)/2)),m.lineTo(C,f-O),m.arc(C-O,f-O,O,0,Math.PI/2,!1),u===c&&(m.lineTo((C+b)/2,f),m.lineTo(C/2,f+S),m.lineTo((C-b)/2,f)),m.lineTo(w,f),m.arc(w,f-w,w,Math.PI/2,Math.PI,!1),u===p&&(m.lineTo(0,(f+S)/2),m.lineTo(-1*b,f/2),m.lineTo(0,(f-S)/2)),m.lineTo(0,k),m.arc(k,k,k,Math.PI,Math.PI*3/2,!1),m.closePath(),m.fillStrokeShape(this)}getSelfRect(){let m=0,C=0,f=this.pointerWidth(),u=this.pointerHeight(),b=this.pointerDirection(),S=this.width(),T=this.height();return b===h?(C-=u,T+=u):b===c?T+=u:b===p?(m-=f*1.5,S+=f):b===l&&(S+=f*1.5),{x:m,y:C,width:S,height:T}}}return Ae.Tag=g,g.prototype.className="Tag",(0,r._registerNode)(g),o.Factory.addGetterSetter(g,"pointerDirection",s),o.Factory.addGetterSetter(g,"pointerWidth",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(g,"pointerHeight",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(g,"cornerRadius",0,(0,e.getNumberOrArrayOfNumbersValidator)(4)),Ae}var Si={},js;function Yo(){if(js)return Si;js=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Rect=void 0;const o=Q(),t=vt(),i=Z(),e=ut(),r=J();let n=class extends t.Shape{_sceneFunc(s){const h=this.cornerRadius(),l=this.width(),c=this.height();s.beginPath(),h?e.Util.drawRoundedRectPath(s,l,c,h):s.rect(0,0,l,c),s.closePath(),s.fillStrokeShape(this)}};return Si.Rect=n,n.prototype.className="Rect",(0,i._registerNode)(n),o.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Si}var Ci={},$s;function ic(){if($s)return Ci;$s=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.RegularPolygon=void 0;const o=Q(),t=vt(),i=J(),e=Z();let r=class extends t.Shape{_sceneFunc(a){const s=this._getPoints();a.beginPath(),a.moveTo(s[0].x,s[0].y);for(let h=1;h<s.length;h++)a.lineTo(s[h].x,s[h].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,s=this.attrs.radius||0,h=[];for(let l=0;l<a;l++)h.push({x:s*Math.sin(l*2*Math.PI/a),y:-1*s*Math.cos(l*2*Math.PI/a)});return h}getSelfRect(){const a=this._getPoints();let s=a[0].x,h=a[0].y,l=a[0].x,c=a[0].y;return a.forEach(p=>{s=Math.min(s,p.x),h=Math.max(h,p.x),l=Math.min(l,p.y),c=Math.max(c,p.y)}),{x:s,y:l,width:h-s,height:c-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Ci.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"sides",0,(0,i.getNumberValidator)()),Ci}var xi={},Zs;function rc(){if(Zs)return xi;Zs=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Ring=void 0;const o=Q(),t=vt(),i=J(),e=Z(),r=Math.PI*2;let n=class extends t.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.innerRadius(),0,r,!1),s.moveTo(this.outerRadius(),0),s.arc(0,0,this.outerRadius(),r,0,!0),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return xi.Ring=n,n.prototype.className="Ring",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,e._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),xi}var wi={},Qs;function nc(){if(Qs)return wi;Qs=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Sprite=void 0;const o=Q(),t=vt(),i=$n(),e=J(),r=Z();let n=class extends t.Shape{constructor(s){super(s),this._updated=!0,this.anim=new i.Animation(()=>{const h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(s){const h=this.animation(),l=this.frameIndex(),c=l*4,p=this.animations()[h],y=this.frameOffsets(),_=p[c+0],g=p[c+1],d=p[c+2],m=p[c+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(s.beginPath(),s.rect(0,0,d,m),s.closePath(),s.fillStrokeShape(this)),C)if(y){const f=y[h],u=l*2;s.drawImage(C,_,g,d,m,f[u+0],f[u+1],d,m)}else s.drawImage(C,_,g,d,m,0,0,d,m)}_hitFunc(s){const h=this.animation(),l=this.frameIndex(),c=l*4,p=this.animations()[h],y=this.frameOffsets(),_=p[c+2],g=p[c+3];if(s.beginPath(),y){const d=y[h],m=l*2;s.rect(d[m+0],d[m+1],_,g)}else s.rect(0,0,_,g);s.closePath(),s.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const s=this;this.interval=setInterval(function(){s._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const s=this.getLayer();this.anim.setLayers(s),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const s=this.frameIndex(),h=this.animation(),l=this.animations(),c=l[h],p=c.length/4;s<p-1?this.frameIndex(s+1):this.frameIndex(0)}};return wi.Sprite=n,n.prototype.className="Sprite",(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"animation"),o.Factory.addGetterSetter(n,"animations"),o.Factory.addGetterSetter(n,"frameOffsets"),o.Factory.addGetterSetter(n,"image"),o.Factory.addGetterSetter(n,"frameIndex",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"frameRate",17,(0,e.getNumberValidator)()),o.Factory.backCompat(n,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),wi}var Ti={},Js;function sc(){if(Js)return Ti;Js=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Star=void 0;const o=Q(),t=vt(),i=J(),e=Z();let r=class extends t.Shape{_sceneFunc(a){const s=this.innerRadius(),h=this.outerRadius(),l=this.numPoints();a.beginPath(),a.moveTo(0,0-h);for(let c=1;c<l*2;c++){const p=c%2===0?h:s,y=p*Math.sin(c*Math.PI/l),_=-1*p*Math.cos(c*Math.PI/l);a.lineTo(y,_)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ti.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"numPoints",5,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),Ti}var Ye={},ta;function Xo(){if(ta)return Ye;ta=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Text=void 0,Ye.stringToArray=a;const o=ut(),t=Q(),i=vt(),e=Z(),r=J(),n=Z();function a(q){return[...q].reduce((B,V,W,Y)=>{if(new RegExp("\\p{Emoji}","u").test(V)){const F=Y[W+1];F&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(F)?(B.push(V+F),Y[W+1]=""):B.push(V)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(V+(Y[W+1]||""))?B.push(V+Y[W+1]):W>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(V)?B[B.length-1]+=V:V&&B.push(V);return B},[])}const s="auto",h="center",l="inherit",c="justify",p="Change.konva",y="2d",_="-",g="left",d="text",m="Text",C="top",f="bottom",u="middle",b="normal",S="px ",T=" ",k="right",P="rtl",w="word",O="char",E="none",L="…",v=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],A=v.length;function x(q){return q.split(",").map(B=>{B=B.trim();const V=B.indexOf(" ")>=0,W=B.indexOf('"')>=0||B.indexOf("'")>=0;return V&&!W&&(B='"'.concat(B,'"')),B}).join(", ")}let R;function M(){return R||(R=o.Util.createCanvasElement().getContext(y),R)}function D(q){q.fillText(this._partialText,this._partialTextX,this._partialTextY)}function I(q){q.setAttr("miterLimit",2),q.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function N(q){return q=q||{},!q.fillLinearGradientColorStops&&!q.fillRadialGradientColorStops&&!q.fillPatternImage&&(q.fill=q.fill||"black"),q}let U=class extends i.Shape{constructor(B){super(N(B)),this._partialTextX=0,this._partialTextY=0;for(let V=0;V<A;V++)this.on(v[V]+p,this._setTextData);this._setTextData()}_sceneFunc(B){const V=this.textArr,W=V.length;if(!this.text())return;let Y=this.padding(),F=this.fontSize(),G=this.lineHeight()*F,z=this.verticalAlign(),H=this.direction(),X=0,K=this.align(),et=this.getWidth(),rt=this.letterSpacing(),j=this.fill(),Ct=this.textDecoration(),nt=Ct.indexOf("underline")!==-1,ft=Ct.indexOf("line-through")!==-1,He;H=H===l?B.direction:H;let Ut=G/2,si=u;if(e.Konva._fixTextRendering){const ge=this.measureSize("M");si="alphabetic",Ut=(ge.fontBoundingBoxAscent-ge.fontBoundingBoxDescent)/2+G/2}var ct=0,Vt=0;for(H===P&&B.setAttr("direction",H),B.setAttr("font",this._getContextFont()),B.setAttr("textBaseline",si),B.setAttr("textAlign",g),z===u?X=(this.getHeight()-W*G-Y*2)/2:z===f&&(X=this.getHeight()-W*G-Y*2),B.translate(Y,X+Y),He=0;He<W;He++){var ct=0,Vt=0,Zt=V[He],ne=Zt.text,Pt=Zt.width,fe=Zt.lastInParagraph,se,Te;if(B.save(),K===k?ct+=et-Pt-Y*2:K===h&&(ct+=(et-Pt-Y*2)/2),nt){B.save(),B.beginPath();const Xt=e.Konva._fixTextRendering?Math.round(F/4):Math.round(F/2),Kt=ct,jt=Ut+Vt+Xt;B.moveTo(Kt,jt),se=ne.split(" ").length-1,Te=K===c&&!fe?et-Y*2:Pt,B.lineTo(Kt+Math.round(Te),jt),B.lineWidth=F/15;const Dr=this._getLinearGradient();B.strokeStyle=Dr||j,B.stroke(),B.restore()}if(ft){B.save(),B.beginPath();const Xt=e.Konva._fixTextRendering?-Math.round(F/4):0;B.moveTo(ct,Ut+Vt+Xt),se=ne.split(" ").length-1,Te=K===c&&!fe?et-Y*2:Pt,B.lineTo(ct+Math.round(Te),Ut+Vt+Xt),B.lineWidth=F/15;const Kt=this._getLinearGradient();B.strokeStyle=Kt||j,B.stroke(),B.restore()}if(H!==P&&(rt!==0||K===c)){se=ne.split(" ").length-1;const Xt=a(ne);for(let Kt=0;Kt<Xt.length;Kt++){const jt=Xt[Kt];jt===" "&&!fe&&K===c&&(ct+=(et-Y*2-Pt)/se),this._partialTextX=ct,this._partialTextY=Ut+Vt,this._partialText=jt,B.fillStrokeShape(this),ct+=this.measureSize(jt).width+rt}}else rt!==0&&B.setAttr("letterSpacing","".concat(rt,"px")),this._partialTextX=ct,this._partialTextY=Ut+Vt,this._partialText=ne,B.fillStrokeShape(this);B.restore(),W>1&&(Ut+=G)}}_hitFunc(B){const V=this.getWidth(),W=this.getHeight();B.beginPath(),B.rect(0,0,V,W),B.closePath(),B.fillStrokeShape(this)}setText(B){const V=o.Util._isString(B)?B:B==null?"":B+"";return this._setAttr(d,V),this}getWidth(){return this.attrs.width===s||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===s||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(B){var V,W,Y,F,G,z,H,X,K,et,rt;let j=M(),Ct=this.fontSize(),nt;j.save(),j.font=this._getContextFont(),nt=j.measureText(B),j.restore();const ft=Ct/100;return{actualBoundingBoxAscent:(V=nt.actualBoundingBoxAscent)!==null&&V!==void 0?V:71.58203125*ft,actualBoundingBoxDescent:(W=nt.actualBoundingBoxDescent)!==null&&W!==void 0?W:0,actualBoundingBoxLeft:(Y=nt.actualBoundingBoxLeft)!==null&&Y!==void 0?Y:-7.421875*ft,actualBoundingBoxRight:(F=nt.actualBoundingBoxRight)!==null&&F!==void 0?F:75.732421875*ft,alphabeticBaseline:(G=nt.alphabeticBaseline)!==null&&G!==void 0?G:0,emHeightAscent:(z=nt.emHeightAscent)!==null&&z!==void 0?z:100*ft,emHeightDescent:(H=nt.emHeightDescent)!==null&&H!==void 0?H:-20*ft,fontBoundingBoxAscent:(X=nt.fontBoundingBoxAscent)!==null&&X!==void 0?X:91*ft,fontBoundingBoxDescent:(K=nt.fontBoundingBoxDescent)!==null&&K!==void 0?K:21*ft,hangingBaseline:(et=nt.hangingBaseline)!==null&&et!==void 0?et:72.80000305175781*ft,ideographicBaseline:(rt=nt.ideographicBaseline)!==null&&rt!==void 0?rt:-21*ft,width:nt.width,height:Ct}}_getContextFont(){return this.fontStyle()+T+this.fontVariant()+T+(this.fontSize()+S)+x(this.fontFamily())}_addTextLine(B){this.align()===c&&(B=B.trim());const W=this._getTextWidth(B);return this.textArr.push({text:B,width:W,lastInParagraph:!1})}_getTextWidth(B){const V=this.letterSpacing(),W=B.length;return M().measureText(B).width+V*W}_setTextData(){let B=this.text().split("\n"),V=+this.fontSize(),W=0,Y=this.lineHeight()*V,F=this.attrs.width,G=this.attrs.height,z=F!==s&&F!==void 0,H=G!==s&&G!==void 0,X=this.padding(),K=F-X*2,et=G-X*2,rt=0,j=this.wrap(),Ct=j!==E,nt=j!==O&&Ct,ft=this.ellipsis();this.textArr=[],M().font=this._getContextFont();const He=ft?this._getTextWidth(L):0;for(let Ut=0,si=B.length;Ut<si;++Ut){let ct=B[Ut],Vt=this._getTextWidth(ct);if(z&&Vt>K)for(;ct.length>0;){let Zt=0,ne=a(ct).length,Pt="",fe=0;for(;Zt<ne;){const se=Zt+ne>>>1,Te=a(ct),ge=Te.slice(0,se+1).join(""),_e=this._getTextWidth(ge);(ft&&H&&rt+Y>et?_e+He:_e)<=K?(Zt=se+1,Pt=ge,fe=_e):ne=se}if(Pt){if(nt){const ge=a(ct),_e=a(Pt),Xt=ge[_e.length],Kt=Xt===T||Xt===_;let jt;if(Kt&&fe<=K)jt=_e.length;else{const Dr=_e.lastIndexOf(T),eh=_e.lastIndexOf(_);jt=Math.max(Dr,eh)+1}jt>0&&(Zt=jt,Pt=ge.slice(0,Zt).join(""),fe=this._getTextWidth(Pt))}if(Pt=Pt.trimRight(),this._addTextLine(Pt),W=Math.max(W,fe),rt+=Y,this._shouldHandleEllipsis(rt)){this._tryToAddEllipsisToLastLine();break}if(ct=a(ct).slice(Zt).join("").trimLeft(),ct.length>0&&(Vt=this._getTextWidth(ct),Vt<=K)){this._addTextLine(ct),rt+=Y,W=Math.max(W,Vt);break}}else break}else this._addTextLine(ct),rt+=Y,W=Math.max(W,Vt),this._shouldHandleEllipsis(rt)&&Ut<si-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),H&&rt+Y>et)break}this.textHeight=V,this.textWidth=W}_shouldHandleEllipsis(B){const V=+this.fontSize(),W=this.lineHeight()*V,Y=this.attrs.height,F=Y!==s&&Y!==void 0,G=this.padding(),z=Y-G*2;return!(this.wrap()!==E)||F&&B+W>z}_tryToAddEllipsisToLastLine(){const B=this.attrs.width,V=B!==s&&B!==void 0,W=this.padding(),Y=B-W*2,F=this.ellipsis(),G=this.textArr[this.textArr.length-1];!G||!F||(V&&(this._getTextWidth(G.text+L)<Y||(G.text=G.text.slice(0,G.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(G.text+L))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const B=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,V=this.hasShadow();return B&&V?!0:super._useBufferCanvas()}};return Ye.Text=U,U.prototype._fillFunc=D,U.prototype._strokeFunc=I,U.prototype.className=m,U.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,n._registerNode)(U),t.Factory.overWriteSetter(U,"width",(0,r.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(U,"height",(0,r.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(U,"direction",l),t.Factory.addGetterSetter(U,"fontFamily","Arial"),t.Factory.addGetterSetter(U,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(U,"fontStyle",b),t.Factory.addGetterSetter(U,"fontVariant",b),t.Factory.addGetterSetter(U,"padding",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(U,"align",g),t.Factory.addGetterSetter(U,"verticalAlign",C),t.Factory.addGetterSetter(U,"lineHeight",1,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(U,"wrap",w),t.Factory.addGetterSetter(U,"ellipsis",!1,(0,r.getBooleanValidator)()),t.Factory.addGetterSetter(U,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(U,"text","",(0,r.getStringValidator)()),t.Factory.addGetterSetter(U,"textDecoration",""),Ye}var Pi={},ea;function ac(){if(ea)return Pi;ea=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.TextPath=void 0;const o=ut(),t=Q(),i=vt(),e=Zn(),r=Xo(),n=J(),a=Z(),s="",h="normal";function l(y){y.fillText(this.partialText,0,0)}function c(y){y.strokeText(this.partialText,0,0)}let p=class extends i.Shape{constructor(_){super(_),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return e.Path.getPathLength(this.dataArray)}_getPointAtLength(_){if(!this.attrs.data)return null;const g=this.pathLength;return _-1>g?null:e.Path.getPointAtLengthOfDataArray(_,this.dataArray)}_readDataAttribute(){this.dataArray=e.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(_){_.setAttr("font",this._getContextFont()),_.setAttr("textBaseline",this.textBaseline()),_.setAttr("textAlign","left"),_.save();const g=this.textDecoration(),d=this.fill(),m=this.fontSize(),C=this.glyphInfo;g==="underline"&&_.beginPath();for(let f=0;f<C.length;f++){_.save();const u=C[f].p0;_.translate(u.x,u.y),_.rotate(C[f].rotation),this.partialText=C[f].text,_.fillStrokeShape(this),g==="underline"&&(f===0&&_.moveTo(0,m/2+1),_.lineTo(m,m/2+1)),_.restore()}g==="underline"&&(_.strokeStyle=d,_.lineWidth=m/20,_.stroke()),_.restore()}_hitFunc(_){_.beginPath();const g=this.glyphInfo;if(g.length>=1){const d=g[0].p0;_.moveTo(d.x,d.y)}for(let d=0;d<g.length;d++){const m=g[d].p1;_.lineTo(m.x,m.y)}_.setAttr("lineWidth",this.fontSize()),_.setAttr("strokeStyle",this.colorKey),_.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(_){return r.Text.prototype.setText.call(this,_)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(_){const d=this.dummyCanvas.getContext("2d");d.save(),d.font=this._getContextFont();const m=d.measureText(_);return d.restore(),{width:m.width,height:parseInt("".concat(this.fontSize()),10)}}_setTextData(){const{width:_,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=_,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const d=this.letterSpacing(),m=this.align(),C=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*d,0);let u=0;m==="center"&&(u=Math.max(0,this.pathLength/2-f/2)),m==="right"&&(u=Math.max(0,this.pathLength-f));const b=(0,r.stringToArray)(this.text());let S=u;for(let T=0;T<b.length;T++){const k=this._getPointAtLength(S);if(!k)return;let P=this._getTextSize(b[T]).width+d;if(b[T]===" "&&m==="justify"){const A=this.text().split(" ").length-1;P+=(this.pathLength-f)/A}const w=this._getPointAtLength(S+P);if(!w)return;const O=e.Path.getLineLength(k.x,k.y,w.x,w.y);let E=0;if(C)try{E=C(b[T-1],b[T])*this.fontSize()}catch(A){E=0}k.x+=E,w.x+=E,this.textWidth+=E;const L=e.Path.getPointOnLine(E+O/2,k.x,k.y,w.x,w.y),v=Math.atan2(w.y-k.y,w.x-k.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:b[T],rotation:v,p0:k,p1:w}),S+=P}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const _=[];this.glyphInfo.forEach(function(S){_.push(S.p0.x),_.push(S.p0.y),_.push(S.p1.x),_.push(S.p1.y)});let g=_[0]||0,d=_[0]||0,m=_[1]||0,C=_[1]||0,f,u;for(let S=0;S<_.length/2;S++)f=_[S*2],u=_[S*2+1],g=Math.min(g,f),d=Math.max(d,f),m=Math.min(m,u),C=Math.max(C,u);const b=this.fontSize();return{x:g-b/2,y:m-b/2,width:d-g+b,height:C-m+b}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Pi.TextPath=p,p.prototype._fillFunc=l,p.prototype._strokeFunc=c,p.prototype._fillFuncHit=l,p.prototype._strokeFuncHit=c,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(p),t.Factory.addGetterSetter(p,"data"),t.Factory.addGetterSetter(p,"fontFamily","Arial"),t.Factory.addGetterSetter(p,"fontSize",12,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"fontStyle",h),t.Factory.addGetterSetter(p,"align","left"),t.Factory.addGetterSetter(p,"letterSpacing",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"textBaseline","middle"),t.Factory.addGetterSetter(p,"fontVariant",h),t.Factory.addGetterSetter(p,"text",s),t.Factory.addGetterSetter(p,"textDecoration",""),t.Factory.addGetterSetter(p,"kerningFunc",void 0),Pi}var Oi={},ia;function oc(){if(ia)return Oi;ia=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Transformer=void 0;const o=ut(),t=Q(),i=_t(),e=vt(),r=Yo(),n=jn(),a=Z(),s=J(),h=Z(),l="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(P=>P+".".concat(l)).join(" "),p="nodesRect",y=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],_={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in a.Konva._global;function d(P,w,O){if(P==="rotater")return O;w+=o.Util.degToRad(_[P]||0);const E=(o.Util.radToDeg(w)%360+360)%360;return o.Util._inRange(E,315+22.5,360)||o.Util._inRange(E,0,22.5)?"ns-resize":o.Util._inRange(E,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(E,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(E,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(E,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(E,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(E,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(E,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+E),"pointer")}const m=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function C(P){return{x:P.x+P.width/2*Math.cos(P.rotation)+P.height/2*Math.sin(-P.rotation),y:P.y+P.height/2*Math.cos(P.rotation)+P.width/2*Math.sin(P.rotation)}}function f(P,w,O){const E=O.x+(P.x-O.x)*Math.cos(w)-(P.y-O.y)*Math.sin(w),L=O.y+(P.x-O.x)*Math.sin(w)+(P.y-O.y)*Math.cos(w);return{...P,rotation:P.rotation+w,x:E,y:L}}function u(P,w){const O=C(P);return f(P,w,O)}function b(P,w,O){let E=w;for(let L=0;L<P.length;L++){const v=a.Konva.getAngle(P[L]),A=Math.abs(v-w)%(Math.PI*2);Math.min(A,Math.PI*2-A)<O&&(E=v)}return E}let S=0,T=class extends n.Group{constructor(w){super(w),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(w){return this.setNode(w),this}setNode(w){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([w])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(w=[]){this._nodes&&this._nodes.length&&this.detach();const O=w.filter(L=>L.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=w=O,w.length===1&&this.useSingleNodeRotation()?this.rotation(w[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(L=>{const v=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(L._attrsAffectingSize.length){const A=L._attrsAffectingSize.map(x=>x+"Change."+this._getEventNamespace()).join(" ");L.on(A,v)}L.on(y.map(A=>A+".".concat(this._getEventNamespace())).join(" "),v),L.on("absoluteTransformChange.".concat(this._getEventNamespace()),v),this._proxyDrag(L)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(w){let O;w.on("dragstart.".concat(this._getEventNamespace()),E=>{O=w.getAbsolutePosition(),!this.isDragging()&&w!==this.findOne(".back")&&this.startDrag(E,!1)}),w.on("dragmove.".concat(this._getEventNamespace()),E=>{if(!O)return;const L=w.getAbsolutePosition(),v=L.x-O.x,A=L.y-O.y;this.nodes().forEach(x=>{if(x===w||x.isDragging())return;const R=x.getAbsolutePosition();x.setAbsolutePosition({x:R.x+v,y:R.y+A}),x.startDrag(E)}),O=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(w=>{w.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p,this.__getNodeRect)}__getNodeShape(w,O=this.rotation(),E){const L=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),v=w.getAbsoluteScale(E),A=w.getAbsolutePosition(E),x=L.x*v.x-w.offsetX()*v.x,R=L.y*v.y-w.offsetY()*v.y,M=(a.Konva.getAngle(w.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),D={x:A.x+x*Math.cos(M)+R*Math.sin(-M),y:A.y+R*Math.cos(M)+x*Math.sin(M),width:L.width*v.x,height:L.height*v.y,rotation:M};return f(D,-a.Konva.getAngle(O),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const O=[];this.nodes().map(M=>{const D=M.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],N=M.getAbsoluteTransform();I.forEach(function(U){const q=N.point(U);O.push(q)})});const E=new o.Transform;E.rotate(-a.Konva.getAngle(this.rotation()));let L=1/0,v=1/0,A=-1/0,x=-1/0;O.forEach(function(M){const D=E.point(M);L===void 0&&(L=A=D.x,v=x=D.y),L=Math.min(L,D.x),v=Math.min(v,D.y),A=Math.max(A,D.x),x=Math.max(x,D.y)}),E.invert();const R=E.point({x:L,y:v});return{x:R.x,y:R.y,width:A-L,height:x-v,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),m.forEach(w=>{this._createAnchor(w)}),this._createAnchor("rotater")}_createAnchor(w){const O=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:w+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),E=this;O.on("mousedown touchstart",function(L){E._handleMouseDown(L)}),O.on("dragstart",L=>{O.stopDrag(),L.cancelBubble=!0}),O.on("dragend",L=>{L.cancelBubble=!0}),O.on("mouseenter",()=>{const L=a.Konva.getAngle(this.rotation()),v=this.rotateAnchorCursor(),A=d(w,L,v);O.getStage().content&&(O.getStage().content.style.cursor=A),this._cursorChange=!0}),O.on("mouseout",()=>{O.getStage().content&&(O.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(O)}_createBack(){const w=new e.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(O,E){const L=E.getParent(),v=L.padding();O.beginPath(),O.rect(-v,-v,E.width()+v*2,E.height()+v*2),O.moveTo(E.width()/2,-v),L.rotateEnabled()&&L.rotateLineVisible()&&O.lineTo(E.width()/2,-L.rotateAnchorOffset()*o.Util._sign(E.height())-v),O.fillStrokeShape(E)},hitFunc:(O,E)=>{if(!this.shouldOverdrawWholeArea())return;const L=this.padding();O.beginPath(),O.rect(-L,-L,E.width()+L*2,E.height()+L*2),O.fillStrokeShape(E)}});this.add(w),this._proxyDrag(w),w.on("dragstart",O=>{O.cancelBubble=!0}),w.on("dragmove",O=>{O.cancelBubble=!0}),w.on("dragend",O=>{O.cancelBubble=!0}),this.on("dragmove",O=>{this.update()})}_handleMouseDown(w){if(this._transforming)return;this._movingAnchorName=w.target.name().split(" ")[0];const O=this._getNodeRect(),E=O.width,L=O.height,v=Math.sqrt(Math.pow(E,2)+Math.pow(L,2));this.sin=Math.abs(L/v),this.cos=Math.abs(E/v),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const A=w.target.getAbsolutePosition(),x=w.target.getStage().getPointerPosition();this._anchorDragOffset={x:x.x-A.x,y:x.y-A.y},S++,this._fire("transformstart",{evt:w.evt,target:this.getNode()}),this._nodes.forEach(R=>{R._fire("transformstart",{evt:w.evt,target:R})})}_handleMouseMove(w){let O,E,L;const v=this.findOne("."+this._movingAnchorName),A=v.getStage();A.setPointersPositions(w);const x=A.getPointerPosition();let R={x:x.x-this._anchorDragOffset.x,y:x.y-this._anchorDragOffset.y};const M=v.getAbsolutePosition();this.anchorDragBoundFunc()&&(R=this.anchorDragBoundFunc()(M,R,w)),v.setAbsolutePosition(R);const D=v.getAbsolutePosition();if(M.x===D.x&&M.y===D.y)return;if(this._movingAnchorName==="rotater"){const z=this._getNodeRect();O=v.x()-z.width/2,E=-v.y()+z.height/2;let H=Math.atan2(-E,O)+Math.PI/2;z.height<0&&(H-=Math.PI);const K=a.Konva.getAngle(this.rotation())+H,et=a.Konva.getAngle(this.rotationSnapTolerance()),j=b(this.rotationSnaps(),K,et)-z.rotation,Ct=u(z,j);this._fitNodesInto(Ct,w);return}const I=this.shiftBehavior();let N;I==="inverted"?N=this.keepRatio()&&!w.shiftKey:I==="none"?N=this.keepRatio():N=this.keepRatio()||w.shiftKey;var W=this.centeredScaling()||w.altKey;if(this._movingAnchorName==="top-left"){if(N){var U=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};L=Math.sqrt(Math.pow(U.x-v.x(),2)+Math.pow(U.y-v.y(),2));var q=this.findOne(".top-left").x()>U.x?-1:1,B=this.findOne(".top-left").y()>U.y?-1:1;O=L*this.cos*q,E=L*this.sin*B,this.findOne(".top-left").x(U.x-O),this.findOne(".top-left").y(U.y-E)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(v.y());else if(this._movingAnchorName==="top-right"){if(N){var U=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};L=Math.sqrt(Math.pow(v.x()-U.x,2)+Math.pow(U.y-v.y(),2));var q=this.findOne(".top-right").x()<U.x?-1:1,B=this.findOne(".top-right").y()>U.y?-1:1;O=L*this.cos*q,E=L*this.sin*B,this.findOne(".top-right").x(U.x+O),this.findOne(".top-right").y(U.y-E)}var V=v.position();this.findOne(".top-left").y(V.y),this.findOne(".bottom-right").x(V.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(v.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(v.x());else if(this._movingAnchorName==="bottom-left"){if(N){var U=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};L=Math.sqrt(Math.pow(U.x-v.x(),2)+Math.pow(v.y()-U.y,2));var q=U.x<v.x()?-1:1,B=v.y()<U.y?-1:1;O=L*this.cos*q,E=L*this.sin*B,v.x(U.x-O),v.y(U.y+E)}V=v.position(),this.findOne(".top-left").x(V.x),this.findOne(".bottom-right").y(V.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(v.y());else if(this._movingAnchorName==="bottom-right"){if(N){var U=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};L=Math.sqrt(Math.pow(v.x()-U.x,2)+Math.pow(v.y()-U.y,2));var q=this.findOne(".bottom-right").x()<U.x?-1:1,B=this.findOne(".bottom-right").y()<U.y?-1:1;O=L*this.cos*q,E=L*this.sin*B,this.findOne(".bottom-right").x(U.x+O),this.findOne(".bottom-right").y(U.y+E)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var W=this.centeredScaling()||w.altKey;if(W){const z=this.findOne(".top-left"),H=this.findOne(".bottom-right"),X=z.x(),K=z.y(),et=this.getWidth()-H.x(),rt=this.getHeight()-H.y();H.move({x:-X,y:-K}),z.move({x:et,y:rt})}const Y=this.findOne(".top-left").getAbsolutePosition();O=Y.x,E=Y.y;const F=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),G=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:O,y:E,width:F,height:G,rotation:a.Konva.getAngle(this.rotation())},w)}_handleMouseUp(w){this._removeEvents(w)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(w){var O;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const E=this.getNode();S--,this._fire("transformend",{evt:w,target:E}),(O=this.getLayer())===null||O===void 0||O.batchDraw(),E&&this._nodes.forEach(L=>{var v;L._fire("transformend",{evt:w,target:L}),(v=L.getLayer())===null||v===void 0||v.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(w,O){const E=this._getNodeRect(),L=1;if(o.Util._inRange(w.width,-this.padding()*2-L,L)){this.update();return}if(o.Util._inRange(w.height,-this.padding()*2-L,L)){this.update();return}const v=new o.Transform;if(v.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("left")>=0){const N=v.point({x:-this.padding()*2,y:0});w.x+=N.x,w.y+=N.y,w.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y}else if(this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("right")>=0){const N=v.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y,w.width+=this.padding()*2}if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("top")>=0){const N=v.point({x:0,y:-this.padding()*2});w.x+=N.x,w.y+=N.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y,w.height+=this.padding()*2}else if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const N=v.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y,w.height+=this.padding()*2}if(this.boundBoxFunc()){const N=this.boundBoxFunc()(E,w);N?w=N:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const A=1e7,x=new o.Transform;x.translate(E.x,E.y),x.rotate(E.rotation),x.scale(E.width/A,E.height/A);const R=new o.Transform,M=w.width/A,D=w.height/A;this.flipEnabled()===!1?(R.translate(w.x,w.y),R.rotate(w.rotation),R.translate(w.width<0?w.width:0,w.height<0?w.height:0),R.scale(Math.abs(M),Math.abs(D))):(R.translate(w.x,w.y),R.rotate(w.rotation),R.scale(M,D));const I=R.multiply(x.invert());this._nodes.forEach(N=>{var U;const q=N.getParent().getAbsoluteTransform(),B=N.getTransform().copy();B.translate(N.offsetX(),N.offsetY());const V=new o.Transform;V.multiply(q.copy().invert()).multiply(I).multiply(q).multiply(B);const W=V.decompose();N.setAttrs(W),(U=N.getLayer())===null||U===void 0||U.batchDraw()}),this.rotation(o.Util._getRotation(w.rotation)),this._nodes.forEach(N=>{this._fire("transform",{evt:O,target:N}),N._fire("transform",{evt:O,target:N})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(w,O){this.findOne(w).setAttrs(O)}update(){var w;const O=this._getNodeRect();this.rotation(o.Util._getRotation(O.rotation));const E=O.width,L=O.height,v=this.enabledAnchors(),A=this.resizeEnabled(),x=this.padding(),R=this.anchorSize(),M=this.find("._anchor");M.forEach(I=>{I.setAttrs({width:R,height:R,offsetX:R/2,offsetY:R/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:R/2+x,offsetY:R/2+x,visible:A&&v.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:E/2,y:0,offsetY:R/2+x,visible:A&&v.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:E,y:0,offsetX:R/2-x,offsetY:R/2+x,visible:A&&v.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:L/2,offsetX:R/2+x,visible:A&&v.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:E,y:L/2,offsetX:R/2-x,visible:A&&v.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:L,offsetX:R/2+x,offsetY:R/2-x,visible:A&&v.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:E/2,y:L,offsetY:R/2-x,visible:A&&v.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:E,y:L,offsetX:R/2-x,offsetY:R/2-x,visible:A&&v.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:E/2,y:-this.rotateAnchorOffset()*o.Util._sign(L)-x,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:E,height:L,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const D=this.anchorStyleFunc();D&&M.forEach(I=>{D(I)}),(w=this.getLayer())===null||w===void 0||w.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const w=this.findOne("."+this._movingAnchorName);w&&w.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),n.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(w){return i.Node.prototype.clone.call(this,w)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Oi.Transformer=T,T.isTransforming=()=>S>0;function k(P){return P instanceof Array||o.Util.warn("enabledAnchors value should be an array"),P instanceof Array&&P.forEach(function(w){m.indexOf(w)===-1&&o.Util.warn("Unknown anchor name: "+w+". Available names are: "+m.join(", "))}),P||[]}return T.prototype.className="Transformer",(0,h._registerNode)(T),t.Factory.addGetterSetter(T,"enabledAnchors",m,k),t.Factory.addGetterSetter(T,"flipEnabled",!0,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(T,"resizeEnabled",!0),t.Factory.addGetterSetter(T,"anchorSize",10,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(T,"rotateEnabled",!0),t.Factory.addGetterSetter(T,"rotateLineVisible",!0),t.Factory.addGetterSetter(T,"rotationSnaps",[]),t.Factory.addGetterSetter(T,"rotateAnchorOffset",50,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(T,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(T,"rotationSnapTolerance",5,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(T,"borderEnabled",!0),t.Factory.addGetterSetter(T,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(T,"anchorStrokeWidth",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(T,"anchorFill","white"),t.Factory.addGetterSetter(T,"anchorCornerRadius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(T,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(T,"borderStrokeWidth",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(T,"borderDash"),t.Factory.addGetterSetter(T,"keepRatio",!0),t.Factory.addGetterSetter(T,"shiftBehavior","default"),t.Factory.addGetterSetter(T,"centeredScaling",!1),t.Factory.addGetterSetter(T,"ignoreStroke",!1),t.Factory.addGetterSetter(T,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(T,"nodes"),t.Factory.addGetterSetter(T,"node"),t.Factory.addGetterSetter(T,"boundBoxFunc"),t.Factory.addGetterSetter(T,"anchorDragBoundFunc"),t.Factory.addGetterSetter(T,"anchorStyleFunc"),t.Factory.addGetterSetter(T,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(T,"useSingleNodeRotation",!0),t.Factory.backCompat(T,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Oi}var Ai={},ra;function hc(){if(ra)return Ai;ra=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Wedge=void 0;const o=Q(),t=vt(),i=Z(),e=J(),r=Z();let n=class extends t.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),s.lineTo(0,0),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return Ai.Wedge=n,n.prototype.className="Wedge",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"radius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1),o.Factory.backCompat(n,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Ai}var Ei={},na;function lc(){if(na)return Ei;na=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Blur=void 0;const o=Q(),t=_t(),i=J();function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(h,l){const c=h.data,p=h.width,y=h.height;let _,g,d,m,C,f,u,b,S,T,k,P,w,O,E,L,v,A,x,R,M,D,I,N;const U=l+l+1,q=p-1,B=y-1,V=l+1,W=V*(V+1)/2,Y=new e,F=r[l],G=n[l];let z=null,H=Y,X=null,K=null;for(d=1;d<U;d++)H=H.next=new e,d===V&&(z=H);for(H.next=Y,u=f=0,g=0;g<y;g++){for(L=v=A=x=b=S=T=k=0,P=V*(R=c[f]),w=V*(M=c[f+1]),O=V*(D=c[f+2]),E=V*(I=c[f+3]),b+=W*R,S+=W*M,T+=W*D,k+=W*I,H=Y,d=0;d<V;d++)H.r=R,H.g=M,H.b=D,H.a=I,H=H.next;for(d=1;d<V;d++)m=f+((q<d?q:d)<<2),b+=(H.r=R=c[m])*(N=V-d),S+=(H.g=M=c[m+1])*N,T+=(H.b=D=c[m+2])*N,k+=(H.a=I=c[m+3])*N,L+=R,v+=M,A+=D,x+=I,H=H.next;for(X=Y,K=z,_=0;_<p;_++)c[f+3]=I=k*F>>G,I!==0?(I=255/I,c[f]=(b*F>>G)*I,c[f+1]=(S*F>>G)*I,c[f+2]=(T*F>>G)*I):c[f]=c[f+1]=c[f+2]=0,b-=P,S-=w,T-=O,k-=E,P-=X.r,w-=X.g,O-=X.b,E-=X.a,m=u+((m=_+l+1)<q?m:q)<<2,L+=X.r=c[m],v+=X.g=c[m+1],A+=X.b=c[m+2],x+=X.a=c[m+3],b+=L,S+=v,T+=A,k+=x,X=X.next,P+=R=K.r,w+=M=K.g,O+=D=K.b,E+=I=K.a,L-=R,v-=M,A-=D,x-=I,K=K.next,f+=4;u+=p}for(_=0;_<p;_++){for(v=A=x=L=S=T=k=b=0,f=_<<2,P=V*(R=c[f]),w=V*(M=c[f+1]),O=V*(D=c[f+2]),E=V*(I=c[f+3]),b+=W*R,S+=W*M,T+=W*D,k+=W*I,H=Y,d=0;d<V;d++)H.r=R,H.g=M,H.b=D,H.a=I,H=H.next;for(C=p,d=1;d<=l;d++)f=C+_<<2,b+=(H.r=R=c[f])*(N=V-d),S+=(H.g=M=c[f+1])*N,T+=(H.b=D=c[f+2])*N,k+=(H.a=I=c[f+3])*N,L+=R,v+=M,A+=D,x+=I,H=H.next,d<B&&(C+=p);for(f=_,X=Y,K=z,g=0;g<y;g++)m=f<<2,c[m+3]=I=k*F>>G,I>0?(I=255/I,c[m]=(b*F>>G)*I,c[m+1]=(S*F>>G)*I,c[m+2]=(T*F>>G)*I):c[m]=c[m+1]=c[m+2]=0,b-=P,S-=w,T-=O,k-=E,P-=X.r,w-=X.g,O-=X.b,E-=X.a,m=_+((m=g+V)<B?m:B)*p<<2,b+=L+=X.r=c[m],S+=v+=X.g=c[m+1],T+=A+=X.b=c[m+2],k+=x+=X.a=c[m+3],X=X.next,P+=R=K.r,w+=M=K.g,O+=D=K.b,E+=I=K.a,L-=R,v-=M,A-=D,x-=I,K=K.next,f+=p}}const s=function(l){const c=Math.round(this.blurRadius());c>0&&a(l,c)};return Ei.Blur=s,o.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ei}var Ri={},sa;function cc(){if(sa)return Ri;sa=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Brighten=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=this.brightness()*255,a=r.data,s=a.length;for(let h=0;h<s;h+=4)a[h]+=n,a[h+1]+=n,a[h+2]+=n};return Ri.Brighten=e,o.Factory.addGetterSetter(t.Node,"brightness",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ri}var ki={},aa;function dc(){if(aa)return ki;aa=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Contrast=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=Math.pow((this.contrast()+100)/100,2),a=r.data,s=a.length;let h=150,l=150,c=150;for(let p=0;p<s;p+=4)h=a[p],l=a[p+1],c=a[p+2],h/=255,h-=.5,h*=n,h+=.5,h*=255,l/=255,l-=.5,l*=n,l+=.5,l*=255,c/=255,c-=.5,c*=n,c+=.5,c*=255,h=h<0?0:h>255?255:h,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,a[p]=h,a[p+1]=l,a[p+2]=c};return ki.Contrast=e,o.Factory.addGetterSetter(t.Node,"contrast",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),ki}var Mi={},oa;function uc(){if(oa)return Mi;oa=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Emboss=void 0;const o=Q(),t=_t(),i=ut(),e=J(),r=function(n){const a=this.embossStrength()*10,s=this.embossWhiteLevel()*255,h=this.embossDirection(),l=this.embossBlend(),c=n.data,p=n.width,y=n.height,_=p*4;let g=0,d=0,m=y;switch(h){case"top-left":g=-1,d=-1;break;case"top":g=-1,d=0;break;case"top-right":g=-1,d=1;break;case"right":g=0,d=1;break;case"bottom-right":g=1,d=1;break;case"bottom":g=1,d=0;break;case"bottom-left":g=1,d=-1;break;case"left":g=0,d=-1;break;default:i.Util.error("Unknown emboss direction: "+h)}do{const C=(m-1)*_;let f=g;m+f<1&&(f=0),m+f>y&&(f=0);const u=(m-1+f)*p*4;let b=p;do{const S=C+(b-1)*4;let T=d;b+T<1&&(T=0),b+T>p&&(T=0);const k=u+(b-1+T)*4,P=c[S]-c[k],w=c[S+1]-c[k+1],O=c[S+2]-c[k+2];let E=P;const L=E>0?E:-E,v=w>0?w:-w,A=O>0?O:-O;if(v>L&&(E=w),A>L&&(E=O),E*=a,l){const x=c[S]+E,R=c[S+1]+E,M=c[S+2]+E;c[S]=x>255?255:x<0?0:x,c[S+1]=R>255?255:R<0?0:R,c[S+2]=M>255?255:M<0?0:M}else{let x=s-E;x<0?x=0:x>255&&(x=255),c[S]=c[S+1]=c[S+2]=x}}while(--b)}while(--m)};return Mi.Emboss=r,o.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,o.Factory.afterSetFilter),Mi}var Fi={},ha;function fc(){if(ha)return Fi;ha=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Enhance=void 0;const o=Q(),t=_t(),i=J();function e(n,a,s,h,l){const c=s-a,p=l-h;if(c===0)return h+p/2;if(p===0)return h;let y=(n-a)/c;return y=p*y+h,y}const r=function(n){const a=n.data,s=a.length;let h=a[0],l=h,c,p=a[1],y=p,_,g=a[2],d=g,m;const C=this.enhance();if(C===0)return;for(let E=0;E<s;E+=4)c=a[E+0],c<h?h=c:c>l&&(l=c),_=a[E+1],_<p?p=_:_>y&&(y=_),m=a[E+2],m<g?g=m:m>d&&(d=m);l===h&&(l=255,h=0),y===p&&(y=255,p=0),d===g&&(d=255,g=0);let f,u,b,S,T,k,P,w,O;C>0?(u=l+C*(255-l),b=h-C*(h-0),T=y+C*(255-y),k=p-C*(p-0),w=d+C*(255-d),O=g-C*(g-0)):(f=(l+h)*.5,u=l+C*(l-f),b=h+C*(h-f),S=(y+p)*.5,T=y+C*(y-S),k=p+C*(p-S),P=(d+g)*.5,w=d+C*(d-P),O=g+C*(g-P));for(let E=0;E<s;E+=4)a[E+0]=e(a[E+0],h,l,b,u),a[E+1]=e(a[E+1],p,y,k,T),a[E+2]=e(a[E+2],g,d,O,w)};return Fi.Enhance=r,o.Factory.addGetterSetter(t.Node,"enhance",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Fi}var Li={},la;function gc(){if(la)return Li;la=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Grayscale=void 0;const o=function(t){const i=t.data,e=i.length;for(let r=0;r<e;r+=4){const n=.34*i[r]+.5*i[r+1]+.16*i[r+2];i[r]=n,i[r+1]=n,i[r+2]=n}};return Li.Grayscale=o,Li}var Di={},ca;function _c(){if(ca)return Di;ca=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.HSL=void 0;const o=Q(),t=_t(),i=J();o.Factory.addGetterSetter(t.Node,"hue",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"luminance",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter);const e=function(r){const n=r.data,a=n.length,s=1,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,p=s*h*Math.cos(l*Math.PI/180),y=s*h*Math.sin(l*Math.PI/180),_=.299*s+.701*p+.167*y,g=.587*s-.587*p+.33*y,d=.114*s-.114*p-.497*y,m=.299*s-.299*p-.328*y,C=.587*s+.413*p+.035*y,f=.114*s-.114*p+.293*y,u=.299*s-.3*p+1.25*y,b=.587*s-.586*p-1.05*y,S=.114*s+.886*p-.2*y;let T,k,P,w;for(let O=0;O<a;O+=4)T=n[O+0],k=n[O+1],P=n[O+2],w=n[O+3],n[O+0]=_*T+g*k+d*P+c,n[O+1]=m*T+C*k+f*P+c,n[O+2]=u*T+b*k+S*P+c,n[O+3]=w};return Di.HSL=e,Di}var Ni={},da;function pc(){if(da)return Ni;da=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.HSV=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=r.data,a=n.length,s=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=s*h*Math.cos(l*Math.PI/180),p=s*h*Math.sin(l*Math.PI/180),y=.299*s+.701*c+.167*p,_=.587*s-.587*c+.33*p,g=.114*s-.114*c-.497*p,d=.299*s-.299*c-.328*p,m=.587*s+.413*c+.035*p,C=.114*s-.114*c+.293*p,f=.299*s-.3*c+1.25*p,u=.587*s-.586*c-1.05*p,b=.114*s+.886*c-.2*p;let S,T,k,P;for(let w=0;w<a;w+=4)S=n[w+0],T=n[w+1],k=n[w+2],P=n[w+3],n[w+0]=y*S+_*T+g*k,n[w+1]=d*S+m*T+C*k,n[w+2]=f*S+u*T+b*k,n[w+3]=P};return Ni.HSV=e,o.Factory.addGetterSetter(t.Node,"hue",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"value",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ni}var Gi={},ua;function mc(){if(ua)return Gi;ua=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Invert=void 0;const o=function(t){const i=t.data,e=i.length;for(let r=0;r<e;r+=4)i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2]};return Gi.Invert=o,Gi}var Ii={},fa;function yc(){if(fa)return Ii;fa=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Kaleidoscope=void 0;const o=Q(),t=_t(),i=ut(),e=J(),r=function(s,h,l){const c=s.data,p=h.data,y=s.width,_=s.height,g=l.polarCenterX||y/2,d=l.polarCenterY||_/2;let m=Math.sqrt(g*g+d*d),C=y-g,f=_-d;const u=Math.sqrt(C*C+f*f);m=u>m?u:m;const b=_,S=y,T=360/S*Math.PI/180;for(let k=0;k<S;k+=1){const P=Math.sin(k*T),w=Math.cos(k*T);for(let O=0;O<b;O+=1){C=Math.floor(g+m*O/b*w),f=Math.floor(d+m*O/b*P);let E=(f*y+C)*4;const L=c[E+0],v=c[E+1],A=c[E+2],x=c[E+3];E=(k+O*y)*4,p[E+0]=L,p[E+1]=v,p[E+2]=A,p[E+3]=x}}},n=function(s,h,l){const c=s.data,p=h.data,y=s.width,_=s.height,g=l.polarCenterX||y/2,d=l.polarCenterY||_/2;let m=Math.sqrt(g*g+d*d),C=y-g,f=_-d;const u=Math.sqrt(C*C+f*f);m=u>m?u:m;const b=_,S=y,T=0;let k,P;for(C=0;C<y;C+=1)for(f=0;f<_;f+=1){const w=C-g,O=f-d,E=Math.sqrt(w*w+O*O)*b/m;let L=(Math.atan2(O,w)*180/Math.PI+360+T)%360;L=L*S/360,k=Math.floor(L),P=Math.floor(E);let v=(P*y+k)*4;const A=c[v+0],x=c[v+1],R=c[v+2],M=c[v+3];v=(f*y+C)*4,p[v+0]=A,p[v+1]=x,p[v+2]=R,p[v+3]=M}},a=function(s){const h=s.width,l=s.height;let c,p,y,_,g,d,m,C,f,u,b=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),T=Math.floor(h*(S%360)/360);if(b<1)return;const k=i.Util.createCanvasElement();k.width=h,k.height=l;const P=k.getContext("2d").getImageData(0,0,h,l);i.Util.releaseCanvas(k),r(s,P,{polarCenterX:h/2,polarCenterY:l/2});let w=h/Math.pow(2,b);for(;w<=8;)w=w*2,b-=1;w=Math.ceil(w);let O=w,E=0,L=O,v=1;for(T+w>h&&(E=O,L=0,v=-1),p=0;p<l;p+=1)for(c=E;c!==L;c+=v)y=Math.round(c+T)%h,f=(h*p+y)*4,g=P.data[f+0],d=P.data[f+1],m=P.data[f+2],C=P.data[f+3],u=(h*p+c)*4,P.data[u+0]=g,P.data[u+1]=d,P.data[u+2]=m,P.data[u+3]=C;for(p=0;p<l;p+=1)for(O=Math.floor(w),_=0;_<b;_+=1){for(c=0;c<O+1;c+=1)f=(h*p+c)*4,g=P.data[f+0],d=P.data[f+1],m=P.data[f+2],C=P.data[f+3],u=(h*p+O*2-c-1)*4,P.data[u+0]=g,P.data[u+1]=d,P.data[u+2]=m,P.data[u+3]=C;O*=2}n(P,s,{})};return Ii.Kaleidoscope=a,o.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),Ii}var Bi={},ga;function vc(){if(ga)return Bi;ga=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Mask=void 0;const o=Q(),t=_t(),i=J();function e(y,_,g){let d=(g*y.width+_)*4;const m=[];return m.push(y.data[d++],y.data[d++],y.data[d++],y.data[d++]),m}function r(y,_){return Math.sqrt(Math.pow(y[0]-_[0],2)+Math.pow(y[1]-_[1],2)+Math.pow(y[2]-_[2],2))}function n(y){const _=[0,0,0];for(let g=0;g<y.length;g++)_[0]+=y[g][0],_[1]+=y[g][1],_[2]+=y[g][2];return _[0]/=y.length,_[1]/=y.length,_[2]/=y.length,_}function a(y,_){const g=e(y,0,0),d=e(y,y.width-1,0),m=e(y,0,y.height-1),C=e(y,y.width-1,y.height-1),f=_||10;if(r(g,d)<f&&r(d,C)<f&&r(C,m)<f&&r(m,g)<f){const u=n([d,g,C,m]),b=[];for(let S=0;S<y.width*y.height;S++){const T=r(u,[y.data[S*4],y.data[S*4+1],y.data[S*4+2]]);b[S]=T<f?0:255}return b}}function s(y,_){for(let g=0;g<y.width*y.height;g++)y.data[4*g+3]=_[g]}function h(y,_,g){const d=[1,1,1,1,0,1,1,1,1],m=Math.round(Math.sqrt(d.length)),C=Math.floor(m/2),f=[];for(let u=0;u<g;u++)for(let b=0;b<_;b++){const S=u*_+b;let T=0;for(let k=0;k<m;k++)for(let P=0;P<m;P++){const w=u+k-C,O=b+P-C;if(w>=0&&w<g&&O>=0&&O<_){const E=w*_+O,L=d[k*m+P];T+=y[E]*L}}f[S]=T===255*8?255:0}return f}function l(y,_,g){const d=[1,1,1,1,1,1,1,1,1],m=Math.round(Math.sqrt(d.length)),C=Math.floor(m/2),f=[];for(let u=0;u<g;u++)for(let b=0;b<_;b++){const S=u*_+b;let T=0;for(let k=0;k<m;k++)for(let P=0;P<m;P++){const w=u+k-C,O=b+P-C;if(w>=0&&w<g&&O>=0&&O<_){const E=w*_+O,L=d[k*m+P];T+=y[E]*L}}f[S]=T>=255*4?255:0}return f}function c(y,_,g){const d=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],m=Math.round(Math.sqrt(d.length)),C=Math.floor(m/2),f=[];for(let u=0;u<g;u++)for(let b=0;b<_;b++){const S=u*_+b;let T=0;for(let k=0;k<m;k++)for(let P=0;P<m;P++){const w=u+k-C,O=b+P-C;if(w>=0&&w<g&&O>=0&&O<_){const E=w*_+O,L=d[k*m+P];T+=y[E]*L}}f[S]=T}return f}const p=function(y){const _=this.threshold();let g=a(y,_);return g&&(g=h(g,y.width,y.height),g=l(g,y.width,y.height),g=c(g,y.width,y.height),s(y,g)),y};return Bi.Mask=p,o.Factory.addGetterSetter(t.Node,"threshold",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Bi}var Ui={},_a;function bc(){if(_a)return Ui;_a=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Noise=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=this.noise()*255,a=r.data,s=a.length,h=n/2;for(let l=0;l<s;l+=4)a[l+0]+=h-2*h*Math.random(),a[l+1]+=h-2*h*Math.random(),a[l+2]+=h-2*h*Math.random()};return Ui.Noise=e,o.Factory.addGetterSetter(t.Node,"noise",.2,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ui}var Vi={},pa;function Sc(){if(pa)return Vi;pa=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Pixelate=void 0;const o=Q(),t=ut(),i=_t(),e=J(),r=function(n){let a=Math.ceil(this.pixelSize()),s=n.width,h=n.height,l,c,p,y,_,g,d,m=Math.ceil(s/a),C=Math.ceil(h/a),f,u,b,S,T,k,P,w=n.data;if(a<=0){t.Util.error("pixelSize value can not be <= 0");return}for(T=0;T<m;T+=1)for(k=0;k<C;k+=1){for(y=0,_=0,g=0,d=0,f=T*a,u=f+a,b=k*a,S=b+a,P=0,l=f;l<u;l+=1)if(!(l>=s))for(c=b;c<S;c+=1)c>=h||(p=(s*c+l)*4,y+=w[p+0],_+=w[p+1],g+=w[p+2],d+=w[p+3],P+=1);for(y=y/P,_=_/P,g=g/P,d=d/P,l=f;l<u;l+=1)if(!(l>=s))for(c=b;c<S;c+=1)c>=h||(p=(s*c+l)*4,w[p+0]=y,w[p+1]=_,w[p+2]=g,w[p+3]=d)}};return Vi.Pixelate=r,o.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),Vi}var zi={},ma;function Cc(){if(ma)return zi;ma=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.Posterize=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=Math.round(this.levels()*254)+1,a=r.data,s=a.length,h=255/n;for(let l=0;l<s;l+=1)a[l]=Math.floor(a[l]/h)*h};return zi.Posterize=e,o.Factory.addGetterSetter(t.Node,"levels",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),zi}var qi={},ya;function xc(){if(ya)return qi;ya=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.RGB=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=r.data,a=n.length,s=this.red(),h=this.green(),l=this.blue();for(let c=0;c<a;c+=4){const p=(.34*n[c]+.5*n[c+1]+.16*n[c+2])/255;n[c]=p*s,n[c+1]=p*h,n[c+2]=p*l,n[c+3]=n[c+3]}};return qi.RGB=e,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,i.RGBComponent,o.Factory.afterSetFilter),qi}var Hi={},va;function wc(){if(va)return Hi;va=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.RGBA=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=r.data,a=n.length,s=this.red(),h=this.green(),l=this.blue(),c=this.alpha();for(let p=0;p<a;p+=4){const y=1-c;n[p]=s*c+n[p]*y,n[p+1]=h*c+n[p+1]*y,n[p+2]=l*c+n[p+2]*y}};return Hi.RGBA=e,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,i.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),Hi}var Wi={},ba;function Tc(){if(ba)return Wi;ba=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Sepia=void 0;const o=function(t){const i=t.data,e=i.length;for(let r=0;r<e;r+=4){const n=i[r+0],a=i[r+1],s=i[r+2];i[r+0]=Math.min(255,n*.393+a*.769+s*.189),i[r+1]=Math.min(255,n*.349+a*.686+s*.168),i[r+2]=Math.min(255,n*.272+a*.534+s*.131)}};return Wi.Sepia=o,Wi}var Yi={},Sa;function Pc(){if(Sa)return Yi;Sa=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Solarize=void 0;const o=function(t){const i=t.data,e=t.width,r=t.height,n=e*4;let a=r;do{const s=(a-1)*n;let h=e;do{const l=s+(h-1)*4;let c=i[l],p=i[l+1],y=i[l+2];c>127&&(c=255-c),p>127&&(p=255-p),y>127&&(y=255-y),i[l]=c,i[l+1]=p,i[l+2]=y}while(--h)}while(--a)};return Yi.Solarize=o,Yi}var Xi={},Ca;function Oc(){if(Ca)return Xi;Ca=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Threshold=void 0;const o=Q(),t=_t(),i=J(),e=function(r){const n=this.threshold()*255,a=r.data,s=a.length;for(let h=0;h<s;h+=1)a[h]=a[h]<n?0:255};return Xi.Threshold=e,o.Factory.addGetterSetter(t.Node,"threshold",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Xi}var xa;function Ac(){if(xa)return oi;xa=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.Konva=void 0;const o=Kl(),t=jl(),i=Zl(),e=Ql(),r=Jl(),n=tc(),a=ec(),s=Ho(),h=Zn(),l=Yo(),c=ic(),p=rc(),y=nc(),_=sc(),g=Xo(),d=ac(),m=oc(),C=hc(),f=lc(),u=cc(),b=dc(),S=uc(),T=fc(),k=gc(),P=_c(),w=pc(),O=mc(),E=yc(),L=vc(),v=bc(),A=Sc(),x=Cc(),R=xc(),M=wc(),D=Tc(),I=Pc(),N=Oc();return oi.Konva=o.Konva.Util._assign(o.Konva,{Arc:t.Arc,Arrow:i.Arrow,Circle:e.Circle,Ellipse:r.Ellipse,Image:n.Image,Label:a.Label,Tag:a.Tag,Line:s.Line,Path:h.Path,Rect:l.Rect,RegularPolygon:c.RegularPolygon,Ring:p.Ring,Sprite:y.Sprite,Star:_.Star,Text:g.Text,TextPath:d.TextPath,Transformer:m.Transformer,Wedge:C.Wedge,Filters:{Blur:f.Blur,Brighten:u.Brighten,Contrast:b.Contrast,Emboss:S.Emboss,Enhance:T.Enhance,Grayscale:k.Grayscale,HSL:P.HSL,HSV:w.HSV,Invert:O.Invert,Kaleidoscope:E.Kaleidoscope,Mask:L.Mask,Noise:v.Noise,Pixelate:A.Pixelate,Posterize:x.Posterize,RGB:R.RGB,RGBA:M.RGBA,Sepia:D.Sepia,Solarize:I.Solarize,Threshold:N.Threshold}}),oi}var Ec=mr.exports,wa;function Rc(){if(wa)return mr.exports;wa=1,Object.defineProperty(Ec,"__esModule",{value:!0});const o=Ac();return mr.exports=o.Konva,mr.exports}var kc=Rc();const Yt=Aa(kc);var Jr,Ta;function Mc(){if(Ta)return Jr;Ta=1;var o="Expected a function",t=NaN,i="[object Symbol]",e=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,h=typeof Re=="object"&&Re&&Re.Object===Object&&Re,l=typeof self=="object"&&self&&self.Object===Object&&self,c=h||l||Function("return this")(),p=Object.prototype,y=p.toString,_=Math.max,g=Math.min,d=function(){return c.Date.now()};function m(S,T,k){var P,w,O,E,L,v,A=0,x=!1,R=!1,M=!0;if(typeof S!="function")throw new TypeError(o);T=b(T)||0,C(k)&&(x=!!k.leading,R="maxWait"in k,O=R?_(b(k.maxWait)||0,T):O,M="trailing"in k?!!k.trailing:M);function D(F){var G=P,z=w;return P=w=void 0,A=F,E=S.apply(z,G),E}function I(F){return A=F,L=setTimeout(q,T),x?D(F):E}function N(F){var G=F-v,z=F-A,H=T-G;return R?g(H,O-z):H}function U(F){var G=F-v,z=F-A;return v===void 0||G>=T||G<0||R&&z>=O}function q(){var F=d();if(U(F))return B(F);L=setTimeout(q,N(F))}function B(F){return L=void 0,M&&P?D(F):(P=w=void 0,E)}function V(){L!==void 0&&clearTimeout(L),A=0,P=v=w=L=void 0}function W(){return L===void 0?E:B(d())}function Y(){var F=d(),G=U(F);if(P=arguments,w=this,v=F,G){if(L===void 0)return I(v);if(R)return L=setTimeout(q,T),D(v)}return L===void 0&&(L=setTimeout(q,T)),E}return Y.cancel=V,Y.flush=W,Y}function C(S){var T=typeof S;return!!S&&(T=="object"||T=="function")}function f(S){return!!S&&typeof S=="object"}function u(S){return typeof S=="symbol"||f(S)&&y.call(S)==i}function b(S){if(typeof S=="number")return S;if(u(S))return t;if(C(S)){var T=typeof S.valueOf=="function"?S.valueOf():S;S=C(T)?T+"":T}if(typeof S!="string")return S===0?S:+S;S=S.replace(e,"");var k=n.test(S);return k||a.test(S)?s(S.slice(2),k?2:8):r.test(S)?t:+S}return Jr=m,Jr}var Fc=Mc();const Lc=Aa(Fc);function Ko(o){const h='\n    <svg xmlns="http://www.w3.org/2000/svg"\n         width="20"\n         height="23"\n         viewBox="0 0 20 16">\n      <!-- This group shifts the drawing to the right. Vertical padding is handled by the canvas size and hotspot location. -->\n      <g transform="translate(4, 0)">\n        <path fill="'.concat(o,'"\n              d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/>\n      </g>\n    </svg>\n  '),l=encodeURIComponent(h),c="url('data:image/svg+xml;utf8,".concat(l,"')"),p="".concat(c," 0 22");document.documentElement.style.setProperty("--pencil-cursor-url",p)}PubSub.subscribe(it.IMAGE_UPLOAD_NEW_IMAGE,Hc);PubSub.subscribe(it.TOOLBAR_ANNOTATIONS_TOGGLED,qc);PubSub.subscribe(it.TOOLBAR_FONT_SIZE_CHANGED,Vc);PubSub.subscribe(it.TOOLBAR_ZOOM_CHANGED,td);PubSub.subscribe(it.TOOLBAR_STROKE_WIDTH_SELECTED,zc);PubSub.subscribe(it.TOOLBAR_STROKE_COLOR_CHANGED,Bc);PubSub.subscribe(it.TOOLBAR_FONT_COLOR_CHANGED,Uc);PubSub.subscribe(it.TOOLBAR_STROKE_CLICKED,Gc);PubSub.subscribe(it.TOOLBAR_FONT_CLICKED,Ic);PubSub.subscribe(it.TOOLBAR_ERASER_CLICKED,Nc);Yt._fixTextRendering=!0;const $t=document.querySelector(".c-stage"),ie={DRAW:"draw",ERASE:"erase",TEXT:"text"},jo={THIN:2,MEDIUM:5,THICK:10};let Ie=ie.DRAW,$o=jo.MEDIUM,Qn="#FF0000",Zo="#000000",Qo=20,Ve=null,tr=null;const Cn=1,Dc=10;let xn=!1,$=null,qe=new Yt.Layer,Lr=new Yt.Layer,wn=new Yt.Layer,Be=new Yt.Transformer({enabledAnchors:["middle-left","middle-right"],boundBoxFunc:function(o,t){return t.width=Math.max(50,t.width),t}});qe.add(Be);function Nc(){Ie=ie.ERASE,ur()}function Gc(){Ie=ie.DRAW,ur()}function Ic(){Ie=ie.TEXT,ur(),Qc()}function ur(){if($t.classList.remove("is-erasing","is-drawing","is-texting","is-pannable"),xn){$t.classList.add("is-pannable");return}switch(Ie){case ie.DRAW:$t.classList.add("is-drawing");break;case ie.ERASE:$t.classList.add("is-erasing");break;case ie.TEXT:$t.classList.add("is-texting");break}}function Bc(o,t){Qn=t,Ko(t)}function Uc(o,t){Zo=t,Ve instanceof Yt.Text&&Ve.fill(t)}function Vc(o,t){Qo=t,Ve instanceof Yt.Text&&Ve.fontSize(t)}function zc(o,t){$o=jo[t]}function qc(o,t){Lr.visible(!t),qe.visible(!t)}function Hc(o,t){$||Xc(),wn.destroyChildren(),Lr.destroyChildren(),qe.find("Text").forEach(e=>e.destroy()),Be.nodes([]);const i=URL.createObjectURL(t);Yt.Image.fromURL(i,function(e){tr=e,Jo(),wn.add(e),$.scale({x:1,y:1}),$.position({x:0,y:0}),$.draggable(!1),ur(),URL.revokeObjectURL(i)})}const Wc=Lc(Yc,150);function Yc(){$&&($.width($t.clientWidth),$.height($t.clientHeight),Jo())}function Jo(){if(!tr||!$)return;const o=tr.image(),t=$.width(),i=$.height();let e=Math.min(t/o.width,i/o.height);e=Math.min(1,e);const r=o.width*e,n=o.height*e,a=(t-r)/2,s=(i-n)/2;tr.setAttrs({x:a,y:s,width:r,height:n})}function Xc(){$t.classList.remove("d-none"),$=new Yt.Stage({container:".c-stage__canvas",width:$t.clientWidth,height:$t.clientHeight}),$.add(wn),$.add(Lr),$.add(qe),$.on("mousedown touchstart",Kc),$.on("mouseup touchend",jc),$.on("mousemove touchmove",$c),$.on("click",Zc),$.on("wheel",Jc),window.addEventListener("resize",Wc),Ko(Qn)}let Jn=!1,Tr=null;function Kc(o){if(Ie===ie.TEXT||$.draggable())return;Jn=!0;const t=$.getPointerPosition();Tr=new Yt.Line({stroke:Qn,strokeWidth:Ie===ie.DRAW?$o:20,globalCompositeOperation:Ie===ie.DRAW?"source-over":"destination-out",lineCap:"round",lineJoin:"round",points:[t.x,t.y,t.x,t.y],strokeScaleEnabled:!1}),Lr.add(Tr)}function jc(){Jn=!1}function $c(o){if(!Jn)return;o.evt.preventDefault();const t=$.getPointerPosition(),i=Tr.points().concat([t.x,t.y]);Tr.points(i)}function Zc(o){if(o.target===$||o.target===tr){Oa();return}o.target instanceof Yt.Text||Oa()}function Qc(){const o=new Yt.Text({text:"Double click to edit",x:$.width()/2,y:$.height()/2,fill:Zo,fontSize:Qo,draggable:!0,padding:10,align:"center",shadowColor:"black",shadowBlur:0,shadowOffset:{x:.4,y:.4},shadowOpacity:.6}),t=o.width(),i=o.height();o.offsetX(t/2),o.offsetY(i/2),qe.add(o),o.on("transform",function(){o.setAttrs({width:o.width()*o.scaleX(),scaleX:1,scaleY:1})}),o.on("click",e=>{Pa(o)}),Pa(o),o.on("dblclick dbltap",()=>{o.hide(),Be.hide();const e=o.absolutePosition(),r=$.container().getBoundingClientRect(),n=$.scaleX(),a={x:r.left+e.x-o.offsetX()*n,y:r.top+e.y-o.offsetY()*n},s=document.createElement("textarea");$t.appendChild(s),s.className="c-stage__editable-textarea",s.value=o.text(),s.style.top="".concat(a.y,"px"),s.style.left="".concat(a.x,"px"),s.style.width="".concat(o.width()*n,"px"),s.style.height="".concat(o.height()*n,"px"),s.style.fontSize="".concat(o.fontSize()*n,"px"),s.style.padding="".concat(o.padding()*n,"px"),s.style.lineHeight=o.lineHeight(),s.style.fontFamily=o.fontFamily(),s.style.textAlign=o.align(),s.style.color=o.fill(),s.style.transform="rotateZ(".concat(o.rotation()||0,"deg) translateY(-2px)");const h=o.rotation()||0;s.style.transform="rotateZ(".concat(h,"deg)"),s.style.height="auto",s.style.height=s.scrollHeight+"px",s.focus(),s.select();function l(){s.parentNode.removeChild(s),window.removeEventListener("click",p),window.removeEventListener("touchstart",p),o.show(),Be.show(),Be.forceUpdate()}function c(y=0){y||(y=o.placeholder.length*o.fontSize()),s.style.width=y+"px"}s.addEventListener("keydown",function(y){y.key==="Enter"&&!y.shiftKey&&(o.text(s.value),l()),y.key==="Escape"&&l()}),s.addEventListener("keydown",function(){const y=o.getAbsoluteScale().x;c(o.width()*y),s.style.height="auto",s.style.height=s.scrollHeight+o.fontSize()+"px"});function p(y){y.target!==s&&(o.text(s.value),l())}setTimeout(()=>{window.addEventListener("click",p)})})}function Pa(o){Ve=o,Be.nodes([o]),qe.batchDraw()}function Oa(){Ve&&(Be.nodes([]),Ve=null,qe.batchDraw())}function Jc(o){o.evt.preventDefault();const t=$.scaleX(),i=$.getPointerPosition(),e=1.1,n=(o.evt.deltaY>0?-1:1)>0?t*e:t/e,a=Math.max(Cn,Math.min(n,Dc));a!==t&&th(t,a,i)}function th(o,t,i){let e;if(t===Cn)e={x:0,y:0};else{const r={x:(i.x-$.x())/o,y:(i.y-$.y())/o};e={x:i.x-r.x*t,y:i.y-r.y*t}}$.scale({x:t,y:t}),$.position(e),xn=t>Cn,$.draggable(xn),ur()}function td(o,t){if(!$)return;const i=$.scaleX();if(t===i)return;const e={x:$.width()/2,y:$.height()/2};th(i,t,e)}export{ed as __vite_legacy_guard};
